<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title>Using Liquibase with MYSQL | Liquibase Docs</title>
        <meta rel="canonical" href="https://docs.liquibase.com/workflows/database-setup-tutorials/mysql.html" />
        <link href="../../Z_Resources/Stylesheets/TableStyles.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <meta name="description" content="This page guides you through the process of creating a new Liquibase project with MYSQL." />
    </head>
    <body>
        <h1 id="mysql-tutorial">Using <MadCap:variable name="General.Liquibase" /> with MySQL</h1>
        <h4 id="to-test-your-connection-try-running-liquibase-with-the-jdbc-driver-located-in-the-same-directory-as-liquibase">To test your connection, try running <MadCap:variable name="General.Liquibase" /> with the JDBC driver located in the same directory as <MadCap:variable name="General.Liquibase" />:</h4><pre><code class="language-text">liquibase
--driver=com.mysql.cj.jdbc.Driver
--classpath=mysql-connector-java-5.1.21-bin.jar
--url="jdbc:mysql://&lt;IP OR HOSTNAME&gt;:&lt;PORT&gt;/&lt;SCHEMA NAME&gt;?autoReconnect=true&amp;useSSL=FALSE|TRUE" 
--changeLogFile=dbchangelog-1.0.xml
--username=&lt;MYSQL USERNAME&gt;
--password=&lt;MYSQL PASSWORD&gt;generateChangeLog</code></pre>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">Formatted SQL <i><MadCap:variable name="General.changelog" style="font-style: italic;" />s</i> generated by using <MadCap:variable name="General.Liquibase" /> versions previous to 4.2 might cause issues because of the lack of space after a double dash ( -- ). </p>
        <p class="tip" MadCap:autonum="&lt;b&gt;Tip: &lt;/b&gt;">To fix those issues, add a space after the double dash. For example: <code>-- liquibase formatted sql</code> instead of <code>--liquibase formatted sql</code> and <code>-- changeset myname:create-table</code> instead of <code>--changeset myname:create-table</code></p>
        <h2 id="creating-new-liquibase-projects-with-mysql--windows"><strong>Creating New <MadCap:variable name="General.Liquibase" /> projects with MySQL – Windows</strong>
        </h2>
        <p>The purpose of this document is to guide you through the process of creating a new <MadCap:variable name="General.Liquibase" /> project with <strong>MySQL</strong> on a <strong>Windows</strong> machine. In this tutorial, you will generate an example project and follow the instructions to apply and learn concepts associated with creating new <MadCap:variable name="General.Liquibase" /> projects with MySQL.</p>
        <h3 id="prerequisites">Prerequisites</h3>
        <ul>
            <li>If you have not installed the latest version of <MadCap:variable name="General.Liquibase" />, go to <a href="https://www.liquibase.org/download">https://www.liquibase.org/download</a> to install it.</li>
            <li>Ensure the <code>liquibase.bat</code> file's path is set to a location in the PATH System variable.</li>
            <li>Go to <a href="https://dev.mysql.com/downloads/connector/j/">https://dev.mysql.com/downloads/connector/j/</a> and download the jdbc driver jar file for MySQL.<br /></li>
        </ul>
        <blockquote>
            <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">Place the jdbc jar driver file in a known directory so you can locate it easily.</p>
        </blockquote>
        <blockquote>
            <p class="example" MadCap:autonum="&lt;b&gt;Example: &lt;/b&gt;">C:\Users\Liquibase_Drivers\mysql-connector-java-5.1.48.jar</p>
        </blockquote>
        <h2 id="tutorial">Tutorial</h2>
        <h4 id="to-create-a-liquibase-project-with-mysql-on-your-windows-machine-begin-with-the-following-steps">To create a <MadCap:variable name="General.Liquibase" /> project with MySQL on your Windows machine, begin with the following steps:</h4>
        <ul>
            <li>Create a new project folder and name it <code style="font-weight: normal;">LiquibaseMySQL</code>.</li>
            <li>In your <code>LiquibaseMySQL</code> folder, create a new text file and name it <code style="font-weight: normal;">dbchangelog.xml</code>.
<MadCap:variable name="General.changelog" style="font-style: italic;" /> files contain a sequence of <MadCap:variable name="General.changeset" style="font-style: italic;" /><i>s</i>, each of which make small changes to the structure of your database. To add this change:</li>
            <li>Open the <code>dbchangelog.xml</code> file and update the <MadCap:variable name="General.changelog" style="font-style: italic;" /> file with the following code snippet:</li>
        </ul><pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt; 
  &lt;databaseChangeLog 
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd"&gt;
 &lt;/databaseChangeLog&gt;</code></pre>
        <ul>
            <li>In your <code>LiquibaseMySQL</code> folder, create another text file and name it <code><MadCap:variable name="General.liquiPropFile" /></code>.</li>
            <li>Edit the <code><MadCap:variable name="General.liquiPropFile" /></code> file to add the following properties:</li>
        </ul><pre xml:space="preserve"><code class="language-text"> changeLogFile: ../dbchangelog.xml 
 url: jdbc:mysql://localhost:3306/my_schema
 username: root
 password: password
 driver: org.gjt.mm.mysql.Driver  
 classpath: ../../Liquibase_Drivers/mysql-connector-java-5.1.48.jar</code></pre>
        <p>As you are creating this project on Windows OS, you must specify the path with double slashes in the <code>changeLogFile</code> property. Also, use a relative path from your project directory to the driver jdbc jar file location in the <code>classpath</code> property.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">If you already have a <MadCap:variable name="General.LBPro" /> key and want to apply it to
your project, add the following property to your <MadCap:variable name="General.liquiPropFile" />
file.</p><pre><code class="language-text">liquibaseProLicenseKey: &lt;paste license key&gt;
</code></pre>
        <ul>
            <li>Add a <MadCap:variable name="General.changeset" style="font-style: italic;" /> to the <MadCap:variable name="General.changelog" style="font-style: italic;" />. <MadCap:variable name="General.changeset" style="font-style: italic;" /><i>s</i> are uniquely identified by <code>author</code> and <code>id</code> attributes. <MadCap:variable name="General.Liquibase" /> attempts to execute each <MadCap:variable name="General.changeset" style="font-style: italic;" /> in a transaction that is committed at the end.
In the <code>dbchangelog.xml</code> file, add a new <code>department</code> create table <MadCap:variable name="General.changeset" style="font-style: italic;" /> as follows:</li>
        </ul><pre xml:space="preserve"><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt; 
&lt;databaseChangeLog
xmlns="http://www.liquibase.org/xml/ns/dbchangelog"  
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd"&gt;

&lt;changeSet id="1" author="bob"&gt; 
        &lt;createTable tableName="department"&gt;
            &lt;column name="id" type="int"&gt;
            &lt;constraints primaryKey="true" nullable="false"/&gt; 
            &lt;/column&gt; 
            &lt;column name="name" type="varchar(50)"&gt;
            &lt;constraints nullable="false"/&gt;  
            &lt;/column&gt;
            &lt;column name="active" type="boolean"
            defaultValueBoolean="true"/&gt; 
        &lt;/createTable&gt;
   &lt;/changeSet&gt;
&lt;/databaseChangeLog&gt;</code></pre>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">This <MadCap:variable name="General.changeset" style="font-style: italic;" /> is an XML format. The corresponding
SQL statement should look like the following:</p><pre><code class="language-sql">CREATE TABLE "department"
("id" number (*,0),
"name" VARCHAR2 (50 BYTE),
"active" NUMBER (1, 0) DEFAULT 1
 );</code></pre>
        <ul>
            <li>
              Open the command prompt and navigate to the <code>LiquibaseMySQL</code> directory.<br />Run the following command:
            </li>
        </ul><pre><code class="language-text">liquibase update</code></pre>
        <ul>
            <li>
               From a database UI Tool (for example, MySQL Workbench), check your database changes under <code>my_schema</code>.
You should see a new <code>department</code> table added to the database. For example:
            </li>
        </ul><pre><code class="language-text">SELECT * FROM my_schema.department;</code></pre>
        <table style="margin-left: auto;margin-right: auto;width: 100%;mc-table-style: url('../../Z_Resources/Stylesheets/TableStyles.css');" class="TableStyle-TableStyles" cellspacing="0">
            <col class="TableStyle-TableStyles-Column-Column1" />
            <col class="TableStyle-TableStyles-Column-Column1" />
            <col class="TableStyle-TableStyles-Column-Column1" />
            <thead>
                <tr class="TableStyle-TableStyles-Head-Header1">
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">ID</th>
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">NAME</th>
                    <th class="TableStyle-TableStyles-HeadD-Column1-Header1">ACTIVE</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-TableStyles-Body-Body1">
                    <td class="TableStyle-TableStyles-BodyB-Column1-Body1">NULL</td>
                    <td class="TableStyle-TableStyles-BodyB-Column1-Body1">NULL</td>
                    <td class="TableStyle-TableStyles-BodyA-Column1-Body1">NULL</td>
                </tr>
            </tbody>
        </table>
        <p>Also, you should see two more tables:</p>
        <ul>
            <li><strong><MadCap:variable name="General.databasechangelog" /></strong> tracking table – This table keeps a record of all the <MadCap:variable name="General.changeset" style="font-style: italic;" /><i>s</i> that were deployed. This way, next time when you deploy again, the <MadCap:variable name="General.changeset" style="font-style: italic;" /><i>s</i> in the <MadCap:variable name="General.changelog" style="font-style: italic;" /> will be compared with the <MadCap:variable name="General.databasechangelog" /> tracking table and only the new <MadCap:variable name="General.changeset" style="font-style: italic;" /><i>s</i> that were not found in the <MadCap:variable name="General.databasechangelog" /> will be deployed. You will notice that a new row was created in that table with the <MadCap:variable name="General.changeset" style="font-style: italic;" /> information we have just deployed.
For this example:</li>
        </ul>
        <table style="margin-left: auto;margin-right: auto;width: 100%;mc-table-style: url('../../Z_Resources/Stylesheets/TableStyles.css');" class="TableStyle-TableStyles" cellspacing="0">
            <col class="TableStyle-TableStyles-Column-Column1" />
            <col class="TableStyle-TableStyles-Column-Column1" />
            <col class="TableStyle-TableStyles-Column-Column1" />
            <col class="TableStyle-TableStyles-Column-Column1" />
            <col class="TableStyle-TableStyles-Column-Column1" />
            <col class="TableStyle-TableStyles-Column-Column1" />
            <col class="TableStyle-TableStyles-Column-Column1" />
            <col class="TableStyle-TableStyles-Column-Column1" />
            <thead>
                <tr class="TableStyle-TableStyles-Head-Header1">
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">ID</th>
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">AUTHOR</th>
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">FILENAME</th>
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">DATEEXECUTED</th>
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">ORDEREXECUTED</th>
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">EXECTYPE</th>
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">MDSUM</th>
                    <th class="TableStyle-TableStyles-HeadD-Column1-Header1">…</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-TableStyles-Body-Body1">
                    <td class="TableStyle-TableStyles-BodyB-Column1-Body1">1</td>
                    <td class="TableStyle-TableStyles-BodyB-Column1-Body1">bob</td>
                    <td class="TableStyle-TableStyles-BodyB-Column1-Body1">dbchangelog.xml</td>
                    <td class="TableStyle-TableStyles-BodyB-Column1-Body1"><code class="highlighter-rouge">date&amp;time</code>
                    </td>
                    <td class="TableStyle-TableStyles-BodyB-Column1-Body1">1</td>
                    <td class="TableStyle-TableStyles-BodyB-Column1-Body1">EXECUTED</td>
                    <td class="TableStyle-TableStyles-BodyB-Column1-Body1"><code class="highlighter-rouge">checksumvalue</code>
                    </td>
                    <td class="TableStyle-TableStyles-BodyA-Column1-Body1">…</td>
                </tr>
            </tbody>
        </table>
        <ul>
            <li><strong><MadCap:variable name="General.databasechangeloglock" /></strong> – This table is used internally by <MadCap:variable name="General.Liquibase" /> to manage access to the <MadCap:variable name="General.changelog" style="font-style: italic;" /> table during deployment.</li>
        </ul>
    </body>
</html>