<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" >
    <head>
    </head>
    <body>
        <h1 id="oracle-tutorial">Oracle Tutorial</h1>
        <h4 id="to-test-your-connection-try-running-liquibase-with-the-jdbc-driver-located-in-the-same-directory-as-liquibase">To test your connection, try running liquibase with the JDBC driver located in the same directory as liquibase:</h4>
        <figure class="highlight"><pre xml:space="preserve"><code class="language-sh" data-lang="sh">liquibase
<span class="nt">--driver</span><span class="o">=</span>oracle.jdbc.OracleDriver
<span class="nt">--classpath</span><span class="o">=</span>ojdbc14.jar
<span class="nt">--url</span><span class="o">=</span><span class="s2">"jdbc:oracle:thin:@&lt;IP OR HOSTNAME&gt;:&lt;PORT&gt;:&lt;SERVICE NAME OR SID&gt;"</span>  
<span class="nt">--changeLogFile</span><span class="o">=</span>db.changelog-1.0.xml
<span class="nt">--username</span><span class="o">=</span>&lt;USERNAME&gt;
<span class="nt">--password</span><span class="o">=</span>&lt;PASSWORD&gt;generateChangeLog</code></pre>
        </figure>
        <h2 id="creating-new-liquibase-projects-with-oracle--windows"><strong>Creating New Liquibase Projects with Oracle – Windows</strong>
        </h2>
        <p>The purpose of this document is to guide you through the process of creating a new Liquibase project with <strong>Oracle</strong> on a <strong>Windows</strong> machine. In this tutorial, you will generate an example project and follow the instructions to apply and learn concepts associated with creating new Liquibase Projects with Oracle.</p>
        <h3 id="prerequisites">Prerequisites</h3>
        <ul>
            <li>If you have not installed the latest version of Liquibase, navigate to <a href="https://download.liquibase.org/download">https://download.liquibase.org/download</a> to install the software application.</li>
            <li>Ensure the liquibase.bat file’s path is set to a location in the PATH System variable.</li>
            <li>Navigate to <a href="https://www.oracle.com/database/technologies/appdev/jdbc-downloads.html">https://www.oracle.com/database/technologies/appdev/jdbc-downloads.html</a> and download the ojdbc jar driver file.<br /></li>
        </ul>
        <blockquote>
            <p><strong>Note:</strong> Place the ojdbc jar driver file in a known directory so you can locate it easily.</p>
        </blockquote>
        <blockquote>
            <p><strong>Example:</strong> C:\Users\Liquibase_Drivers\ojdbc7.jar</p>
        </blockquote>
        <h2 id="tutorial">Tutorial</h2>
        <h4 id="to-create-a-liquibase-project-with-oracle-on-your-windows-machine-begin-with-the-following-steps">To create a Liquibase project with Oracle on your Windows machine, begin with the following steps:</h4>
        <ul>
            <li>Create a new project folder and name it <strong>LiquibaseProj</strong>.</li>
            <li>In your LiquibaseProj folder, Right-click then select New&gt;Text Document to create an empty text file.<br /></li>
            <li>Rename the text file to <strong>dbchangelog.xml</strong>.
Changelog files contain a sequence of changesets, each of which make small changes to the structure of your database. Instead of creating an empty changelog file in step 2, you can also use an existing database to generate a changelog. In this tutorial, you will manually add a single change. To add this change:</li>
            <li>Open the dbchangelog.xml file and update the changelog file with the following code snippet:</li>
        </ul>
        <figure class="highlight"><pre xml:space="preserve"><code class="language-sh" data-lang="sh">  &lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span>  <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;	&lt;databaseChangeLog
	  <span class="nv">xmlns</span><span class="o">=</span><span class="s2">"http://www.liquibase.org/xml/ns/dbchangelog"</span>
	  xmlns:xsi<span class="o">=</span><span class="s2">"http://www.w3.org/2001/XMLSchema-instance"</span>
	  xsi:schemaLocation<span class="o">=</span><span class="s2">"http://www.liquibase.org/xml/ns/dbchangelog
	  http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd"</span><span class="o">&gt;</span>
	&lt;/databaseChangeLog&gt;</code></pre>
        </figure>
        <ul>
            <li>In your LiquibaseProj folder Right-click and select New&gt;Text Document to create a new text file.</li>
            <li>Rename the text file to <strong>liquibase.properties</strong>.</li>
            <li>Edit the liquibase.properties file to add the following properties:</li>
        </ul>
        <figure class="highlight"><pre xml:space="preserve"><code class="language-sh" data-lang="sh">    changeLogFile: C:<span class="se">\\</span>Users<span class="se">\\</span>Administrator<span class="se">\\</span>LiquibaseProj<span class="se">\\</span>dbchangelog.xml
    url: jdbc:oracle:thin:@localhost:1521:ORCL
    username: MYSCHEMA
    password: password
    driver: oracle.jdbc.OracleDriver
    classpath: ../../Liquibase_Drivers/ojdbc7.jar</code></pre>
        </figure>
        <p>Because you are creating this project on Windows OS, you must specify the path with double slashes in the changeLogFile property. You must also use a relative path from your project directory to the driver ojdbc jar file location in the classpath property.</p>
        <blockquote>
            <p>Note: If you already have a Liquibase Pro key and want to apply it to
your project, add the following property to your liquibase.properties
file. 	 
liquibaseProLicenseKey: <code class="highlighter-rouge">&lt;paste license key&gt;</code></p>
        </blockquote>
        <ul>
            <li>Adding a changeset to the changelog – Change Sets are uniquely identified by “author” and ”id” attributes. Liquibase attempts to execute each changeset in a transaction that is committed at the end.
In the dbchangelog.xml file line 9 to 20 add a new “department” create table change set as follows:</li>
        </ul>
        <figure class="highlight"><pre xml:space="preserve"><code class="language-sh" data-lang="sh">&lt;?xml <span class="nv">version</span><span class="o">=</span><span class="s2">"1.0"</span>  <span class="nv">encoding</span><span class="o">=</span><span class="s2">"UTF-8"</span>?&gt;&lt;databaseChangeLog
  <span class="nv">xmlns</span><span class="o">=</span><span class="s2">"http://www.liquibase.org/xml/ns/dbchangelog"</span>
  xmlns:xsi<span class="o">=</span><span class="s2">"http://www.w3.org/2001/XMLSchema-instance"</span>
  xsi:schemaLocation<span class="o">=</span><span class="s2">"http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd"</span><span class="o">&gt;</span>

    &lt;changeSet <span class="nb">id</span><span class="o">=</span><span class="s2">"1"</span>  <span class="nv">author</span><span class="o">=</span><span class="s2">"bob"</span><span class="o">&gt;</span>
        &lt;createTable <span class="nv">tableName</span><span class="o">=</span><span class="s2">"department"</span><span class="o">&gt;</span>
            &lt;column <span class="nv">name</span><span class="o">=</span><span class="s2">"id"</span>  <span class="nb">type</span><span class="o">=</span><span class="s2">"int"</span><span class="o">&gt;</span>
                &lt;constraints <span class="nv">primaryKey</span><span class="o">=</span><span class="s2">"true"</span>  <span class="nv">nullable</span><span class="o">=</span><span class="s2">"false"</span>/&gt;            &lt;/column&gt;            &lt;column <span class="nv">name</span><span class="o">=</span><span class="s2">"name"</span>  <span class="nb">type</span><span class="o">=</span><span class="s2">"varchar(50)"</span><span class="o">&gt;</span>
                &lt;constraints <span class="nv">nullable</span><span class="o">=</span><span class="s2">"false"</span>/&gt;            &lt;/column&gt;		&lt;column <span class="nv">name</span><span class="o">=</span><span class="s2">"active"</span>  <span class="nb">type</span><span class="o">=</span><span class="s2">"boolean"</span>                       
			<span class="nv">defaultValueBoolean</span><span class="o">=</span><span class="s2">"true"</span>/&gt;        &lt;/createTable&gt;   &lt;/changeSet&gt;&lt;/databaseChangeLog&gt;</code></pre>
        </figure>
        <blockquote>
            <p>Note: This create table change set is XML format. The corresponding
SQL statement should look like the following:</p>
        </blockquote>
        <figure class="highlight"><pre xml:space="preserve"><code class="language-sh" data-lang="sh">CREATE TABLE <span class="s2">"department"</span>  
<span class="o">(</span>  	<span class="s2">"id"</span> number<span class="o">(</span><span class="k">*</span>,0<span class="o">)</span>,
	<span class="s2">"name"</span> VARCHAR2<span class="o">(</span>50 BYTE<span class="o">)</span>,
	<span class="s2">"active"</span> NUMBER<span class="o">(</span>1,0<span class="o">)</span> DEFAULT 1
<span class="o">)</span><span class="p">;</span></code></pre>
        </figure>
        <ul>
            <li>
                <p>Open the command prompt. Navigate to the LiquibaseProj directory.<br />Run the following command:</p>
                <h3 id="liquibase-update">“liquibase update”</h3>
            </li>
            <li>
                <p>From SQL Developer Tool, check your database changes under “<strong>MYSCHEMA</strong>”.
You should see a new “<strong>department</strong>” table added to the database. For example:</p>
            </li>
        </ul>
        <div class="highlighter-rouge">
            <div class="highlight"><pre class="highlight" xml:space="preserve"><code>SELECT * FROM my_schema.department;
</code></pre>
            </div>
        </div>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>NAME</th>
                    <th>ACTIVE</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>NULL</td>
                    <td>NULL</td>
                    <td>NULL</td>
                </tr>
            </tbody>
        </table>
        <p>Also, you should see two more tables:</p>
        <ul>
            <li><strong>DATABASECHANGELOG</strong> tracking table – This table keeps a record of all the changesets that were deployed. This way, next time when you deploy again, the changesets in the changelog will be compared with the DATABASECHANGELOG tracking table and only the new changesets that were not found in the DATABASECHANGELOG will be deployed. You will notice that a new row was created in that table with the changeset information we have just deployed.
For this example:</li>
        </ul>
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>AUTHOR</th>
                    <th>FILENAME</th>
                    <th>DATEEXECUTED</th>
                    <th>ORDEREXECUTED</th>
                    <th>EXECTYPE</th>
                    <th>MDSUM</th>
                    <th>…</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>bob</td>
                    <td>dbchangelog.xml</td>
                    <td><code class="highlighter-rouge">date&amp;time</code>
                    </td>
                    <td>1</td>
                    <td>EXECUTED</td>
                    <td><code class="highlighter-rouge">checksumvalue</code>
                    </td>
                    <td>…</td>
                </tr>
            </tbody>
        </table>
        <ul>
            <li><strong>DATABASECHANGELOGLOCK</strong> – This table is used internally by Liquibase to manage access to the changelog table during deployment.</li>
        </ul>
    </body>
</html>