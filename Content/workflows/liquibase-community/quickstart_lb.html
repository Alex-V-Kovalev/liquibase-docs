<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <link href="../../Z_Resources/Stylesheets/TableStyles.css" rel="stylesheet" MadCap:stylesheetType="table" />
    </head>
    <body>
        <h1 id="your-first-migration-with-liquibase-change-types">Your First Migration with Liquibase Change Types</h1>
        <div align="center"><iframe width="560" height="315" src="https://www.youtube.com/embed/lbZxAvftCX0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
        </div>
        <h2 id="prerequisites">Prerequisites</h2>
        <p>Before performing any of these steps, you must be able to connect to a local or remote database, accessible via command line or IDE/GUI.</p>
        <p><strong>For this example, we are going to use an H2 database. Please review this <a href="/documentation/tutorials/h2.html">H2 Tutorial</a> to get started.</strong>
        </p>
        <p>View the <a href="/databases.html">Supported Databases</a> topic for more information on which databases we support.
You can also view the <a href="/documentation/tutorials/index.html">Database Tutorials</a> topic for more information on running each database with Liquibase.</p>
        <h2 id="step-1-create-or-generate-a-changelog-file">Step 1: Create or Generate a <em>changelog</em> File</h2>
        <p>To complete your first migration, you must have a <a href="/documentation/databasechangelog.html">database changelog file</a>. The <em>changelog</em> file is where all your database changes are defined. Using Liquibase Change Types allows you to define these changes with XML, JSON, or YAML. For this walkthrough, we will use XML examples.</p>
        <p><strong><u>Creating changelog Files Manually</u></strong>
        </p>
        <ol>
            <li>Create a file in your liquibase project directory called <code class="highlighter-rouge">myChangeLog.xml</code></li>
            <li>For this example, enter the following information into the <code class="highlighter-rouge">myChangeLog.xml</code> file, then save your file:</li>
        </ol>
        <figure class="highlight"><pre xml:space="preserve"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  

<span class="nt">&lt;databaseChangeLog</span>  
  <span class="na">xmlns=</span><span class="s">"http://www.liquibase.org/xml/ns/dbchangelog"</span>  
  <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>  
  <span class="na">xmlns:pro=</span><span class="s">"http://www.liquibase.org/xml/ns/pro"</span>  
  <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd
         http://www.liquibase.org/xml/ns/pro http://www.liquibase.org/xml/ns/pro/liquibase-pro-3.8.xsd"</span><span class="nt">&gt;</span>  

<span class="nt">&lt;/databaseChangeLog&gt;</span></code></pre>
        </figure>
        <p>
            <br />
        </p>
        <p><strong><u>Generating Changelog Files</u></strong>
        </p>
        <p>If you have an existing database, you can generate a <em>changelog</em> file that reflects the current state of your database. For more information on how to
generate a <em>changelog</em>, visit the <a href="/documentation/generating_changelogs.html">Liquibase Commands: generateChangelog</a> topic, and read the article on
<a href="/documentation/existing_project.html">adding Liquibase on an existing project.</a></p>
        <h2 id="step-2-add-a-changeset">Step 2: Add a <em>changeSet</em></h2>
        <p><em>changeSets</em> are (units of change) that Liquibase can execute on a database. When adding a <em>changeSet</em>, your change must be defined by both an <code class="highlighter-rouge">id</code> attribute and an <code class="highlighter-rouge">author</code> attribute. Using only an <code class="highlighter-rouge">id</code> attribute can cause accidental duplications when dealing with multiple developers and code branches. It is best practice to only include one change in each <em>changeset</em>.</p>
        <p>View the <a href="/documentation/changeset.html">changeSet tag</a> topic for more information.</p>
        <p><strong><u>To add a changeSet:</u></strong>
        </p>
        <ol>
            <li>Locate and open the <code class="highlighter-rouge">myChangeLog.xml</code> file.</li>
            <li>For this example, enter the following information into the <code class="highlighter-rouge">myChangeLog.xml</code> file, then save your file:</li>
        </ol>
        <figure class="highlight"><pre xml:space="preserve"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  

<span class="nt">&lt;databaseChangeLog</span>  
  <span class="na">xmlns=</span><span class="s">"http://www.liquibase.org/xml/ns/dbchangelog"</span>  
  <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>  
  <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd"</span><span class="nt">&gt;</span>  

    <span class="nt">&lt;changeSet</span>  <span class="na">id=</span><span class="s">"1"</span>  <span class="na">author=</span><span class="s">"bob"</span><span class="nt">&gt;</span>  
        <span class="nt">&lt;createTable</span>  <span class="na">tableName=</span><span class="s">"department"</span><span class="nt">&gt;</span>  
            <span class="nt">&lt;column</span>  <span class="na">name=</span><span class="s">"id"</span>  <span class="na">type=</span><span class="s">"int"</span><span class="nt">&gt;</span>  
                <span class="nt">&lt;constraints</span>  <span class="na">primaryKey=</span><span class="s">"true"</span>  <span class="na">nullable=</span><span class="s">"false"</span><span class="nt">/&gt;</span>  
            <span class="nt">&lt;/column&gt;</span>  
            <span class="nt">&lt;column</span>  <span class="na">name=</span><span class="s">"name"</span>  <span class="na">type=</span><span class="s">"varchar(50)"</span><span class="nt">&gt;</span>  
                <span class="nt">&lt;constraints</span>  <span class="na">nullable=</span><span class="s">"false"</span><span class="nt">/&gt;</span>  
            <span class="nt">&lt;/column&gt;</span>  
            <span class="nt">&lt;column</span>  <span class="na">name=</span><span class="s">"active"</span>  <span class="na">type=</span><span class="s">"boolean"</span>  <span class="na">defaultValueBoolean=</span><span class="s">"true"</span><span class="nt">/&gt;</span>  
        <span class="nt">&lt;/createTable&gt;</span>  
    <span class="nt">&lt;/changeSet&gt;</span>  

<span class="nt">&lt;/databaseChangeLog&gt;</span></code></pre>
        </figure>
        <h2 id="step-3-run-the-changeset">Step 3: Run the <em>changeSet</em></h2>
        <p>When you add a <em>changeSet</em>, Liquibase reads your list of <em>changeSets</em> in order, then checks the <code class="highlighter-rouge">DATABASECHANGELOG</code> table for anything that was previously run.</p>
        <p><strong><u>To run the *changeSet*:</u></strong>
        </p>
        <ol>
            <li>Open your terminal.</li>
            <li>Run one of the following commands:
    <ul><li><strong>Linux/Unix/Mac:</strong>  <code class="highlighter-rouge">LB_HOME/liquibase update</code></li><li><strong>Windows:</strong>  <code class="highlighter-rouge">LB_HOME\liquibase.bat update</code></li></ul></li>
        </ol>
        <blockquote>
            <p><strong>Note:</strong> In place of <code class="highlighter-rouge">LB_HOME</code> use the folder name where you extracted liquibase.</p>
        </blockquote>
        <p>Your database now contains a table called <strong>department</strong>.</p>
        <h2 id="step-4-check-your-database">Step 4: Check Your Database</h2>
        <p>To check your database:</p>
        <ol>
            <li>Open your terminal.</li>
            <li>Navigate to the folder where you placed your driver jar.</li>
            <li>Run: <code class="highlighter-rouge">java -jar (driver-version.jar)</code></li>
        </ol>
        <blockquote>
            <p><strong>Note:</strong> Where (driver-version.jar) is listed, enter your driver name and version number. Example: <br /> <code class="highlighter-rouge">java -jar h2-1.4.199.jar</code>.</p>
        </blockquote>
        <p>If you used a <code class="highlighter-rouge">liquibase.properties</code> file, enter the JDBC URL, User Name, and Password. Notice that two tables were created:</p>
        <ul>
            <li><code class="highlighter-rouge">DATABASECHANGELOG</code>
            </li>
            <li><code class="highlighter-rouge">DATABASECHANGELOGLOCK</code>
            </li>
        </ul>
        <p>The <code class="highlighter-rouge">DATABASECHANGELOG</code> table contains a list of all the changes that
have been run against the database. The <code class="highlighter-rouge">DATABASECHANGELOGLOCK</code> table is used to make sure two machines don’t attempt to modify the database at the same time.</p>
        <p>View <a href="/documentation/databasechangelog_table.html">DATABASECHANGELOG Table</a> and <a href="/documentation/databasechangeloglock_table.html">DATABASECHANGELOGLOCK Table</a> topics for more information.</p>
        <p>You can also learn how to create your <a href="/get_started/quickstart_sql.html">First Migrations with SQL</a>.</p>
        <h3 id="summary">Summary</h3>
        <p>In this tutorial we covered:</p>
        <ul>
            <li>Creating/Generating <em>changelogs</em></li>
            <li>Adding <em>changeSets</em> to your <em>changelog</em></li>
            <li>Running your <em>changelog</em></li>
            <li>Checking your Database</li>
        </ul>
        <h2 id="next-up"><strong>Next Up:</strong>
        </h2>
        <div class="cta-container" style="margin-left: auto;margin-right: auto;width: 300px;height: 50px;">
            <div class="cta cta--block"><a href="/documentation/index.html">Liquibase Documentation ►</a>
            </div>
            <br />
            <div class="cta cta--block"><a href="/quickstart.html">Return to Getting Started ►</a>
            </div>
        </div>
    </body>
</html>