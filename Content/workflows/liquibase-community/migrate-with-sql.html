<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <title>Migrating with SQL | Liquibase Docs</title>
        <meta name="description" content="This page explains how to use SQL to migrate your database." />
    </head>
    <body>
        <h1 id="your-first-migration-with-sql">Migrating with SQL</h1>
        <div align="center">
            <iframe width="560" height="315" src="https://www.youtube.com/embed/HdXcf9E8ZVI" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="">
            </iframe>
        </div>
        <h2 id="prerequisites">Prerequisites</h2>
        <p>Before performing any of these steps, you must be able to connect to a local or remote database, accessible via command line or IDE/GUI. View the <a href="https://www.liquibase.org/get-started/databases">Supported Databases</a> topic for more information on which databases we support or information on running each database with <MadCap:variable name="General.Liquibase" />.</p>
        <h2 id="step-1-create-a-formatted-sql-changelog">Step 1: Create a formatted SQL <MadCap:variable name="General.changelog" style="font-style: italic;" /></h2>
        <p>To complete your first migration, you must create a formatted SQL <MadCap:variable name="General.changelog" style="font-style: italic;" /> in your <MadCap:variable name="General.Liquibase" /> project directory so <MadCap:variable name="General.Liquibase" /> can track, version, and deploy changes to your database.</p>
        <p>
            <strong>
                <u>To Create your <MadCap:variable name="General.changelog" style="font-style: italic;" /></u>
            </strong>
        </p>
        <ol>
            <li>Create a file in your <MadCap:variable name="General.Liquibase" /> project directory called <code class="highlighter-rouge">changelog.sql</code>.</li>
            <li>For this example, enter the following information into the <code class="highlighter-rouge">changelog.sql</code> file.</li>
        </ol>
        <figure class="highlight">
            <pre xml:space="preserve">
                <code class="language-sql" data-lang="sql">
                    <span class="c1">--liquibase formatted sql</span>
                </code>
            </pre>
        </figure>
        <h2 id="step-2-add-a-changeset">Step 2: Add a <em><MadCap:variable name="General.changeset" /></em></h2>
        <p>
            <em>changeSets</em> are units of change that <MadCap:variable name="General.Liquibase" />can execute on a database. When adding a <em><MadCap:variable name="General.changeset" /></em>, your change must be defined by both an <code class="highlighter-rouge">id</code> attribute and an <code class="highlighter-rouge">author</code> attibute. It is best practice to only include one change in each <MadCap:variable name="General.changeset" style="font-style: italic;" />.</p>
        <p>
            <strong>
                <u>To Add your <MadCap:variable name="General.changeset" /></u>
            </strong>
        </p>
        <ol>
            <li>Locate and open the <code class="highlighter-rouge">changelog.sql</code> file.</li>
            <li>For this example, enter the following information into the <code class="highlighter-rouge">changelog.sql</code> file, then save it.</li>
        </ol>
        <p>See the <MadCap:xref href="../../concepts/basic/sql-format.html">[%=General.changelog%]s in SQL Format</MadCap:xref> topic for more information about SQL Syntax.</p>
        <figure class="highlight">
            <pre xml:space="preserve">
                <code class="language-sql" data-lang="sql">
                    <span class="c1">--liquibase formatted sql</span>  

<span class="c1">--changeset bob:1</span>  
<span class="k">create</span>  <span class="k">table</span>  <span class="n">test1</span>  <span class="p">(</span>  
<span class="n">id</span>  <span class="n">int</span>  <span class="k">primary</span>  <span class="k">key</span><span class="p">,</span>  
<span class="n">name</span>  <span class="n">varchar</span><span class="p">(</span><span class="mi">255</span><span class="p">)</span>  
<span class="p">);</span></code>
            </pre>
        </figure>
        <h2 id="step-3-deploy-your-changelog">Step 3: Deploy your <MadCap:variable name="General.changelog" style="font-style: italic;" /></h2>
        <p>To deploy the <MadCap:variable name="General.changelog" style="font-style: italic;" /> and your new <MadCap:variable name="General.changeset" style="font-style: italic;" />, you run the <code class="highlighter-rouge">update</code> command. When running this command, <MadCap:variable name="General.Liquibase" /> reads your list of <em><MadCap:variable name="General.changeset" />s</em> in order and checks the <MadCap:variable name="General.databasechangelog" /> table for anything that was previously run. Any <em><MadCap:variable name="General.changeset" />s</em> that have <em>not</em> already been applied to the database will get applied, and <MadCap:variable name="General.Liquibase" /> will track that information.</p>
        <p>
            <strong>
                <u>To Apply the <MadCap:variable name="General.changeset" /></u>
            </strong>
        </p>
        <ol>
            <li>Open your command prompt or terminal.</li>
            <li>Run the following command: <code class="highlighter-rouge">liquibase --changeLogFile=changelog.sql update</code></li>
        </ol>
        <p>Your database now contains a table called <strong>test1</strong>.</p>
        <h2 id="step-4-check-your-database">Step 4: Check your database</h2>
        <p>To check your database, open your database IDE to find the change that you made.</p>
        <p>Notice that two tables were created along with test1:</p>
        <ul>
            <li>
                <MadCap:variable name="General.databasechangelog" />
            </li>
            <li>
                <MadCap:variable name="General.databasechangeloglock" />
            </li>
        </ul>
        <p>The <MadCap:variable name="General.databasechangelog" /> table contains a list of all the changes that 
have been run against the database. The <MadCap:variable name="General.databasechangeloglock" /> table is used to make sure two machines don't attempt to modify the database at the same time.</p>
        <p>View <MadCap:xref href="../../concepts/basic/databasechangelog-table.html">[%=General.databasechangelog%] table</MadCap:xref> and <MadCap:xref href="../../concepts/basic/databasechangeloglock-table.html">[%=General.databasechangeloglock%] table</MadCap:xref> topics for more information.</p>
        <h3 id="additional-information">Additional information</h3>
        <p>This topic is great when you only have a handful of SQL scripts. However, if your list of scripts becomes too large to maintain in a formatted SQL <MadCap:variable name="General.changelog" style="font-style: italic;" />, you may want to break up your scripts into smaller more manageable chunks.</p>
        <p>See the <MadCap:xref href="multiple-sql-migration.html">Database migrations with multiple SQL files</MadCap:xref> topic for more information on how to Migrate with Multiple SQL files.</p>
        <p>You can also learn how to create your <MadCap:xref href="migrate-with-changetypes.html">Migrating with [%=General.Liquibase%] [%=General.changetypes%]s</MadCap:xref></p>
        <h3 id="summary">Summary</h3>
        <p>In this tutorial we covered:</p>
        <ul>
            <li>Creating Formatted SQL <MadCap:variable name="General.changelog" style="font-style: italic;" /><i>s</i></li>
            <li>Adding <em><MadCap:variable name="General.changeset" />s</em> to your <MadCap:variable name="General.changelog" style="font-style: italic;" /></li>
            <li>Running your <MadCap:variable name="General.changelog" style="font-style: italic;" /></li>
            <li>Checking your Database</li>
        </ul>
    </body>
</html>