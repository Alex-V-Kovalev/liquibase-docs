<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <meta rel="canonical" href="https://docs.liquibase.com/start/install/tutorials/cassandra-astra.html" />
        <meta name="description" content="This page guides you through the process of creating a new Liquibase project with Cassandra on DataStax Astra." />
    </head>
    <body>
        <h1>Using <MadCap:variable name="General.Liquibase" /> with Cassandra on DataStax Astra</h1>
        <p><a href="https://www.datastax.com/products/datastax-astra">DataStax Astra</a> is a multi-cloud DBaaS built on Apache Cassandra. Astra simplifies cloud-native Cassandra application development and reduces deployment time from weeks to minutes. For more information, see <a href="https://docs.datastax.com/en/astra/docs/index.html">DataStax AstraDB Documentation</a>.</p>
        <h2>Supported versions</h2>
        <ul>
            <li>4.X</li>
            <li>3.11.X</li>
        </ul>
        <h2>Verification level</h2>
        <MadCap:snippetBlock src="../../../Z_Resources/Snippets/def/database-verification-level-compatible.flsnp" />
        <MadCap:snippetBlock src="../../../Z_Resources/Snippets/def/database-verification-levels.flsnp" />
        <h2>Prerequisites</h2>
        <MadCap:snippetBlock src="../../../Z_Resources/Snippets/text/database-prerequisites.flsnp" />
        <h2>Install drivers</h2>
        <p>To use <MadCap:variable name="General.Liquibase" /> and Cassandra on DataStax Astra, you need two JAR files: a JDBC driver and the <MadCap:variable name="General.Liquibase" /> Cassandra extension:</p>
        <MadCap:snippetBlock src="../../../Z_Resources/Snippets/text/database-cassandra-drivers.flsnp" />
        <MadCap:snippetBlock src="../../../Z_Resources/Snippets/text/database-driver.flsnp" MadCap:conditionTagExpression="include[database-driver.driver-manually-installed or database-driver.maven-jar-private]" />
        <MadCap:snippetBlock src="../../../Z_Resources/Snippets/code/database-cassandra-maven.flsnp" />
        <h2>Test your connection</h2>
        <ol>
            <li>Ensure your Cassandra on DataStax Astra database is configured:
				<ol><li>Log into your <a href="https://astra.datastax.com/">DataStax Astra account</a>. From <b>Dashboard</b>, select the needed database, and then go to the <b>Connect</b> tab. Under <b>Connect using an API</b>, select <b>Java</b> and download the <b>Connect Bundle</b> by following the link in step 1 under <b>Prerequisites</b>.</li><li>Once the <code>secure-connect-&lt;dbname&gt;.zip</code> file is fully downloaded, place it  in a secure place in your file system.</li><li>Unzip the <code>secure-connect-&lt;dbname&gt;.zip</code> file. Open the <code>config.json</code> file in a text editor. We will use the information from the file in the next step.</li><li>Clone the <a href="https://github.com/datastax/cql-proxy">cql-proxy repository</a> to set up CQL-Proxy, which is a sidecar that enables unsupported CQL drivers to work with DataStax Astra.						<ol><li>You need your <b>Astra Token</b> and <b>Astra Database ID</b> to use CQL-Proxy.</li><li>Follow the steps in the repository to spin up CQL-Proxy using your command prompt. Once successfully running, you should see the following output:</li><code>{"level":"info","ts":1651012815.176512,"caller":"proxy/proxy.go:222","msg":"proxy is listening","address":"[::]:9042"}</code></ol></li></ol></li>
            <li>
                <p>
                    <MadCap:snippetText src="../../../Z_Resources/Snippets/text/database-properties-url.flsnp" />
                </p><pre xml:space="preserve"><code class="language-text">url: jdbc:cassandra://localhost:9042/test;DefaultKeyspace=test;TunableConsistency=6</code></pre>
                <p>Replace <code>test</code> with your own keyspace name.</p>
            </li>
            <MadCap:snippetBlock src="../../../Z_Resources/Snippets/note/database-pro-key.flsnp" />
        </ol>
        <MadCap:snippetBlock src="../../../Z_Resources/Snippets/text/database-changelog-test-connection.flsnp" />
        <MadCap:snippetBlock src="../../../Z_Resources/Snippets/text/database-cassandra-change-types-commands.flsnp" />
        <h2>Related links</h2>
        <ul>
            <li><a href="https://www.liquibase.com/blog/running-liquibase-apache-cassandra">Get Up and Running with <MadCap:variable name="General.Liquibase" /> and Apache Cassandra</a>
            </li>
            <li>
                <MadCap:xref href="../../../change-types/home.html">[%=General.changetypes%]s</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="../../../concepts/home.htm">Concepts</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="../../../commands/home.htm">Liquibase Commands</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="../../../workflows/home.htm">Workflows</MadCap:xref>
            </li>
        </ul>
    </body>
</html>