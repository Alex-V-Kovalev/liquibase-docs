<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" xml:lang="en-us">
    <head><title>Liquibase Enterprise Documentation</title>
        <link href="../../../Resources/Stylesheets/Multi-Schema+Projects+-+Oracle+on+Amazon+RDS+Roles+and+Permissions.css" rel="stylesheet" />
    </head>
    <body>
        <h1>Multi-Schema Projects - Oracle on Amazon RDS Roles and Permissions <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /></h1>
        <ul class="ul_1">
            <li class="li_1">
                <p><a href="../../../../../../../Downloads/Multi-Schema+Projects+-+Oracle+on+Amazon+RDS+Roles+and+Permissions.doc#Multi-SchemaProjects-OracleonAmazonRDSR" class="Hyperlink">Multi-Schema Project Database Accounts, Roles and Permissions</a>
                </p>
            </li>
            <li class="li_1">
                <p class="p_1"><a href="../../../../../../../Downloads/Multi-Schema+Projects+-+Oracle+on+Amazon+RDS+Roles+and+Permissions.doc#Multi-SchemaProjects-OracleonAmazonRDSR" class="Hyperlink">DATICAL_ROLE for General Permissions on all Database Objects in all Managed Databases</a>
                </p>
            </li>
            <li class="li_1">
                <p class="p_1"><a href="../../../../../../../Downloads/Multi-Schema+Projects+-+Oracle+on+Amazon+RDS+Roles+and+Permissions.doc#Multi-SchemaProjects-OracleonAmazonRDSR" class="Hyperlink">DATICAL_TRACK_ROLE for Permissions on the Tracking Tables</a>
                </p>
            </li>
            <li class="li_1">
                <p class="p_1"><a href="../../../../../../../Downloads/Multi-Schema+Projects+-+Oracle+on+Amazon+RDS+Roles+and+Permissions.doc#Multi-SchemaProjects-OracleonAmazonRDSR" class="Hyperlink">DATICAL_DATAPUMP_DIR Creation</a>
                </p>
            </li>
            <li class="li_1">
                <p class="p_1"><a href="../../../../../../../Downloads/Multi-Schema+Projects+-+Oracle+on+Amazon+RDS+Roles+and+Permissions.doc#Multi-SchemaProjects-OracleonAmazonRDSR" class="Hyperlink">Granting Roles and Permissions</a>
                </p>
            </li>
            <li class="li_1">
                <p class="p_1"><a href="../../../../../../../Downloads/Multi-Schema+Projects+-+Oracle+on+Amazon+RDS+Roles+and+Permissions.doc#Multi-SchemaProjects-OracleonAmazonRDSR" class="Hyperlink">Granting Roles on Managed Schema to the SYSTEM User</a>
                </p>
            </li>
        </ul>
        <p>&#160;</p>
        <p>Multi-Schema Project Database Accounts, Roles and Permissions</p>
        <p>Two datical database accounts are required for multi-schema projects.  These accounts are referred to as DATICAL_USER and DATICAL_TRACKING.  At runtime, Datical will connect to the database as the DATICAL_USER to process and deploy code.  The DATICAL_TRACKING schema owns the DATABASECHANGELOG and DATABASECHANGELOGLOCK tables used to track and manage database changes.  The database change log tables are created in the default tablespace assigned to the DATICAL_TRACKING account.  The database account names must be the same across all databases in the pipeline.  The DATICAL_USER and DATICAL_TRACKING accounts should not be one of the managed schemas in the pipeline.</p>
        <p>Database permissions for Datical are managed through Roles.  Three Datical Roles are needed:</p>
        <p>DATICAL_ROLE - Required on all databases in the project.  Grants permissions to deploy objects to the managed schemas.</p>
        <p>DATICAL_PACKAGER_ROLE - Required only on the REF database in the project.  Grants additional permissions required to execute Datical packaging operations.</p>
        <p>DATICAL_TRACK_ROLE - Required on all databases in the project.  Grants permissions to manage the database change log.</p>
        <p>You must grant any user-defined roles that are granted to any managed schema to the SYSTEM user WITH ADMIN OPTION. Otherwise, Datical will not be able to successfully restore these roles during the packaging operation and packager will fail.</p>
        <p>DATICAL_ROLE for General Permissions on all Database Objects in all Managed Databases</p>
        <p>DATICAL_ROLE</p>
        <p>-- The following must be run as the RDS_MASTER_USER that was specified for the database.</p>
        <p>-- SQL &gt; connect &lt;RDS_MASTER_USER&gt;</p>
        <p>CREATE ROLE DATICAL_ROLE NOT IDENTIFIED;</p>
        <p>GRANT ALTER ANY INDEX TO DATICAL_ROLE;</p>
        <p>GRANT ALTER ANY MATERIALIZED VIEW TO DATICAL_ROLE;</p>
        <p>GRANT ALTER ANY PROCEDURE TO DATICAL_ROLE;</p>
        <p>GRANT ALTER ANY SEQUENCE TO DATICAL_ROLE;</p>
        <p>GRANT ALTER ANY TABLE TO DATICAL_ROLE;</p>
        <p>GRANT ALTER ANY TRIGGER TO DATICAL_ROLE;</p>
        <p>GRANT ALTER ANY TYPE TO DATICAL_ROLE;</p>
        <p>GRANT ALTER SESSION TO DATICAL_ROLE;</p>
        <p>GRANT GRANT ANY OBJECT PRIVILEGE TO DATICAL_ROLE;</p>
        <p>GRANT CREATE ANY INDEX TO DATICAL_ROLE;</p>
        <p>GRANT CREATE ANY MATERIALIZED VIEW TO DATICAL_ROLE;</p>
        <p>GRANT CREATE ANY PROCEDURE TO DATICAL_ROLE;</p>
        <p>GRANT CREATE ANY SEQUENCE TO DATICAL_ROLE;</p>
        <p>GRANT CREATE ANY SYNONYM TO DATICAL_ROLE;</p>
        <p>GRANT CREATE PUBLIC SYNONYM TO DATICAL_ROLE;</p>
        <p>GRANT CREATE ANY TABLE TO DATICAL_ROLE;</p>
        <p>GRANT CREATE ANY TRIGGER TO DATICAL_ROLE;</p>
        <p>GRANT CREATE ANY TYPE TO DATICAL_ROLE;</p>
        <p>GRANT CREATE ANY VIEW TO DATICAL_ROLE;</p>
        <p>GRANT CREATE SESSION TO DATICAL_ROLE;</p>
        <p>GRANT DELETE ANY TABLE TO DATICAL_ROLE WITH ADMIN OPTION;</p>
        <p>GRANT DROP ANY INDEX TO DATICAL_ROLE;</p>
        <p>GRANT DROP ANY MATERIALIZED VIEW TO DATICAL_ROLE;</p>
        <p>GRANT DROP ANY PROCEDURE TO DATICAL_ROLE;</p>
        <p>GRANT DROP ANY SEQUENCE TO DATICAL_ROLE;</p>
        <p>GRANT DROP ANY SYNONYM TO DATICAL_ROLE;</p>
        <p>GRANT DROP ANY TABLE TO DATICAL_ROLE;</p>
        <p>GRANT DROP ANY TRIGGER TO DATICAL_ROLE;</p>
        <p>GRANT DROP ANY TYPE TO DATICAL_ROLE;</p>
        <p>GRANT DROP ANY VIEW TO DATICAL_ROLE;</p>
        <p>GRANT INSERT ANY TABLE TO DATICAL_ROLE;</p>
        <p>GRANT SELECT_CATALOG_ROLE TO DATICAL_ROLE;</p>
        <p>GRANT UPDATE ANY TABLE TO DATICAL_ROLE ;</p>
        <p>GRANT COMMENT ANY TABLE TO DATICAL_ROLE;</p>
        <p>-- The following permission are needed for SNAPSHOT, COMPARE, FORECAST on all available schemas</p>
        <p>GRANT SELECT ANY TABLE TO DATICAL_ROLE;</p>
        <p>GRANT SELECT ANY SEQUENCE TO DATICAL_ROLE;</p>
        <p>GRANT EXECUTE ANY PROCEDURE TO DATICAL_ROLE;</p>
        <p>-- The following permissions are needed for auto generation of permissions</p>
        <p>GRANT SELECT ANY DICTIONARY TO DATICAL_ROLE;</p>
        <p>-- The following permissions are needed for working with EDITIONING VIEWS</p>
        <p>GRANT CREATE ANY EDITION TO DATICAL_ROLE;</p>
        <p>GRANT DROP ANY EDITION TO DATICAL_ROLE;</p>
        <p>-- The following permissions are needed if your company allows Public Synonyms</p>
        <p>GRANT CREATE PUBLIC SYNONYM TO DATICAL_ROLE;</p>
        <p>GRANT DROP PUBLIC SYNONYM TO DATICAL_ROLE;</p>
        <p>-- The following permissions are needed for management of database scoped triggers</p>
        <p>GRANT ADMINISTER DATABASE TRIGGER TO DATICAL_ROLE;</p>
        <p>-- The following permissions are needed to capture storage options for SNAPSHOT</p>
        <p>-- On Oracle RDS the RDSADMIN_UTIL package must be used for grants to objects owned by SYS.</p>
        <p>begin</p>
        <p>rdsadmin.rdsadmin_util.grant_sys_object(</p>
        <p>p_obj_name  =&gt; 'DBMS_METADATA',</p>
        <p>p_grantee   =&gt; 'DATICAL_ROLE',</p>
        <p>p_privilege =&gt; 'EXECUTE');</p>
        <p>end;</p>
        <p>/</p>
        <p>begin</p>
        <p>rdsadmin.rdsadmin_util.grant_sys_object(</p>
        <p>p_obj_name  =&gt; 'UTL_FILE',</p>
        <p>p_grantee   =&gt; 'DATICAL_ROLE',</p>
        <p>p_privilege =&gt; 'EXECUTE');</p>
        <p>end;</p>
        <p>/</p>
        <p>DATICAL_PACKAGER_ROLE for Additional Permissions on the REF Database</p>
        <p>This role grants additional permissions needed for Packaging</p>
        <p>DATICAL_PACKAGER_ROLE</p>
        <p>CREATE ROLE DATICAL_PACKAGER_ROLE NOT IDENTIFIED;</p>
        <p>-- The following permissions are needed for backing up and restoring the database.  This is only needed on the packaging / reference database.</p>
        <p>GRANT EXP_FULL_DATABASE TO DATICAL_PACKAGER_ROLE;</p>
        <p>GRANT IMP_FULL_DATABASE TO DATICAL_PACKAGER_ROLE;</p>
        <p>&#160;</p>
        <p>&#160;</p>
    </body>
</html>