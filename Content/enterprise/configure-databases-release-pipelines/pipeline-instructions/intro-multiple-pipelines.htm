<?xml version="1.0" encoding="utf-8"?>
<html>
    <head><title>Liquibase Enterprise Documentation</title><meta name="description" content="Liquibase Enterprise Documentation /></head>
    <body>
        <h1>Introduction to Multiple <MadCap:variable name="General.DaticalDB" /> Pipelines</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><MadCap:snippetBlock src="../../../Z_Resources/Snippets/enterprise/App Developer.flsnp" /><hr /><h2 id="IntroductiontoMultipleDaticalPipelines-WhataremultipleDaticalPipelinesinaproject?">What are multiple <MadCap:variable name="General.DaticalDB" /> Pipelines in a project?</h2><ul><li>Multiple pipelines allow you to deploy changes to different database environments</li><li>You will need a REF database for each pipeline</li></ul><p><MadCap:variable name="General.DaticalDB" /> allows you to create multiple pipelines in a single <MadCap:variable name="General.DaticalDB" /> project. This allows you to connect to different database steps. Your pipelines will allow you to create multiple deployment paths to deliver your changes to PROD database.</p><p style="text-align: center;"><strong>Multiple pipelines in a single <MadCap:variable name="General.DaticalDB" /> project</strong></p><div class="table-wrap"><table class="wrapped relative-table confluenceTable" style="margin-left: auto;margin-right: auto;width: 22.8248%;"><colgroup><col style="width: 27.4132%;" /><col style="width: 15.1648%;" /><col style="width: 15.1648%;" /><col style="width: 13.1234%;" /><col style="width: 12.8317%;" /><col style="width: 16.3313%;" /></colgroup><tbody><tr><th colspan="1" class="confluenceTh">Pipeline Name</th><td colspan="1" class="confluenceTd"><br /></td><td colspan="1" class="confluenceTd"><br /></td><td colspan="1" class="confluenceTd"><br /></td><td colspan="1" class="confluenceTd"><br /></td><td colspan="1" class="confluenceTd"><br /></td></tr><tr><th class="confluenceTh">Pipeline1</th><td class="confluenceTd">REF1</td><td class="confluenceTd">DEV1</td><td class="confluenceTd">QA1</td><td class="confluenceTd">UAT</td><td class="confluenceTd">PROD</td></tr><tr><th class="confluenceTh">Pipeline2</th><td class="confluenceTd">REF2</td><td class="confluenceTd">DEV2</td><td class="confluenceTd">QA2</td><td class="confluenceTd">UAT</td><td class="confluenceTd">PROD</td></tr></tbody></table></div><p style="text-align: center;"><br /></p><p>Notice that in pipeline1, you can deploy your database changes to REF1, DEV1 and QA1 database environments. In pipeline2, you can deploy your database changes to REF2, DEV2 and QA2. However, from both pipelines you can deploy code to UAT and PROD databases.&#160;</p><p>It is important to note that you will need a REF database for each pipeline. <a href="../../documentation/overview/REF Database.htm" rel="nofollow">Click here to read more about REF databases</a>.</p><hr /><h2 id="IntroductiontoMultipleDaticalPipelines-WhatarecommonusecasesforusingmultipleDaticalpipelines?">What are common use cases for using multiple <MadCap:variable name="General.DaticalDB" /> pipelines?</h2><ul><li>Developers working on concurrent releases</li><li>Development process requires changes to be merged from one pipeline to another in order for changes to be deployed to production</li><li>Hotfix pipeline</li></ul><p>There are several reasons for using multiple <MadCap:variable name="General.DaticalDB" /> pipelines. Let's visit a few common use cases:</p><h3 id="IntroductiontoMultipleDaticalPipelines-1.Developersworkingonconcurrentreleases">1.&#160;Developers working on concurrent releases</h3><p>Your team could be developing code for multiple releases.</p><p>A common example is that you have monthly scheduled releases and your project team have carved out features for each month. Developers then use dedicated SCM branches for each release. For example, you have a branch called "June2018" for all changes going into June 2018 release. And another branch called "July2018" for changes going into July 2018 release.&#160;</p><p>Once changes are deployed to production, you merge your release branches to your master branch.</p><p style="text-align: left;"><strong>Multiple pipelines in a single <MadCap:variable name="General.DaticalDB" /> project</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="margin-left: auto;margin-right: auto;width: 27.354%;"><colgroup><col style="width: 18.1951%;" /><col style="width: 21.3489%;" /><col style="width: 12.6152%;" /><col style="width: 12.6152%;" /><col style="width: 10.917%;" /><col style="width: 10.6744%;" /><col style="width: 13.5856%;" /></colgroup><tbody><tr><th colspan="1" class="confluenceTh">Pipeline Name</th><th colspan="1" class="confluenceTh">Branch Name</th><th colspan="1" class="confluenceTh"><br /></th><th colspan="1" class="confluenceTh"><br /></th><th colspan="1" class="confluenceTh"><br /></th><th colspan="1" class="confluenceTh"><br /></th><th colspan="1" class="confluenceTh"><br /></th></tr><tr><th class="confluenceTh"><p>Pipeline1</p></th><td colspan="1" class="confluenceTd">June2018</td><td class="confluenceTd">REF1</td><td class="confluenceTd">DEV1</td><td class="confluenceTd">QA1</td><td class="confluenceTd">UAT</td><td colspan="1" class="confluenceTd">PROD</td></tr><tr><th class="confluenceTh">Pipeline2</th><td colspan="1" class="confluenceTd">July2018</td><td class="confluenceTd">REF2</td><td class="confluenceTd">DEV2</td><td class="confluenceTd">QA2</td><td class="confluenceTd">UAT</td><td colspan="1" class="confluenceTd">PROD</td></tr></tbody></table></div><h3 id="IntroductiontoMultipleDaticalPipelines-2.Developmentprocessrequireschangestobemergedfromonebranchtoanotherinorderforchangestobedeployedtoproduction">2. Development process requires changes to be merged from one branch to another in order for changes to be deployed to production</h3><p>Your development team has adopted a process for working on dedicated branches. This allows you to develop features independently.</p><p>For example, your branches are called&#160;"line1" and "line2". The idea is that any code checked into "line1" branch is eligible for deployment to DEV1 and QA1 environments. Similarly, any code checked into "line2" branch is eligible to be deployed to DEV2 and QA2 environments. Hence, you can develop and test features independently&#160;on different environments.</p><p>Then, your project team or business decides which features to include in the release. For that, they choose which branch to merge to "release" branch. Any code merged into "release" would be eligible to deploy to PROD environment.</p><p style="text-align: center;"><strong>Multiple pipelines in a single <MadCap:variable name="General.DaticalDB" /> project</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 22.1692%;margin-left: auto;margin-right: auto;"><colgroup><col style="width: 28.5285%;" /><col style="width: 23.1231%;" /><col style="width: 15.6156%;" /><col style="width: 15.6156%;" /><col style="width: 16.8168%;" /></colgroup><tbody><tr><th class="confluenceTh">Pipeline Name</th><th class="confluenceTh">Branch Name</th><th class="confluenceTh"><br /></th><th class="confluenceTh"><br /></th><th class="confluenceTh"><br /></th></tr><tr><th class="confluenceTh">Pipeline1</th><td class="confluenceTd">line1</td><td class="confluenceTd">REF1</td><td class="confluenceTd">DEV1</td><td class="confluenceTd">QA1</td></tr><tr><th class="confluenceTh">Pipeline2</th><td class="confluenceTd">line2</td><td class="confluenceTd">REF2</td><td class="confluenceTd">DEV2</td><td class="confluenceTd">QA2</td></tr><tr><th colspan="1" class="confluenceTh">Pipeline3</th><td colspan="1" class="confluenceTd">release</td><td colspan="1" class="confluenceTd">REF3</td><td colspan="1" class="confluenceTd">UAT</td><td colspan="1" class="confluenceTd">PROD</td></tr></tbody></table></div><p><br /></p><p>As a result of this approach, <MadCap:variable name="General.DaticalDB" /> is automatically able to detect changes packaged in "line1" branch that merged with "release" branch.&#160;</p><h3 id="IntroductiontoMultipleDaticalPipelines-3.Hotfix">3. Hotfix</h3><p>Often, there is a need to patch changes made to production. In addition to requiring a shorter pipeline to PROD, you also need a separate SCM branch to maintain all hotfix changes.</p><p style="text-align: center;"><strong>Multiple pipelines in a single <MadCap:variable name="General.DaticalDB" /> project</strong></p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 23.0036%;margin-left: auto;margin-right: auto;"><colgroup><col style="width: 30.303%;" /><col style="width: 23.088%;" /><col style="width: 15.0072%;" /><col style="width: 15.0072%;" /><col style="width: 16.1616%;" /><col /><col /></colgroup><tbody><tr><th class="confluenceTh">Pipeline Name</th><th class="confluenceTh">Branch Name</th><th class="confluenceTh"><br /></th><th class="confluenceTh"><br /></th><th class="confluenceTh"><br /></th><th colspan="1" class="confluenceTh"><br /></th><th colspan="1" class="confluenceTh"><br /></th></tr><tr><th class="confluenceTh">Pipeline1</th><td class="confluenceTd">release</td><td class="confluenceTd">REF1</td><td class="confluenceTd">DEV1</td><td class="confluenceTd">QA1</td><td colspan="1" class="confluenceTd">UAT</td><td colspan="1" class="confluenceTd">PROD</td></tr><tr><th class="confluenceTh">Hotfix</th><td class="confluenceTd">hotfix</td><td class="confluenceTd">REF2</td><td class="confluenceTd">UAT</td><td class="confluenceTd">PROD</td><td colspan="1" class="confluenceTd"><br /></td><td colspan="1" class="confluenceTd"><br /></td></tr></tbody></table></div><hr /><h2 id="IntroductiontoMultipleDaticalPipelines-Howtosetupmultiplepipelines?">How to setup multiple pipelines?</h2><p>In order to setup multiple pipelines in <MadCap:variable name="General.DaticalDB" /> you would follow these steps:</p><ol><li>Create a new pipeline in <MadCap:variable name="General.DaticalDB" /> project</li><li>Populate DB steps in the pipeline</li><li>Configure "<a href="../../package-sql-scripts-for-deployment/configure-packaging/required-deploy-packager-properties.htm" rel="nofollow">deployPackager.properties</a>" file to map pipelines to SCM branches</li></ol><p>Let's take a look at each step in details:</p><h3 id="IntroductiontoMultipleDaticalPipelines-1.CreateanewpipelineinDaticalproject">1. Create a new pipeline in <MadCap:variable name="General.DaticalDB" /> project</h3><p>In <MadCap:variable name="General.DaticalDB" /> GUI, click on the "Manage" button</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" width="500" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_16-54-24.png?version=1&amp;modificationDate=1538169489227&amp;cacheVersion=1&amp;api=v2&amp;width=500&amp;height=414" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_16-54-24.png?version=1&amp;modificationDate=1538169489227&amp;cacheVersion=1&amp;api=v2&amp;width=534&amp;height=443 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_16-54-24.png?version=1&amp;modificationDate=1538169489227&amp;cacheVersion=1&amp;api=v2&amp;width=500&amp;height=414 1x" /></span></p><p>Click on the Add button</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="168" width="500" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_17-33-58.png?version=1&amp;modificationDate=1538169488954&amp;cacheVersion=1&amp;api=v2&amp;width=500&amp;height=168" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_17-33-58.png?version=1&amp;modificationDate=1538169488954&amp;cacheVersion=1&amp;api=v2&amp;width=518&amp;height=175 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_17-33-58.png?version=1&amp;modificationDate=1538169488954&amp;cacheVersion=1&amp;api=v2&amp;width=500&amp;height=168 1x" /></span></p><p><br /></p><p>Provide the new pipeline name and a description</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="500" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_17-35-6.png?version=1&amp;modificationDate=1538169488655&amp;cacheVersion=1&amp;api=v2&amp;width=500&amp;height=267" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_17-35-6.png?version=1&amp;modificationDate=1538169488655&amp;cacheVersion=1&amp;api=v2&amp;width=521&amp;height=279 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_17-35-6.png?version=1&amp;modificationDate=1538169488655&amp;cacheVersion=1&amp;api=v2&amp;width=500&amp;height=267 1x" /></span></p><p><br /></p><p>Click OK. You should now have two pipelines in your list:</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" width="500" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_17-35-48.png?version=1&amp;modificationDate=1538169488412&amp;cacheVersion=1&amp;api=v2&amp;width=500&amp;height=350" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_17-35-48.png?version=1&amp;modificationDate=1538169488412&amp;cacheVersion=1&amp;api=v2&amp;width=521&amp;height=365 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_17-35-48.png?version=1&amp;modificationDate=1538169488412&amp;cacheVersion=1&amp;api=v2&amp;width=500&amp;height=350 1x" /></span></p><p><br /></p><p>Click OK. Now switch to the newly created pipeline in <MadCap:variable name="General.DaticalDB" /> GUI:</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="253" width="203" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_17-41-36.png?version=1&amp;modificationDate=1538169486904&amp;cacheVersion=1&amp;api=v2&amp;width=203&amp;height=251" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_17-41-36.png?version=1&amp;modificationDate=1538169486904&amp;cacheVersion=1&amp;api=v2&amp;width=204&amp;height=253 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_17-41-36.png?version=1&amp;modificationDate=1538169486904&amp;cacheVersion=1&amp;api=v2&amp;width=203&amp;height=251 1x" /></span></p><p><br /></p><h3 id="IntroductiontoMultipleDaticalPipelines-2.PopulateDBstepsinthepipeline">2. Populate DB steps in the pipeline</h3><p>Click "Add Steps" to setup connection to a new database, e.g., REF2 database.&#160;</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" width="500" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_17-37-51.png?version=1&amp;modificationDate=1538169488085&amp;cacheVersion=1&amp;api=v2&amp;width=500&amp;height=560" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_17-37-51.png?version=1&amp;modificationDate=1538169488085&amp;cacheVersion=1&amp;api=v2&amp;width=647&amp;height=725 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_17-37-51.png?version=1&amp;modificationDate=1538169488085&amp;cacheVersion=1&amp;api=v2&amp;width=500&amp;height=560 1x" /></span></p><p><br /></p><p>Click "Next" and proceed with providing connection information for your first DB step in the pipeline.</p><p>For connecting to an existing database step that is already used in another pipeline, e.g., UAT or PROD, use the "Select an existing deployment step" option at the top:</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" width="500" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_17-39-47.png?version=1&amp;modificationDate=1538169487439&amp;cacheVersion=1&amp;api=v2&amp;width=500&amp;height=560" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_17-39-47.png?version=1&amp;modificationDate=1538169487439&amp;cacheVersion=1&amp;api=v2&amp;width=647&amp;height=725 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/693076300/image2018-9-27_17-39-47.png?version=1&amp;modificationDate=1538169487439&amp;cacheVersion=1&amp;api=v2&amp;width=500&amp;height=560 1x" /></span></p><p><br /></p><h3 id="IntroductiontoMultipleDaticalPipelines-3.Configure&quot;deployPackager.properties&quot;filetomappipelinestoSCMbranches">3. Configure "deployPackager.properties" file to map pipelines to SCM branches</h3><p>Configure your "deployPacakager.properties" file to map your pipeline to branches. See the sample file below:</p><ul><li>Pipeline "release1" is mapped to branch "June2018". See line 12</li><li>Pipeline "release2" is mapped to branch "July2018". See line 15</li></ul><p><br /></p><div class="code panel pdl conf-macro output-block" style="border-width: 1px;"><div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">databaseBackupRestoreLocation=DATICAL_DATA_PUMP_DIR
databaseBackupMode=on_demand
 
ddbScmSystem=git
ddbScmBranch=master
ddbScmPath=.
sqlScmSystem=git
sqlScmPath=../EFS_SQL
sqlScmSQLBaseDir=sql_code
 
release1.sqlScmBranch=June2018
release1.sqlScmLastImportID=d7e7bac
 
release2.sqlScmBranch=July2018
release2.sqlScmLastImportID=f3896e0
validateRollback = none
disableTraceFile = false</pre></div></div><p><br /></p><hr /><hr /><h2 id="IntroductiontoMultipleDaticalPipelines-HowdoesDaticalhandlebranchmergeswhenchangesarealreadypackagedinthesourcebranch?">How does <MadCap:variable name="General.DaticalDB" /> handle branch merges when changes are already packaged in the source branch?</h2><p>See link in <MadCap:variable name="General.DaticalDB" /> Documentation space&#160;→&#160;<a href="../../package-sql-scripts-for-deployment/sql-code-branch-merge-advnc.htm" rel="nofollow">SQL Code Branching &amp; Merging (Advanced)</a></p><p><br /></p><p><br /></p><p><br /></p></body>
</html>