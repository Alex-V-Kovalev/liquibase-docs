<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title><MadCap:variable name="Heading.Level1" /> | Enterprise Docs</title>
        <meta rel="canonical" href="https://docs.liquibase.com/enterprise/dba/best-practices/databasechangelog-replication.html" />
        <meta name="description" content="Troubleshoot the replica identity error" />
    </head>
    <body>
        <h1>Troubleshoot <MadCap:variable name="General.databasechangelog" /> Replication Error</h1>
        <MadCap:snippetBlock src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" />
        <p>If the error below appears, learn more about the cause and how to resolve the issue below</p>
        <h2>Error: </h2><pre>cannot delete from table '</pre><pre>angelog' because it does not have a replica identity and publishes deletes 2HINT: To enable deleting from the table, set REPLICA IDENTITY using ALTER TABLE. 3SQL state: 55000</pre>
        <h2>Cause: </h2>
        <p>The error occurs when  implementing the <code>rollback </code>command with a  changelog that does not have a primary key assigned to it. If two databases are compared and they both have a primary key, but a changelog is created in only one,  the changelog isn’t recognized because it does not have a primary key. When <code>rollback </code>is performed on a database that contains a changelog without a primary key, there isn't a matching <MadCap:variable name="General.databasechangelog" /> table that is recognized by the other database to delete from. That is when the error appears.</p>
        <h2>Solution:</h2>
        <p>Manually create a PRIMARY KEY or UNIQUE CONSTRAINT on the <MadCap:variable name="General.databasechangelog" /> table using columns: ID, AUTHOR, FILENAME</p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">This is a solution in 8.1 and later.  This occurred initially in a Postgres database but can occur in other settings so this can apply to all users.</p>
    </body>
</html>