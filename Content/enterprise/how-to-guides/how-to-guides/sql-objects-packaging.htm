<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title>Liquibase Enterprise Documentation</title>
        <meta name="description" content="Liquibase Enterprise Documentation" />
    </head>
    <body>
        <h1>SQL Server Database Objects and Packaging</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><h1 id="SQLServerDatabaseObjectsandPackaging-QualifyingObjectNames">Qualifying Object Names</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><ul><li>Do not qualify objects with the <strong>database name</strong>. <MadCap:variable name="General.DaticalDB" /> takes care of that.</li><li>For a&#160;<strong>Single-Schema</strong>&#160;project, you do not have to qualify object names with the <strong>schema name</strong>.&#160;If not qualified, <MadCap:variable name="General.DaticalDB" /> uses the default schema for the user (<strong>dbo</strong> is the default).</li><li>For a <strong>Multi-Schema</strong>&#160;project, you <strong>must qualify</strong> object names with the <strong>schema name</strong> so they get deployed to the correct schema during packaging.</li><li>For a <strong>Multi-Database</strong> project,&#160;&#160;you <strong>must qualify</strong> object names with the <strong>schema name</strong> so they get deployed to the correct schema during packaging. You typically organized folders by database and schema. You may also use only the database folder level. See&#160;<a href="../../define-release-pipeline/planning-projects/release-pipeline-contents-schema/multi-database-projects.htm" rel="nofollow">Multi-database Projects</a>.&#160;</li></ul><h1 id="SQLServerDatabaseObjectsandPackaging-SQLServerSCMPackagingPatterns">SQL Server SCM Packaging Patterns</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><p>Note that <MadCap:variable name="General.DaticalDB" /> packages non-transient files differently from transient files. Place scripts for Oracle objects in packaging folders as follows.&#160;</p><ul><li>Non-transient - In-place editing, packaging and&#160;<strong>no</strong>  &#160;<strong>archiving</strong>&#160;of database changes so they can be managed similar to application code. This applies to the following object types:<ul><li>Procedures (when scripts are placed in the <code>procedure</code> folder)</li><li>Functions&#160;(when scripts are placed in the <code>function</code> folder)</li><li>Views&#160;(when scripts are placed in the <code>view</code> folder)</li><li>Triggers&#160;(when scripts are placed in the <code>trigger</code> folder)</li></ul></li><li>Transient - Database changes are archived after packaging (all other folders).</li></ul><h1 id="SQLServerDatabaseObjectsandPackaging-ObjectsandPackagingFolders">Objects and Packaging Folders</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><p>Use the specified folder for listed SQL Server database operations.&#160;</p><table class="wrapped fixed-table confluenceTable"><colgroup><col style="width: 351.0px;" /><col style="width: 240.0px;" /><col style="width: 179.0px;" /><col style="width: 90.0px;" /><col style="width: 220.0px;" /></colgroup><tbody style="margin-left: 30.0px;"><tr style="margin-left: 30.0px;"><th>Operation and Object Type</th><th>Packaging Folders (fixed folders)</th><th colspan="1" class="confluenceTh">Package Methods (flexible folders)</th><th colspan="1" class="confluenceTh"><span style="color: rgb(51,51,51);">Archived</span></th><th colspan="1" class="confluenceTh">Notes</th></tr><tr style="margin-left: 30.0px;"><td>CREATE/ALTER/DROP <strong>DATABASE LINK</strong></td><td><code>sql_direct</code></td><td colspan="1" class="confluenceTd">direct</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td>CREATE/ALTER/DROP <strong>FUNCTION</strong></td><td><code>function</code></td><td colspan="1" class="confluenceTd">storedlogic</td><td colspan="1" class="confluenceTd">No</td><td colspan="1" class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td><span>CREATE/ALTER/DROP </span><strong>INDEX</strong></td><td><code><code>ddl,&#160;ddl_direct,&#160;<code>sql_direct</code></code></code></td><td colspan="1" class="confluenceTd">convert, ddl_direct, direct</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td><span>CREATE/ALTER/DROP </span><strong>PROCEDURE</strong></td><td><code>procedure</code></td><td colspan="1" class="confluenceTd">storedlogic</td><td colspan="1" class="confluenceTd">No</td><td colspan="1" class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td><span>CREATE/ALTER/DROP </span><strong>QUEUE</strong></td><td><code>sql_direct</code></td><td colspan="1" class="confluenceTd">direct</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td><span>CREATE/ALTER/DROP </span><strong>SEQUENCE</strong></td><td><code><code>ddl<code>,&#160;ddl_direct,&#160;<code>sql_direct</code></code></code></code></td><td colspan="1" class="confluenceTd">convert, ddl_direct, direct</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td><span>CREATE/ALTER/DROP </span><strong>SYNONYM</strong></td><td><code><code>ddl<code>,&#160;ddl_direct,&#160;<code>sql_direct</code></code></code></code></td><td colspan="1" class="confluenceTd">convert, ddl_direct, direct</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd"><p>For ALTER and CREATE OR REPLACE synonym use ddl_direct or sql_direct/direct. (Do not use ddl/convert with ALTER and CREATE OR REPLACE synonym.)</p></td></tr><tr style="margin-left: 30.0px;"><td><p><span>CREATE/ALTER/DROP </span><strong>TABLE</strong></p></td><td><code><code>ddl<code>,&#160;ddl_direct,&#160;<code>sql_direct</code></code></code></code></td><td colspan="1" class="confluenceTd">convert, ddl_direct, direct</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td><span>CREATE/ALTER/DROP </span><strong>TRIGGER</strong></td><td><p><code>trigger</code></p></td><td colspan="1" class="confluenceTd">storedlogic</td><td colspan="1" class="confluenceTd">No</td><td colspan="1" class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td><span>CREATE/ALTER/DROP </span><strong>TYPE</strong></td><td><code>sql_direct</code></td><td colspan="1" class="confluenceTd">direct</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td><span>CREATE/ALTER/DROP </span><strong>VIEW</strong></td><td><p><code>view</code></p></td><td colspan="1" class="confluenceTd">storedlogic</td><td colspan="1" class="confluenceTd">No</td><td colspan="1" class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td><span>CREATE/ALTER/DROP </span><strong>VIEW INDEX</strong></td><td><code><code>ddl<code>,&#160;ddl_direct,&#160;<code>sql_direct</code></code></code></code></td><td colspan="1" class="confluenceTd">convert, ddl_direct, direct</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td colspan="1" class="confluenceTd">RENAME<strong>&#160;&lt;DB_OBJECT&gt;</strong></td><td colspan="1" class="confluenceTd"><code>sql_direct</code></td><td colspan="1" class="confluenceTd">direct</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd"><br /></td></tr></tbody></table><table class="wrapped fixed-table confluenceTable"><colgroup><col style="width: 352.0px;" /><col style="width: 169.0px;" /><col style="width: 160.0px;" /><col style="width: 87.0px;" /></colgroup><tbody style="margin-left: 30.0px;"><tr style="margin-left: 30.0px;"><th>Operation</th><th>Packaging Folder (fixed folders)</th><th colspan="1" class="confluenceTh">Package Method (flexible folders)</th><th colspan="1" class="confluenceTh"><span style="color: rgb(51,51,51);">Archived</span></th></tr><tr style="margin-left: 30.0px;"><td colspan="1" class="confluenceTd"><span>INSERT, UPDATE, DELETE, SELECT</span></td><td colspan="1" class="confluenceTd"><span>data_dml</span></td><td colspan="1" class="confluenceTd">data_dml</td><td colspan="1" class="confluenceTd">Yes</td></tr><tr style="margin-left: 30.0px;"><td colspan="1" class="confluenceTd"><span>GRANT, REVOKE</span></td><td colspan="1" class="confluenceTd"><span>sql_direct</span></td><td colspan="1" class="confluenceTd">direct</td><td colspan="1" class="confluenceTd">Yes</td></tr></tbody></table><h1 class="auto-cursor-target" id="SQLServerDatabaseObjectsandPackaging-ErrorHandling">Error Handling</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><p>Do not put error-handling statements in the SQL scripts.&#160;</p><p>For SQL Server databases, do not include IF EXISTS<span style="color: rgb(23,43,77);">&#160;statements with an object definition.&#160;</span></p><p><span style="color: rgb(23,43,77);"><MadCap:variable name="General.DaticalDB" /> DB has its own error-handling that wraps SQL scripts. Specifying error-handling within the statements is not necessary.</span></p><p><span style="color: rgb(23,43,77);">Deployment Packager fails with an error if it encounters statements before an object definition.&#160;&#160;</span></p><p><span style="color: rgb(23,43,77);">See also these pages for overview of packaging workflows, guidelines for writing scripts, and which packaging methods or folders to use for which types of changes:</span></p><p><span style="color: rgb(23,43,77);"><a href="../../package-sql-scripts-for-deployment/overview-packaging/overview-packaging.htm">Overview of Packaging</a></span></p><p><span style="color: rgb(23,43,77);"><a href="../../developer-get-started-guide/write-sql-scripts/write-sql-scripts.htm">Writing SQL Scripts for Datical DB</a></span></p><p style="margin-left: 30.0px;"><span style="color: rgb(23,43,77);"><a href="../../package-sql-scripts-for-deployment/place-files-scm-repo/fixed-folder-names.htm">Fixed Folder Names</a></span></p><p style="margin-left: 30.0px;"><span style="color: rgb(23,43,77);"><a href="../../package-sql-scripts-for-deployment/place-files-scm-repo/flexible-folder-names.htm">Flexible Folder Names</a></span></p></body>
</html>