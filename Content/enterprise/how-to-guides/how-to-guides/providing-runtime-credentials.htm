<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title>Liquibase Enterprise Documentation</title><meta name="description" content="Liquibase Enterprise Documentation" /></head>
    <body>
        <h1>Providing Runtime Credentials</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><h1 id="ProvidingRuntimeCredentials-Overview">Overview</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><p>If you do not want to store the database credentials, configure the project to use runtime credentials.&#160; We recommend this option because it is more secure.</p><ul><li>GUI: In the <strong>Settings</strong> tab, <strong>Credential Management</strong> section, check&#160;<strong>Specify database credentials at operation runtime</strong>. <br /><br /><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image confluence-content-image-border" height="48" width="350" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/896569345/GUI_runtime_credentials.jpg?version=1&amp;modificationDate=1654569957806&amp;cacheVersion=1&amp;api=v2&amp;width=350&amp;height=49" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/896569345/GUI_runtime_credentials.jpg?version=1&amp;modificationDate=1654569957806&amp;cacheVersion=1&amp;api=v2&amp;width=350&amp;height=49 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/896569345/GUI_runtime_credentials.jpg?version=1&amp;modificationDate=1654569957806&amp;cacheVersion=1&amp;api=v2&amp;width=350&amp;height=49 1x" /></span><br /><br /></li></ul><p>CLI: Use the&#160;<code>runtimeCredentials</code>&#160;option.&#160;</p><pre class="syntaxhighlighter-pre" xml:space="preserve">hammer set runTimeCredentials true</pre><h1 id="ProvidingRuntimeCredentials-RuntimeCredentialPrecedence">Runtime Credential Precedence</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><p>When the runtime credentials option is set for a project, then during operations <MadCap:variable name="General.DaticalDB" /> DB checks for where the credentials are specified. Credential locations are checked in the following order:</p><ol><li>Explicit credentials for an operation:<br /><ul><li>CLI - You specify credentials in command options</li></ul></li><li>Environment variables (CLI only)</li><li>Prompting. If the credentials are not provided explicitly and the environment variable is not set, Datical DB displays a prompt for the user to enter the credentials.&#160;<ul><li>GUI - Prompt dialog</li><li>CLI - Prompt line</li></ul></li></ol><h1 id="ProvidingRuntimeCredentials-ExplicitCredentials">Explicit Credentials</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><p>If you provide credentials in command options at the CLI, those credentials are checked.&#160;</p><p>If they fail, no further checking is done and the command fails.&#160;</p><h2 id="ProvidingRuntimeCredentials-Single-CredentialCommands">Single-Credential Commands</h2><p>The credential options use a space to separate the option and the value. Do not use "=".&#160;</p><table class="wrapped confluenceTable"><colgroup></colgroup><tbody><tr><th><p><span style="color: rgb(0,0,0);"><strong>Option</strong></span></p></th><th><p><span style="color: rgb(0,0,0);"><strong>Description</strong></span></p></th></tr><tr><td><p>One of these forms:</p><p><code>-un &lt;username&gt;<br /></code><code>-username &lt;username&gt;</code></p><p></p></td><td><p>User name in one of the following forms:</p><ul><li><code>&lt;username&gt;</code></li><li><code>&lt;dbdefname&gt;:::&lt;username&gt;</code></li></ul></td></tr><tr><td><p>One of these forms:</p><p><code>-pw &lt;password&gt;<br /></code><code>-password &lt;password&gt;</code></p></td><td><p>Password in one of the following forms:</p><ul><li><code>&lt;password&gt;</code></li><li><code> &lt;dbdefname&gt;:::&lt;password&gt;</code></li></ul></td></tr></tbody></table><h3 id="ProvidingRuntimeCredentials-Example:ForecastOperation">Example: Forecast Operation</h3><pre class="syntaxhighlighter-pre" xml:space="preserve">hammer forecast DEV -un myuser -pw mypassword</pre><h2 id="ProvidingRuntimeCredentials-Two-credentialCommands">Two-credential Commands</h2><p>The <code>diff</code> and <code>diffChangeLog</code>&#160;commands require two database names as options.&#160;</p><ul><li>Reference database - Represents the desired state.</li><li>Target database - Represents a current state, which is to be measured against the desired state.</li></ul><p>The credential options use a space to separate the option and the value. Do not use "=".&#160;</p><table class="wrapped confluenceTable"><colgroup></colgroup><tbody><tr><th>Option</th><th>Description</th></tr><tr><td><p><code>-ru &lt;username&gt;<br /></code><code>-referenceUsername &lt;username&gt;</code></p></td><td>Reference database user name&#160;</td></tr><tr><td><p><code>-rpw &lt;password&gt;<br /></code><code>-referencePassword &lt;password&gt;</code></p></td><td>Password for the reference database user name</td></tr><tr><td><p><code>-tu &lt;username&gt;<br /></code><code>--targetUsername &lt;username&gt;</code></p></td><td>Target database user name&#160;</td></tr><tr><td><p><code>-tpw &lt;password&gt;<br /></code><code>--targetPassword &lt;password&gt;</code></p></td><td>Password for the target database user name</td></tr></tbody></table><h3 id="ProvidingRuntimeCredentials-Example:PerformingaDiff">Example: Performing a Diff</h3><p>In this example, <strong>TEST</strong> is the reference database (desired state) and <strong>DEV</strong> is the target database (measured against the desired state).</p><pre class="syntaxhighlighter-pre" xml:space="preserve">hammer diff TEST DEV -ru refDbUser -rpw refDbPass -tu targetUser -tpw targetPass</pre><h1 id="ProvidingRuntimeCredentials-EnvironmentVariables">Environment Variables</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><p>When the project is set to use runtime credentials and you run an operation from the CLI, environment variables are checked.&#160;</p><p>Set the following environment variables if you want to provide default credentials for CLI hammer commands:</p><table class="wrapped confluenceTable"><colgroup></colgroup><tbody><tr><td><p><span style="color: rgb(0,0,0);"><strong>Environment variables</strong></span></p></td><td><p><span style="color: rgb(0,0,0);"><strong>Description</strong></span></p></td></tr><tr><td><p><strong>DDB_USER</strong> <br class="atl-forced-newline" /><strong>DDB_PASS</strong></p></td><td><p>Database credentials. Used for commands that operate on a single database: forecast, deploy, rollback, and package (deployPackager.groovy) operations.</p></td></tr><tr><td colspan="1" class="confluenceTd"><p><strong>DDB_USER_&lt;dbDefName&gt;<br /></strong><strong>DDB_PASS_&lt;<strong>dbDefName</strong>&gt;</strong></p></td><td colspan="1" class="confluenceTd"><div class="content-wrapper"><p>Database credentials for an individual step (DbDef). Used only for groovy commands,&#160;including&#160;<code>deployPackager.groovy</code>.&#160;</p><p class="title">Note</p><p>The per-DbDef environment variables are checked first.&#160;If they are not set, then DDB_USER and DDB_PASS are checked.&#160;</p></td></tr><tr><td><p><strong>DDB_REF_USER</strong> <br class="atl-forced-newline" /><strong>DDB_REF_PASS</strong></p></td><td><p>Used with <strong>REFERENCE&#160;</strong>variables for commands that operate on two databases.</p><ul><li><code>diff</code></li><li><code>diffchangelog</code></li></ul></td></tr><tr><td><p><strong>DDB_TARGET_USER</strong> <br class="atl-forced-newline" /><strong>DDB_TARGET_PASS</strong></p></td><td><p>Used with <strong>TARGET</strong>&#160;variables for commands that operate on two databases.</p><ul><li><code>diff</code></li><li><code>diffchangelog</code></li></ul></td></tr><tr><td><p><strong>DDB_DMCDB_USER</strong> <br class="atl-forced-newline" /><strong>DDB_DMCDB_PASS</strong></p></td><td><p>Used to access the DMCDB database. Operations cause entries to be entered in the DMCDB database:</p><ul><li>forecast</li><li>deploy</li></ul></td></tr></tbody></table><h1 id="ProvidingRuntimeCredentials-PromptsforCredentials">Prompts for Credentials</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><p>When you perform an action in the GUI you will be prompted to provide credentials if&#160;<span style="background-color: rgb(255,255,255);">Runtime credentials are required. (Either the project option is set or no credentials have been entered for a step.)&#160;</span></p><p>You are prompted with a dialog:<br /><br /><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="338" width="342" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/896569345/worddav195e14abe9be10538ec584c7bde9ad19.png?version=1&amp;modificationDate=1569858636556&amp;cacheVersion=1&amp;api=v2&amp;width=342&amp;height=338" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/896569345/worddav195e14abe9be10538ec584c7bde9ad19.png?version=1&amp;modificationDate=1569858636556&amp;cacheVersion=1&amp;api=v2&amp;width=684&amp;height=676 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/896569345/worddav195e14abe9be10538ec584c7bde9ad19.png?version=1&amp;modificationDate=1569858636556&amp;cacheVersion=1&amp;api=v2&amp;width=342&amp;height=338 1x" /></span><br /><br /></p><p class="title">Note</p><ul><li>Once you enter the credentials for deployment step, you are not prompted again for additional operations in the current session.</li><li>You must re-enter credentials when the project is closed and re-opened (new session).</li><li>You must re-enter credentials if a connection fails.</li></ul><h1 id="ProvidingRuntimeCredentials-Video">Video</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><p>See also video 9 about <a href="how-enterprise-works.htm" rel="nofollow">Database Credentials</a></p></body>
</html>