<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title></title>
    </head>
    <body>
        <h1>Oracle Database Objects and Packaging</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><p /><div class="toc-macro client-side-toc-macro  conf-macro output-block"></div><h1 id="OracleDatabaseObjectsandPackaging-QualifyingObjectNames">Qualifying Object Names</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><ul><li>For a&#160;<strong>Single-Schema </strong>project, you can qualify object names with the&#160;<strong>schema name</strong>.&#160;If they are left unqualified, <MadCap:variable name="General.DaticalDB" /> uses the Connection Schema, or the Default Schema (if specified).</li><li>For a <strong>Multi-Schema Project</strong>, you&#160;<strong>must</strong>  &#160;<strong>qualify</strong>&#160;object names with the&#160;<strong>schema name</strong>&#160;so they get deployed to the correct schema during packaging.</li><li>You can use the schemaName attribute in the metadata.properties file to indicate the default schema. See&#160;<a href="metadata-properties-file.htm" rel="nofollow">Using the metadata.properties file</a>.&#160;</li></ul><h1 id="OracleDatabaseObjectsandPackaging-OracleSCMPackagingPatterns">Oracle SCM Packaging Patterns</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><p>Note that <MadCap:variable name="General.DaticalDB" /> packages non-transient files differently from transient files. Place scripts for Oracle objects in packaging folders as follows.&#160;</p><ul><li>Non-transient - In-place editing, packaging and&#160;<strong>no</strong>&#160;archiving of database changes so they can be managed similar to application code. This applies to the following object types:<ul><li>Procedures - <code>procedure</code> folder</li><li>Functions - <code>function</code> folder</li><li>Package&#160; - <code>package</code> folder</li><li>Package Body - <code>packagebody</code> folder</li><li>Views&#160; - <code>view</code> folder</li><li>Triggers&#160;- <code>trigger</code> folder</li></ul></li><li>Transient - Database changes are archived after packaging (all other folders).</li></ul><h1 id="OracleDatabaseObjectsandPackaging-OraclePackagingFolders">Oracle Packaging Folders</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><p>Use the specified folder for listed Oracle database operations.&#160;</p><p>Note that using CREATE OR REPLACE rather than CREATE alone (see Notes) allows stored-logic SQL scripts to be modified and repackaged.&#160;</p><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 66.8737%;"><colgroup><col style="width: 25.4153%;" /><col style="width: 23.6669%;" /><col style="width: 18.792%;" /><col style="width: 9.30552%;" /><col style="width: 22.9221%;" /></colgroup><tbody style="margin-left: 30.0px;"><tr style="margin-left: 30.0px;"><th class="confluenceTh">Object Type</th><th class="confluenceTh">Packaging Folders (fixed folders)</th><th colspan="1" class="confluenceTh">Package Methods (flexible folders)</th><th colspan="1" class="confluenceTh">Archived?</th><th class="confluenceTh">Notes</th></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd">CREATE/ALTER/DROP <strong>DATABASE LINK</strong></td><td class="confluenceTd"><code>sql_direct</code></td><td colspan="1" class="confluenceTd">direct</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><span>CREATE/<span>ALTER/</span>DROP </span><strong>FUNCTION</strong></td><td class="confluenceTd"><code>function</code></td><td colspan="1" class="confluenceTd">storedlogic</td><td colspan="1" class="confluenceTd">No</td><td class="confluenceTd"><p>Use CREATE OR REPLACE rather than CREATE alone.&#160;</p><p>Each function must be in its own file&#160;and end with a '/'.</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><span>CREATE/<span>ALTER/</span>DROP </span><strong>INDEX</strong></td><td class="confluenceTd"><code><code>ddl,&#160;<code><code><code>ddl_direct,&#160;</code></code></code><code>sql_direct</code></code></code></td><td colspan="1" class="confluenceTd">convert, ddl_direct, direct</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><span>CREATE/<span>ALTER/</span>DROP </span><strong>QUEUE</strong></td><td class="confluenceTd"><code>sql_direct</code></td><td colspan="1" class="confluenceTd">direct</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><span>CREATE/<span>ALTER/</span>DROP </span><strong>SEQUENCE</strong></td><td class="confluenceTd"><code><code>ddl,&#160;<code><code><code>ddl_direct,&#160;</code></code></code><code>sql_direct</code></code></code></td><td colspan="1" class="confluenceTd">convert, ddl_direct, direct</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><span>CREATE/<span>ALTER/</span>DROP <strong>PUBLIC&#160;</strong></span><strong>SYNONYM</strong></td><td class="confluenceTd"><code><code>sql_direct</code></code></td><td colspan="1" class="confluenceTd">direct</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd">Alternatively, use Datical Auto-Synonyms.</td></tr><tr style="margin-left: 30.0px;"><td colspan="1" class="confluenceTd"><span>CREATE/<span>ALTER/</span>DROP <strong>PRIVATE&#160;</strong></span><strong>SYNONYM</strong></td><td colspan="1" class="confluenceTd"><code><code>ddl, <code><code><code>ddl_direct,&#160;</code></code></code>sql_direct</code></code></td><td colspan="1" class="confluenceTd">convert, ddl_direct, direct</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd"><p>For ALTER and CREATE OR REPLACE synonym use ddl_direct or sql_direct/direct. (Do not use ddl/convert with ALTER and CREATE OR REPLACE synonym.)</p><p>Alternatively, use Datical Auto-Synonyms.</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><p><span>CREATE/<span>ALTER/</span>DROP </span><strong>TABLE</strong></p></td><td class="confluenceTd"><code><code>ddl,&#160;<code><code><code>ddl_direct,&#160;</code></code></code><code>sql_direct</code></code></code></td><td colspan="1" class="confluenceTd">convert, ddl_direct, direct</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td colspan="1" class="confluenceTd"><span>CREATE/<span>ALTER/</span>DROP </span><strong>GLOBAL TEMPORARY TABLE</strong></td><td colspan="1" class="confluenceTd"><code><code>ddl,&#160;<code><code><code>ddl_direct,&#160;</code></code></code><code>sql_direct</code></code></code></td><td colspan="1" class="confluenceTd">convert, ddl_direct, direct</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td colspan="1" class="confluenceTd"><span>CREATE/<span>ALTER/</span>DROP </span><strong>MATERIALIZED VIEW</strong></td><td colspan="1" class="confluenceTd"><code>sql_direct</code></td><td colspan="1" class="confluenceTd">direct</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd"><br /></td></tr><tr><td class="confluenceTd"><span>CREATE/<span>ALTER/</span>DROP </span><strong>PACKAGE</strong></td><td class="confluenceTd"><code>package</code></td><td colspan="1" class="confluenceTd">storedlogic</td><td colspan="1" class="confluenceTd">No</td><td class="confluenceTd"><p>Use CREATE OR REPLACE rather than CREATE alone.&#160;</p><p>Each package must be in its own file and end with a '/'.</p></td></tr><tr><td class="confluenceTd"><span>CREATE/<span>ALTER/</span>DROP </span><strong>PACKAGE BODY</strong></td><td class="confluenceTd"><code>packagebody</code></td><td colspan="1" class="confluenceTd">storedlogic</td><td colspan="1" class="confluenceTd">No</td><td class="confluenceTd"><p>Use CREATE OR REPLACE rather than CREATE alone.&#160;</p><p>Each package body must be&#160;in its own file and end with a '/'.</p></td></tr><tr><td class="confluenceTd"><span>CREATE/<span>ALTER/</span>DROP </span><strong>PROCEDURE</strong></td><td class="confluenceTd"><code>procedure</code></td><td colspan="1" class="confluenceTd">storedlogic</td><td colspan="1" class="confluenceTd">No</td><td class="confluenceTd"><p>Use CREATE OR REPLACE rather than CREATE alone.&#160;</p><p>Each procedure must be&#160;in its own file and end with a '/'.</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><span>CREATE/<span>ALTER/</span>DROP </span><strong>TRIGGER</strong></td><td class="confluenceTd"><p><code>trigger</code></p></td><td colspan="1" class="confluenceTd">storedlogic</td><td colspan="1" class="confluenceTd">No</td><td class="confluenceTd"><p>Use CREATE OR REPLACE rather than CREATE alone.&#160;</p><p>Each trigger must be&#160;in its own file and end with a '/'.</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><span>CREATE/<span>ALTER/</span>DROP </span><strong>TYPE</strong></td><td class="confluenceTd"><code>sql_direct</code></td><td colspan="1" class="confluenceTd">direct</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd">Each type must be in its own file and end with a '/'.</td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><span>CREATE/<span>ALTER/</span>DROP </span><strong>VIEW</strong></td><td class="confluenceTd"><p><code>view</code></p></td><td colspan="1" class="confluenceTd">storedlogic</td><td colspan="1" class="confluenceTd">No</td><td class="confluenceTd"><p>Use CREATE OR REPLACE rather than CREATE alone.&#160;</p><p>Each view must be in its own file and end with a '/'.</p></td></tr><tr style="margin-left: 30.0px;"><td class="confluenceTd"><span>CREATE/<span>ALTER/</span>DROP </span><strong>VIEW INDEX</strong></td><td class="confluenceTd"><code><code><code>ddl,&#160;</code></code></code><code><code><code>ddl_direct,&#160;</code></code></code><code><code>sql_direct</code></code></td><td colspan="1" class="confluenceTd">convert, ddl_direct, direct</td><td colspan="1" class="confluenceTd">Yes</td><td class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td colspan="1" class="confluenceTd"><span>CREATE/<span>ALTER/</span>DROP </span><strong>CURSOR</strong></td><td colspan="1" class="confluenceTd"><code>sql_direct</code></td><td colspan="1" class="confluenceTd">direct</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td colspan="1" class="confluenceTd"><span>CREATE/<span>ALTER/</span>DROP </span><strong>DIRECTORY</strong></td><td colspan="1" class="confluenceTd"><code>sql_direct</code></td><td colspan="1" class="confluenceTd">direct</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td colspan="1" class="confluenceTd">RENAME<strong> &lt;DB_OBJECT&gt;</strong></td><td colspan="1" class="confluenceTd"><code>sql_direct</code></td><td colspan="1" class="confluenceTd">direct</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd"><br /></td></tr></tbody></table></div><div class="table-wrap"><table class="relative-table wrapped confluenceTable" style="width: 64.3892%;"><colgroup><col style="width: 32.4034%;" /><col style="width: 14.9142%;" /><col style="width: 17.4893%;" /><col style="width: 9.65665%;" /><col style="width: 25.5365%;" /></colgroup><tbody style="margin-left: 30.0px;"><tr style="margin-left: 30.0px;"><th class="confluenceTh">Operation</th><th class="confluenceTh">Packaging Folder (fixed folders)</th><th colspan="1" class="confluenceTh">Package Methods (flexible folders)</th><th colspan="1" class="confluenceTh">Archived?</th><th class="confluenceTh">Notes</th></tr><tr style="margin-left: 30.0px;"><td colspan="1" class="confluenceTd">INSERT, UPDATE, DELETE<span>, SELECT</span></td><td colspan="1" class="confluenceTd">data_dml</td><td colspan="1" class="confluenceTd">data_dml</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd"><br /></td></tr><tr style="margin-left: 30.0px;"><td colspan="1" class="confluenceTd">GRANT, REVOKE</td><td colspan="1" class="confluenceTd">sql_direct</td><td colspan="1" class="confluenceTd">direct</td><td colspan="1" class="confluenceTd">Yes</td><td colspan="1" class="confluenceTd">Alternatively, use Datical Auto-Permissions.</td></tr></tbody></table></div><h1 class="auto-cursor-target" id="OracleDatabaseObjectsandPackaging-ErrorHandling">Error Handling</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><p>Do not put error-handling statements in the SQL scripts.&#160;</p><p>For Oracle databases, do not include&#160;<span style="color: rgb(23,43,77);">WHENEVER SQLERROR statements with an object definition.&#160;</span></p><p><span style="color: rgb(23,43,77);">Datical DB has its own error-handling that wraps SQL scripts. Specifying error-handling within the statements is not necessary.</span></p><p>Deployment Packager fails with an error if it encounters statements before an object definition for scripts in a stored logic folders or where packageMethod is defined as <code>packageMethod=STOREDLOGIC</code>.</p><h2 id="OracleDatabaseObjectsandPackaging-OracleandPL/SQL"><span style="color: rgb(23,43,77);">Oracle and PL/SQL</span></h2><ul><li><span style="color: rgb(23,43,77);">We recommend that you do not put error handling statements in your scripts, because <MadCap:variable name="General.DaticalDB" /> has its own error-handling that wraps SQL scripts.&#160; However, If you include error-handling code, use the<code>raise_application_error()</code>method as part of your catch routine. Datical relies on&#160;<span style="color: rgb(23,43,77);"><code>raise_application_error()</code></span>to determine the status of a change (success, failure).&#160;</span></li><li><span style="color: rgb(23,43,77);">Datical creates and uses a DATICAL_SPERRORLOG table in the Datical tracking schema. It is re-created as needed when a sqlplus change is deployed.&#160;</span></li></ul><p><br /></p><p><br /></p><p><span style="color: rgb(23,43,77);">See also these pages for overview of packaging workflows, which packaging methods or folders to use for which types of changes, and SQL Parser for Oracle:</span></p><p><span style="color: rgb(23,43,77);"><a href="overview-packaging.htm">Overview of Packaging</a></span></p><p><span style="color: rgb(23,43,77);"><a href="../package-sql-scripts-for-deployment/write-sql-scripts/write-sql-scripts.htm">Writing SQL Scripts for Datical DB</a></span></p><p style="margin-left: 30.0px;"><span style="color: rgb(23,43,77);"><a href="../package-sql-scripts-for-deployment/place-files-scm-repo/fixed-folder-names.htm">Fixed Folder Names</a></span></p><p style="margin-left: 30.0px;"><span style="color: rgb(23,43,77);"><a href="../package-sql-scripts-for-deployment/place-files-scm-repo/flexible-folder-names.htm">Flexible Folder Names</a></span></p><p><span style="color: rgb(23,43,77);"><a href="../package-sql-scripts-for-deployment/configure-packaging/sql-parser.htm">Using SQL Parser</a></span></p></body>
</html>