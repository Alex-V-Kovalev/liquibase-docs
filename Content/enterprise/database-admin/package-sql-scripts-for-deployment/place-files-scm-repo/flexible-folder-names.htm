<?xml version="1.0" encoding="utf-8"?>
<html>
    <head><title></title>
    </head>
    <body>
        <h1>Flexible Folder Names</h1>
        <p />
        <div class="toc-macro client-side-toc-macro  conf-macro output-block">
        </div>
        <p>
            <br />
        </p>
        <h1 id="FlexibleFolderNames-UsingFlexibleFolders">Using Flexible Folders</h1>
        <p>This feature can help you if you cannot use fixed-name folders in SCM under a &lt;sql_code&gt; root.&#160;</p>
        <p>Using this capability, you may use any number of arbitrarily named folders under a &lt;sql_code&gt; root. This enables you to use folder names that are meaningful to your environment or instructive to your end users.</p>
        <p>When you use flexible folders, the folders containing SQL code must have a <a href="../configure-packaging/metadata-properties-file.htm" rel="nofollow">metadata.properties</a> file, even if it is blank.</p>
        <p>You need to specify two properties in a <code>metadata.properties</code> file in the folder when using flexible folder names.&#160; These properties explicitly specify packaging behavior that can be different than the defaults that are implicit with fixed-name folders.</p>
        <ul>
            <li><code>packageMethod</code> - specifies how to package code in this folder</li>
            <li><code>rerunnable</code> - specify whether this code can be repackaged (updated in place)</li>
        </ul>
        <h1 id="FlexibleFolderNames-SQLFileProcessing">SQL File Processing</h1>
        <p>SQL files are packaged in a determined order by type. The packaging method is determined from the type.&#160;</p>
        <h2 id="FlexibleFolderNames-Ordering">Ordering</h2>
        <p>Packaging is done in the following order, using the SQLFileType returned from parsing. It is the same order used with static-name directories. (Note that ddl_direct is available in 7.15 and higher.)</p>
        <p>The following table shows the packageMethod used for each SQLFileType:</p>
        <div class="table-wrap">
            <table class="wrapped confluenceTable">
                <colgroup>
                    <col />
                    <col />
                    <col />
                </colgroup>
                <tbody>
                    <tr>
                        <th colspan="1" class="confluenceTh">Order</th>
                        <th class="confluenceTh">SQLFileType</th>
                        <th class="confluenceTh">packageMethod</th>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">1</td>
                        <td class="confluenceTd">ddl</td>
                        <td class="confluenceTd">CONVERT</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd"><span style="color: rgb(51,51,51);">2</span>
                        </td>
                        <td colspan="1" class="confluenceTd"><span style="color: rgb(51,51,51);">ddl_direct</span>
                        </td>
                        <td colspan="1" class="confluenceTd"><span style="color: rgb(51,51,51);">DDL_DIRECT</span>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">3</td>
                        <td class="confluenceTd">view</td>
                        <td class="confluenceTd">STOREDLOGIC</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">4</td>
                        <td class="confluenceTd">ssis</td>
                        <td class="confluenceTd">SSIS</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">5</td>
                        <td colspan="1" class="confluenceTd">ssis_project</td>
                        <td colspan="1" class="confluenceTd">
                            <p>SSIS</p>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">6</td>
                        <td colspan="1" class="confluenceTd">function</td>
                        <td colspan="1" class="confluenceTd">STOREDLOGIC</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">7</td>
                        <td colspan="1" class="confluenceTd">procedure</td>
                        <td colspan="1" class="confluenceTd">STOREDLOGIC</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">8</td>
                        <td colspan="1" class="confluenceTd">package</td>
                        <td colspan="1" class="confluenceTd">STOREDLOGIC</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">9</td>
                        <td colspan="1" class="confluenceTd">packagebody</td>
                        <td colspan="1" class="confluenceTd">STOREDLOGIC</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">10</td>
                        <td colspan="1" class="confluenceTd">trigger</td>
                        <td colspan="1" class="confluenceTd">STOREDLOGIC</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">11</td>
                        <td colspan="1" class="confluenceTd">sql</td>
                        <td colspan="1" class="confluenceTd">SQLFILE</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">12</td>
                        <td colspan="1" class="confluenceTd">sqlplus</td>
                        <td colspan="1" class="confluenceTd">DIRECT</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">13</td>
                        <td colspan="1" class="confluenceTd">sql_direct</td>
                        <td colspan="1" class="confluenceTd">DIRECT</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">14</td>
                        <td colspan="1" class="confluenceTd">data_dml</td>
                        <td colspan="1" class="confluenceTd">DATA_DML</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <h2 id="FlexibleFolderNames-ComplexandInterdependentDatabaseChanges">Complex and Interdependent Database Changes</h2>
        <p style="text-align: left;">Normally DDL&#160;changes are placed in folders that use the CONVERT packaging method. However, when you need to package complex and interdependent changes, place them in a folder that uses the <span style="color: rgb(51,51,51);">DDL_DIRECT or&#160;</span>DIRECT packaging method instead.&#160;</p>
        <p style="text-align: left;">If the order that the multiple statements are listed in the single script is critical to the success of the script, then use the <span style="color: rgb(51,51,51);">DDL_DIRECT or&#160;</span>DIRECT<span></span>packaging method. The <span style="color: rgb(51,51,51);">DDL_DIRECT or&#160;</span>DIRECT<span></span>packaging method will preserve the order of the statements in the script. (The CONVERT packaging method may not preserve the order because it creates the change sets by doing a diff of before and after snapshots, and that comparison process does not know the original order of the statements.)</p>
        <p style="text-align: left;">Examples of sets of statements in a single sql script that need to use the DIRECT or DDL_DIRECTpackaging method:</p>
        <p>
            <br />
        </p>
        <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
            <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">create table
move data from old table to new table
drop old table</pre>
            </div>
        </div>
        <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
            <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">alter table drop pk constraint
alter table drop column (a column that the pk constraint depends on)
alter table add column (a column that the pk constraint depends on)
alter table add pk constraint</pre>
            </div>
        </div>
        <h2 id="FlexibleFolderNames-ResourcesDirectory">Resources Directory</h2>
        <p>During SQL file packaging, files are copied to directories under the project Resources directory. The directories have the same name except for files in sql, sqplus, and sql_direct, which are all placed in Resources/sql.&#160;</p>
        <div class="table-wrap">
            <table class="wrapped confluenceTable">
                <colgroup>
                    <col />
                    <col />
                </colgroup>
                <tbody>
                    <tr>
                        <th class="confluenceTh">SQLFileType</th>
                        <th class="confluenceTh">Resources folder</th>
                    </tr>
                    <tr>
                        <td class="confluenceTd">DDL</td>
                        <td class="confluenceTd">N/A</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd"><span style="color: rgb(51,51,51);">DDL_DIRECT</span>
                        </td>
                        <td colspan="1" class="confluenceTd"><span style="color: rgb(51,51,51);">ddl_direct</span>
                        </td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">VIEW</td>
                        <td class="confluenceTd">view</td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">SSIS</td>
                        <td class="confluenceTd">ssis</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">SSIS_PROJECT</td>
                        <td colspan="1" class="confluenceTd">ssis_project</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">FUNCTION</td>
                        <td colspan="1" class="confluenceTd">function</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">PROCEDURE</td>
                        <td colspan="1" class="confluenceTd">procedure</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">PACKAGE</td>
                        <td colspan="1" class="confluenceTd">package</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">PACKAGEBODY</td>
                        <td colspan="1" class="confluenceTd">packagebody</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">TRIGGER</td>
                        <td colspan="1" class="confluenceTd">trigger</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">SQL</td>
                        <td colspan="1" class="confluenceTd">sql</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">SQLPLUS</td>
                        <td colspan="1" class="confluenceTd">sql</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">SQL_DIRECT</td>
                        <td colspan="1" class="confluenceTd">sql</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">DATA_DML</td>
                        <td colspan="1" class="confluenceTd">data_dml</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <p>
            <br />
        </p>
        <h1 id="FlexibleFolderNames-Propertiesinmetadata.properties">Properties in metadata.properties</h1>
        <h2 id="FlexibleFolderNames-Requirementformetadata.properties">Requirement for metadata.properties</h2>
        <p>When you are using flexible folders, folders containing SQL code <em>must</em> have a metadata.properties file, <em>even if it is blank</em>.&#160;</p>
        <ul>
            <li>Folders containing metadata.properties file are processed.</li>
            <li>Folders not containing metadata.properties file are skipped.</li>
        </ul>
        <h2 id="FlexibleFolderNames-Availablepropertiesformetadata.properties">Available properties for metadata.properties</h2>
        <p>A full list of the properties that can be defined in metadata.properties is found here:&#160;<a href="../configure-packaging/metadata-properties-file.htm">Using the metadata.properties file</a></p>
        <p>Some of the most commonly used properties are mentioned below:</p>
        <h3 id="FlexibleFolderNames-ignore">ignore</h3>
        <p>Set to true or false. If true, packager skips this folder and all subfolders during processing.&#160;</p>
        <h3 id="FlexibleFolderNames-packageMethod">packageMethod</h3>
        <p>If specified, determines the processing method to use during packaging. The file is further parsed to determine the SQLFileType, which determines the order of processing.&#160;</p>
        <p>If not specified, determine the type based on directory location (static-name directories) and parsed SQLFileType.&#160;</p>
        <ul>
            <li>CONVERT (convert)</li>
            <li>STOREDLOGIC (native)</li>
            <li>DIRECT&#160;(native)</li>
            <li><span style="color: rgb(51,51,51);">DDL_DIRECT (native)</span>
            </li>
            <li>DATA_DML (native)</li>
            <li>SQLFILE&#160;(native)</li>
            <li>SSIS&#160;(native)</li>
        </ul>
        <h3 id="FlexibleFolderNames-rerunnable">rerunnable</h3>
        <p>The newer <strong>rerunnable</strong> property replaces two older properties that are are deprecated and should no longer be used (allowRepackaging and archive).</p>
        <p>Set rerunnable to true or false:</p>
        <ul>
            <li>true - the SQL code file is not archived. It can be repackaged.&#160;</li>
            <li>false - the SQL code file is archived. It cannot be repackaged.&#160;</li>
        </ul>
        <p>If not set, packager checks whether fixed-name folders are being used under the &lt;sql_code&gt; root and assigns the default rerunnable property value as follows. In general, stored logic is rerunnable.&#160;</p>
        <div class="table-wrap">
            <table class="wrapped confluenceTable">
                <colgroup>
                    <col />
                    <col />
                </colgroup>
                <tbody>
                    <tr>
                        <th class="confluenceTh">Fixed Folder</th>
                        <th class="confluenceTh">Rerunnable default setting</th>
                    </tr>
                    <tr>
                        <td class="confluenceTd">ddl</td>
                        <td class="confluenceTd">false</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd"><span style="color: rgb(51,51,51);">ddl_direct</span>
                        </td>
                        <td colspan="1" class="confluenceTd"><span style="color: rgb(51,51,51);">false</span>
                        </td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">data_dml</td>
                        <td class="confluenceTd">false</td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">sql_direct</td>
                        <td class="confluenceTd">
                            <p>false</p>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">sql</td>
                        <td colspan="1" class="confluenceTd">false</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">sqlplus</td>
                        <td colspan="1" class="confluenceTd">false</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">procedure</td>
                        <td colspan="1" class="confluenceTd">true</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">package</td>
                        <td colspan="1" class="confluenceTd">true</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">packagebody</td>
                        <td colspan="1" class="confluenceTd">true</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">function</td>
                        <td colspan="1" class="confluenceTd">true</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">trigger</td>
                        <td colspan="1" class="confluenceTd">true</td>
                    </tr>
                    <tr>
                        <td colspan="1" class="confluenceTd">view</td>
                        <td colspan="1" class="confluenceTd">true</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <h3 id="FlexibleFolderNames-versionStrategy">versionStrategy</h3>
        <p>When you are using the rerunnable=true property, you can have multiple versions of the change set for different iterations of the sql script.&#160; Stored Logic is usually configured to use rerunnable=true.&#160; You can then use the <strong>versionStrategy</strong> property to indicate whether to deploy all versions of the rerunnable change set, or only deploy the latest version of the rerunnable change set.</p>
        <p>Set versionStrategy to deployAll or deployLatest:</p>
        <ul>
            <li>deployAll -&#160;<span style="color: rgb(9,30,66);">deploy all eligible versions in the order they appear in changelog.xml. This is the default.</span></li>
            <li>deployLatest -&#160;<span style="color: rgb(9,30,66);">deploy only the latest eligible version.</span></li>
        </ul>
        <p>
            <br />
        </p>
        <p class="auto-cursor-target">See also these pages for an overview of packager workflows, guidelines for writing scripts, and when to use which folder or packaging method:</p>
        <p class="auto-cursor-target"><a href="../overview-packaging/overview-packaging.htm">Overview of Packaging</a>
        </p>
        <p class="auto-cursor-target"><a href="../write-sql-scripts/write-sql-scripts.htm">Writing SQL Scripts for <MadCap:variable name="General.DaticalDB" xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" /></a>
        </p>
        <p class="auto-cursor-target" style="margin-left: 30.0px;"><a href="oracle-packaging.htm">Oracle Database Objects and Packaging</a>
        </p>
        <p class="auto-cursor-target" style="margin-left: 30.0px;"><a href="../../../documentation/package-sql-scripts-for-deployment/place-files-scm-repo/SQL_Server_Database_Objects_and_Packaging.htm">SQL Server Database Objects and Packaging</a>
        </p>
        <p class="auto-cursor-target"><a href="fixed-folder-names.htm" rel="nofollow">Fixed Folder Names</a>
        </p>
        <p class="auto-cursor-target"><a href="../configure-packaging/metadata-properties-file.htm" rel="nofollow">Using the metadata.properties file</a>
        </p>
        <p class="auto-cursor-target"><a href="../../../documentation/DDKB/pages/How_To__Choose_Between_CONVERT__ddl__and_DDL_DIRECT__ddl_direct__Packaging_Methods.htm">How To: Choose Between CONVERT (ddl) and DDL_DIRECT (ddl_direct) Packaging Methods</a>
        </p>
        <p class="auto-cursor-target"><a href="../../../documentation/DDKB/pages/What_is_the_difference_between__ddl__and__sql_direct___ddl_direct__folders_.htm">What is the difference between "ddl" and "sql_direct" folders?</a>
        </p>
        <p>
            <br />
        </p>
        <p>
            <br />
        </p>
    </body>
</html>