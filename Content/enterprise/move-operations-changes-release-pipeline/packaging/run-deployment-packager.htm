<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title>Liquibase Enterprise Documentation</title><meta name="description" content="Liquibase Enterprise Documentation" /></head>
    <body>
        <h1>Running Deployment Packager</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><MadCap:snippetBlock src="../../../Z_Resources/Snippets/enterprise/DBA.flsnp" /><h2>Running Deployment Packager from the CLI</h2> <p>In the CLI, the Deployment Packager is initiated by running <code><span style="color: rgb(0,0,10);">deployPackager.groovy</span></code>. The script has two main modes of action: packaging SQL scripts and parameters defined in a manifest file or packaging SQL scripts directly from an SCM repository.</p><p>The following sections show examples.&#160;&#160;</p><p>See also <a href="../../reference/CLI Deployment Packager.htm" rel="nofollow">CLI - Deployment Packager</a></p><h2 id="RunningDeploymentPackager-SCMModeExamples">SCM Mode Examples</h2><ul><li><span style="color: rgb(0,0,10);">Check the SCM repository for new files to process. The "preview" flag runs through processing without actually doing anything. It is useful when you're getting the SCM tool configured with Datical.</span></li></ul><p><code><span style="color: rgb(0,0,10);">hammer groovy deployPackager.groovy pipeline=pipeline_name scm=true [labels=&lt;comma separated list&gt;] <strong>preview</strong></span></code></p><ul><li><span style="color: rgb(0,0,10);">Check the SCM repository for new files, process them, and update the repository pointer (in the deployPackager.properties file) to mark the files as processed.</span></li></ul><p class="auto-cursor-target" style="margin-left: 60.0px;"><code><span>hammer groovy deployPackager.groovy pipeline=pipeline_name scm=true [labels=&lt;comma separated list&gt;] </span></code><span style="color: rgb(255,255,255);"><code>h</code>ammer groovy</span></p><ul><li><span style="color: rgb(0,0,10);">Check the SCM repository for new files, process them, and update the repository pointer to mark the files as processed. The quiet option suppresses all informational messages.</span></li></ul><p><code>hammer groovy deployPackager.groovy pipeline=pipeline_name scm=true [labels=&lt;comma separated list&gt;] <strong>quiet</strong></code></p><ul><li><span style="color: rgb(0,0,10);">When employing <em>FEATURE BASED MERGE MODE</em>, run the script with a <strong><code>dbdef=&lt;dbdef_name&gt;</code></strong> parameter that targets a specific database definition within a project. For more information on this mode see <a href="../../package-sql-scripts-for-deployment/sql-code-branch-merge-advnc.htm" rel="nofollow">SQL Code Branching &amp; Merging (Advanced)</a></span><span style="color: rgb(0,0,10);">.</span></li></ul><p><code><span style="color: rgb(0,0,10);">hammer groovy deployPackager.groovy <strong>dbdef=&lt;dbdef_name&gt;</strong> scm=true [labels=&lt;comma separated list&gt;]</span></code></p><ul><li>Example command that can be used at the command line or in a Jenkins job. Note that the value passed for <code>--projectKey</code>&#160;is actually the project name and not the project key from DMC.</li></ul><p><code><span style="color: rgb(0,0,10);">hammer groovy deployPackager.groovy&#160;pipeline=<strong>pipeline_name</strong> scm=true --daticalServer=<strong>dmc_server_url</strong> --daticalUsername=<strong>user_name</strong> --projectKey=<strong>project_name</strong></span></code></p><p><br /></p><h2 id="RunningDeploymentPackager-ManifestModeExamples">Manifest Mode Examples</h2><ul><li><span style="color: rgb(0,0,10);">Process the SQL files listed in the manifest file. The "preview" flag runs through processing without actually processing SQL scripts. It is useful for validating the manifest file when getting your system configured.</span></li></ul><p><code><span style="color: rgb(0,0,0);">hammer groovy deployPackager.groovy pipeline_name manifest=&lt;file.json&gt; [labels=&lt;comma separated list&gt;] <strong>preview</strong></span></code></p><ul><li><span style="color: rgb(0,0,10);">Process the SQL files listed in the manifest file.</span></li></ul><p><code><span style="color: rgb(0,0,0);"> hammer groovy deployPackager.groovy pipeline_name manifest=&lt;file.json&gt; [labels=&lt;comma separated list&gt;]</span></code></p><ul><li><span style="color: rgb(0,0,10);">Process the SQL files listed in the manifest file. The quiet option suppresses all informational messages.</span></li></ul><p><code><span style="color: rgb(0,0,0);">hammer groovy deployPackager.groovy_name manifest=&lt;file.json&gt; [labels=&lt;comma separated list&gt;] <strong>quiet</strong></span></code></p><h2>Running Deployment Packager from the <MadCap:variable name="General.DaticalDB" /> GUI</h2> <p>The <MadCap:variable name="General.DaticalDB" /> GUI provides a guided wizard that allows you to: execute the Deployment Packager in SCM Mode; define &amp; edit manifests; and execute the Deployment Packager in Manifest Mode. Refer to the screenshots and descriptions below to familiarize yourself with the wizard.</p><h3>Launching the Deployment Packager Wizard</h3><p>To launch the Deployment Packager Wizard, select the Deployment Pipeline you wish to work in using the control highlighted in blue and click the 'Deployment Packager' button highlighted in red.</p><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="479" width="671" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/896570205/worddav1ecac591aadbcca80589a04a42bee891.png?version=1&amp;modificationDate=1569858671440&amp;cacheVersion=1&amp;api=v2&amp;width=671&amp;height=478" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/896570205/worddav1ecac591aadbcca80589a04a42bee891.png?version=1&amp;modificationDate=1569858671440&amp;cacheVersion=1&amp;api=v2&amp;width=900&amp;height=642 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/896570205/worddav1ecac591aadbcca80589a04a42bee891.png?version=1&amp;modificationDate=1569858671440&amp;cacheVersion=1&amp;api=v2&amp;width=671&amp;height=478 1x" /></span></p><h3>Deployment Packager Wizard Overview</h3><h4>Selecting Execution Mode and Runtime settings</h4><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="600" width="510" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/896570205/worddav1f13465b063daa5ecb11352251103d6c.png?version=1&amp;modificationDate=1569858671786&amp;cacheVersion=1&amp;api=v2&amp;width=510&amp;height=600" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/896570205/worddav1f13465b063daa5ecb11352251103d6c.png?version=1&amp;modificationDate=1569858671786&amp;cacheVersion=1&amp;api=v2&amp;width=646&amp;height=760 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/896570205/worddav1f13465b063daa5ecb11352251103d6c.png?version=1&amp;modificationDate=1569858671786&amp;cacheVersion=1&amp;api=v2&amp;width=510&amp;height=600 1x" /></span><br />The initial page of the wizard allows you to select your desired activity and set runtime parameters prior to executing the Deployment Packager. Areas to note:</p><ol><li><strong>Onboarding Method –</strong> Select whether you'd like to operate in SCM mode, create a new manifest file or load an existing manifest file.<ol><li><strong>Deployment Step Selector –</strong> When using a Feature Merge, you may select a specific database definition in the current pipeline against which to run the Deployment Packager. The default selection "Current Pipeline" will run against the reference database for this pipeline. The reference database is assumed to be the first database definition in the current pipeline.</li></ol></li><li><strong>Runtime Parameters</strong><ol><li><strong>Labels &amp; Contexts</strong> Assign any additional labels or contexts you'd like to associate with ALL change sets generated by this execution of the Deployment Packager. NOTE: This information isn't saved anywhere, so if the wizard is closed prior to execution these label and context values will need to be reconfigured.</li><li><strong>Preview Mode</strong> Checking this box prior to executing the Deployment Packager will confirm that the current configuration will lead to a successful packaging attempt. This is useful when you are first configuring a new Project to employ the Deployment Packager OR when you are authoring a new manifest file.</li></ol></li><li><strong>Navigation Buttons</strong><ol><li><strong>&lt; Back –</strong> Never enabled on this page.</li><li><strong>Next &gt; -</strong> Enabled when either 'Create New Manifest' or 'Specify Existing Manifest File' is specified. This takes you to the Manifest File Editor portion of this wizard.</li><li><strong>Run –</strong> Enabled when 'Source Code Management Integration' or 'Specify an Existing Manifest File' is enabled. This will execute the Deployment Packager according to the current settings.</li><li><strong>Cancel –</strong> Closes the Deployment Packager wizard without doing anything.</li></ol></li></ol><h4>Manifest File Overview Page</h4><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="461" width="672" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/896570205/worddav2ea32ad84ee8ce26946c0cae3932d6d4.png?version=1&amp;modificationDate=1569858671255&amp;cacheVersion=1&amp;api=v2&amp;width=672&amp;height=459" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/896570205/worddav2ea32ad84ee8ce26946c0cae3932d6d4.png?version=1&amp;modificationDate=1569858671255&amp;cacheVersion=1&amp;api=v2&amp;width=900&amp;height=616 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/896570205/worddav2ea32ad84ee8ce26946c0cae3932d6d4.png?version=1&amp;modificationDate=1569858671255&amp;cacheVersion=1&amp;api=v2&amp;width=672&amp;height=459 1x" /></span><br />After selecting one of the Manifest File options on the first page of the wizard and clicking 'Next&gt;' you are taken to the Manifest File Overview. This page allows you to:</p><ol><li>Add/Remove File Groups in the manifest.</li><li>Launch the File Group Editor to define a File Group</li><li>Control in what order File Groups are processed during Deployment Packager execution by selecting a File Group in the table able using the 'Move Up' and 'Move Down' buttons</li><li>Save the manifest to the Resources directory of the project for later editing or execution</li></ol><h4>File group Editor dialog</h4><p><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="465" width="672" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/896570205/worddav31bf34609c0623aa7e0ea3a34bbd013c.png?version=1&amp;modificationDate=1569858671074&amp;cacheVersion=1&amp;api=v2&amp;width=672&amp;height=463" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/896570205/worddav31bf34609c0623aa7e0ea3a34bbd013c.png?version=1&amp;modificationDate=1569858671074&amp;cacheVersion=1&amp;api=v2&amp;width=900&amp;height=621 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/896570205/worddav31bf34609c0623aa7e0ea3a34bbd013c.png?version=1&amp;modificationDate=1569858671074&amp;cacheVersion=1&amp;api=v2&amp;width=672&amp;height=463 1x" /></span><br />Clicking the 'Add File Group' or 'View/Edit File Group' buttons on the Manifest File Overview page will launch the File Group Editor. In this dialog you will be able to:</p><ol><li>Specify the file name, rollback file name, file type, author and comments for one or more SQL scripts to be packaged.</li><li>Remove previously defined files from the File Group</li><li>Control the order in which those scripts are executed within that File Group</li><li>Specify Labels and Contexts to be applied to all change sets generated by files in the File Group</li></ol><h4>Running&#160;the Deployment Packager from the Wizard</h4><p>Once you have selected the SCM Integration method or defined and saved a valid Manifest File, the wizard's <strong>Run</strong> button will be enabled.</p><p>Click <strong>Run</strong> to start the Deployment Packager.</p><p>Progress information is shown in an <strong>Executing Script</strong> window.<br /><br /><span class="confluence-embedded-file-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image" height="555" width="546" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/896570205/worddavd7bed9aca8d2820e9598450c7e926a74.png?version=1&amp;modificationDate=1569858671612&amp;cacheVersion=1&amp;api=v2&amp;width=546&amp;height=555" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/896570205/worddavd7bed9aca8d2820e9598450c7e926a74.png?version=1&amp;modificationDate=1569858671612&amp;cacheVersion=1&amp;api=v2&amp;width=682&amp;height=694 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/896570205/worddavd7bed9aca8d2820e9598450c7e926a74.png?version=1&amp;modificationDate=1569858671612&amp;cacheVersion=1&amp;api=v2&amp;width=546&amp;height=555 1x" /></span></p><p><br /></p></body>
</html>