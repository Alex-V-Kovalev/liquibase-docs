<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <link href="../../../../../../DMCKnowledgeBase/DMC-Documentation/Content/Z_Resources/Stylesheets/TableStyles.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <link href="../../../../Z_Resources/Stylesheets/MainStyles.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <h1><MadCap:variable name="General.DMCProductShortName" /> production mode</h1>
        <h2>Production mode system requirements</h2>
        <table style="width: 100%;mc-table-style: url('../../../../../../DMCKnowledgeBase/DMC-Documentation/Content/Z_Resources/Stylesheets/TableStyles.css');" class="TableStyle-TableStyles" cellspacing="0">
            <col />
            <col />
            <thead>
                <tr class="TableStyle-TableStyles-Head-Header1">
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">System requirements</th>
                    <th class="TableStyle-TableStyles-HeadD-Column1-Header1">Minimum configuration</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Operating system</td>
                    <td>
                        <p><a href="https://access.redhat.com/products/red-hat-enterprise-linux">RHEL 7 or 8</a> or <a href="https://www.centos.org/download/">CentOS 7 or 8</a></p>
                        <MadCap:snippetBlock src="../../../../Z_Resources/Snippets/dmc/rhel-centos-8.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td>CPU</td>
                    <td>4 vCPU</td>
                </tr>
                <tr>
                    <td>Memory</td>
                    <td>16 GB of RAM</td>
                </tr>
                <tr>
                    <td>Disk space</td>
                    <td>40 GB</td>
                </tr>
                <tr>
                    <td>Database</td>
                    <td>
                        <p><a href="https://www.postgresql.org/download/">PostgreSQL 10, 11, 12, or 13</a> (Community or <a href="https://aws.amazon.com/rds/postgresql/">AWS RDS</a>) </p>
                        <MadCap:snippetBlock src="../../../../Z_Resources/Snippets/enterprise/postgresql-12-13.flsnp" />
                        <p><![CDATA[                   ]]></p>
                    </td>
                </tr>
                <tr>
                    <td>Open ports</td>
                    <td class="TableStyle-TableStyles-BodyA-Column1-Body2"> <code>80</code>, <code>443</code>, and <code>8080</code></td>
                </tr>
            </tbody>
        </table>
        <h2>Calculating external PostgreSQL DB requirements</h2>
        <p>Administrators can use this requirements section as a guide  to evaluate your server hardware requirements. Because server load is difficult to predict, live testing is the best way to determine what hardware the <MadCap:variable name="General.DMCProductShortName" /> will require in production.</p>
        <h3>Database server requirements</h3>
        <table style="width: 100%;mc-table-style: url('../../../../../../DMCKnowledgeBase/DMC-Documentation/Content/Z_Resources/Stylesheets/TableStyles.css');" class="TableStyle-TableStyles" cellspacing="0">
            <col />
            <col />
            <col />
            <thead>
                <tr class="TableStyle-TableStyles-Head-Header1">
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">System requirements</th>
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">Minimum configuration</th>
                    <th class="TableStyle-TableStyles-HeadD-Column1-Header1">Recommended configuration</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>PostgresSQL Version</td>
                    <td><a href="https://www.postgresql.org/download/">PostgreSQL 10, 11, 12, or 13</a> (Community or <a href="https://aws.amazon.com/rds/postgresql/">AWS RDS</a>) </td>
                    <td><a href="https://www.postgresql.org/download/">PostgreSQL 10, 11, 12, or 13</a> (Community or <a href="https://aws.amazon.com/rds/postgresql/">AWS RDS</a>) </td>
                </tr>
                <tr>
                    <td>CPU</td>
                    <td>2 vCPU</td>
                    <td>4 vCPU</td>
                </tr>
                <tr>
                    <td class="TableStyle-TableStyles-BodyB-Column1-Body1">Memory</td>
                    <td class="TableStyle-TableStyles-BodyB-Column1-Body1">8 GB</td>
                    <td class="TableStyle-TableStyles-BodyA-Column1-Body1">16 GB</td>
                </tr>
            </tbody>
        </table>
        <MadCap:snippetBlock src="../../../../Z_Resources/Snippets/enterprise/postgresql-12-13.flsnp" />
        <h3>Database storage requirements</h3>
        <table style="width: 100%;mc-table-style: url('../../../../../../DMCKnowledgeBase/DMC-Documentation/Content/Z_Resources/Stylesheets/TableStyles.css');" class="TableStyle-TableStyles" cellspacing="0">
            <col />
            <col />
            <col />
            <col />
            <thead>
                <tr class="TableStyle-TableStyles-Head-Header1">
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">Steps or database definitions managed</th>
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">Forecast &amp; deploy operations per year (Including deploy packager)</th>
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">Total changeSets across all projects</th>
                    <th class="TableStyle-TableStyles-HeadD-Column1-Header1">Minimum database storage capacity</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>50</td>
                    <td>1000</td>
                    <td>5000</td>
                    <td>10 GB</td>
                </tr>
                <tr>
                    <td>50</td>
                    <td>500</td>
                    <td>10000</td>
                    <td>15 GB</td>
                </tr>
                <tr>
                    <td>100</td>
                    <td>2000</td>
                    <td>10000</td>
                    <td>
                        <p>30 GB</p>
                    </td>
                </tr>
                <tr>
                    <td>100</td>
                    <td>1000</td>
                    <td>25000</td>
                    <td>60 GB</td>
                </tr>
                <tr>
                    <td>250</td>
                    <td>5000</td>
                    <td>25000</td>
                    <td>150 GB</td>
                </tr>
                <tr>
                    <td>250</td>
                    <td>2500</td>
                    <td>50000</td>
                    <td>300 GB</td>
                </tr>
                <tr>
                    <td>500</td>
                    <td>10000</td>
                    <td>50000</td>
                    <td>600 GB</td>
                </tr>
                <tr>
                    <td>500</td>
                    <td>5000</td>
                    <td>100000</td>
                    <td class="TableStyle-TableStyles-BodyA-Column1-Body2">1.5 TB</td>
                </tr>
            </tbody>
        </table>
        <h2>Pre-install requirements</h2>
        <p>Aside from a <a href="https://www.postgresql.org/download/">PostgreSQL 10, 11, 12, or 13</a> database or <a href="https://aws.amazon.com/rds/postgresql/">AWS RDS</a>, the  <MadCap:variable name="General.DMCProductShortName" /> also requires the following:</p>
        <ol>
            <li>A non-root user with <code>sudo</code> access.</li>
        </ol>
        <MadCap:snippetBlock src="../../../../Z_Resources/Snippets/dmc/user-group-setup.flsnp" />
        <ol MadCap:continue="true">
            <li>On the provisioned machine, ensure that the following ports are opened: <code>80</code> and <code>443</code>. Also, ensure no other applications are using the ports on the local system.</li>
        </ol>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;"><code>80</code> and <code>443</code> are internal and external ports for a production mode. Internal and external ports for PostgreSQL depend on your PostgreSQL database. </p>
        <h2>PostgreSQL database setup</h2>
        <p>To set up your PostgreSQL database, login to the postgreSQL server and perform the following steps:</p>
        <ol>
            <li>Switch to postgres user and invoke PSQL with the following commands:</li><pre><code class="language-html">-bash-4.2$ sudo su - postgres
-bash-4.2$ psql</code></pre>
            <li>Create a new database by running the following commands:</li><pre xml:space="preserve"><code class="language-html">postgres=# 
postgres=# create database &lt;DMCDB_NAME&gt;;
CREATE DATABASE
postgres=#
postgres-#</code></pre>
            <li>Create your user and permissions by running the following commands:</li><pre xml:space="preserve"><code class="language-html">postgres=# create user dmcuser with
LOGIN
NOSUPERUSER
INHERIT
NOCREATEDB
NOCREATEROLE
NOREPLICATION
CONNECTION LIMIT -1
PASSWORD '&lt;dmcuser_password&gt;';
grant dmcuser to postgres;</code></pre>
            <li>Configure your <MadCap:variable name="General.DMC DB" />:</li><pre xml:space="preserve"><code class="language-html"># Connect to your database as postgres
sudo su - postgres
psql &lt;DB_NAME&gt;
GRANT CREATE, CONNECT, TEMPORARY ON DATABASE &lt;DB_NAME&gt; TO dmcuser WITH GRANT OPTION;
create schema datical;
alter schema datical owner to dmcuser;
ALTER ROLE dmcuser IN DATABASE &lt;DB_NAME&gt; SET search_path TO datical;</code></pre>
            <li>Get <code>PATH</code> to <code>postgresql.conf</code> and <code>pg_hba.conf</code> files by running the following commands:</li><pre><code class="language-html">postgres=# 
postgres=# SHOW config_file;
config_file               
----------------------------------------
/var/lib/pgsql/10/data/postgresql.conf
(1 row)</code></pre>
            <li>Edit <code>pg_hba.conf</code> by adding the last line shown below. It is in the same location as <code>postgresql.conf</code>.</li>
        </ol>
        <p style="text-align: center;">
            <img src="../../../../Z_Resources/Images/Assets/Screenshots/Install/postgres-setup.png" title="" alt="image of the pg_hba.conf in postgresql" />
        </p>
        <ol MadCap:continue="true">
            <li>Reload the configuration by running the following commands:</li><pre><code class="language-html">-bash-4.2$ pg_ctl reload</code></pre>
            <li>Edit <code>postgresql.conf</code> and add the following line:</li><pre><code class="language-html">listen_addresses = '*'</code></pre>
        </ol>
        <p style="text-align: center;">
            <img src="../../../../Z_Resources/Images/Assets/Screenshots/Install/postgres-image.png" title="" alt="Image of the postgreSQL database connections and authentication settings" />
        </p>
        <p style="text-align: center;">An example screenshot from a server</p>
        <ol MadCap:continue="true">
            <li>Restart the postgreSQL service by running the following command:</li><pre><code class="language-html">-bash-4.2$ pg_ctl restart</code></pre>
            <li>Test the connection to the database by running the following command:</li><pre xml:space="preserve"><code class="language-html">psql --host=&lt;HOSTNAME&gt; --port=5432 --username=&lt;DMC_USER&gt; --password --dbname=&lt;DB_NAME&gt;</code></pre>
        </ol>
        <p><b>NEXT UP:</b> Choose one of our <MadCap:xref href="production-install-methods.htm">Production mode installation methods</MadCap:xref>.</p>
        <h3>Related links</h3>
        <ul>
            <li>
                <MadCap:xref href="../../troubleshoot/dmc-sudo-commands.htm">[%=General.DMCProductShortName%] sudo Commands</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="../uninstall.htm">Uninstalling the [%=General.DMCProductShortName%]</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="../../configure/database-config/validate-ext-database-content.htm">Validating external database content</MadCap:xref>
            </li>
        </ul>
    </body>
</html>