<?xml version="1.0" encoding="utf-8"?>
<html>
    <head><title></title>
    </head>
    <body>
        <h1>General Troubleshooting</h1>
        <p />
        <div class="toc-macro client-side-toc-macro  conf-macro output-block"></div>
        <h1 id="GeneralTroubleshooting-AccessingDaticalService">Accessing Datical Service</h1>
        <h2 id="GeneralTroubleshooting-CannotAccessDaticalService-defaultbackend404">Cannot Access Datical Service - default backend 404</h2>
        <p class="auto-cursor-target"><em>Symptom</em>
        </p>
        <p class="auto-cursor-target">When using a Datical Service URL in a browser or in a hammer command (deploy, forecast, status), you get the following message:</p>
        <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
            <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">default backend - 404</pre>
            </div>
        </div>
        <p><em>Causes</em>
        </p>
        <ul>
            <li>Incorrect URL<ul><li>&lt;datical-cluster&gt; name is wrong</li><li>used a hostname instead of the cluster name</li><li>used an IP address instead of the cluster name</li></ul></li>
            <li>Cluster name is not mapping to an IP address</li>
            <li>DNS mapping has changed.&#160;</li>
        </ul>
        <p><em>Resolutions</em>
        </p>
        <ul>
            <li>Use the correct cluster name (not a hostname or IP address)</li>
            <li>
                <p class="auto-cursor-target">Reset the cluster name and map it to a valid IP address (or addresses)</p>
                <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
                    <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">datical-control network set-cluster-hostname &lt;cluster-name&gt;</pre>
                    </div>
                </div>
            </li>
            <li>Adjust hosts file so that cluster name resolves to a valid IP address</li>
        </ul>
        <h1 id="GeneralTroubleshooting-ExcessiveDiskSpaceConsumption">Excessive Disk Space Consumption</h1>
        <h2 id="GeneralTroubleshooting-GlusterFSLogs">GlusterFS Logs</h2>
        <p><em>Symptom</em>
        </p>
        <p>Disk runs out of space for logging (<code>/var/log</code>&#160;by default)</p>
        <p><em>Cause</em>
        </p>
        <p>By default the logging for the GlusterFS includes verbose message. Logs are in&#160; (<code>/var/log/glusterfs.</code></p>
        <p><em>Resolution</em>
        </p>
        <p>Set the log level for cluster-data and cluster-config to WARNING or ERROR.&#160;</p>
        <p>Remove the unneeded logs from <code>/var/log/glusterfs</code>.</p>
        <p>The following examples set the log level to WARNING:</p>
        <ul>
            <li>
                <p class="auto-cursor-target">cluster-data</p>
                <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
                    <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">sudo datical-control gluster glusterctl  volume set cluster-data  diagnostics.brick-log-level WARNING</pre>
                    </div>
                </div>
            </li>
            <li>
                <p class="auto-cursor-target">cluster-config</p>
                <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
                    <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">sudo datical-control gluster glusterctl  volume set cluster-config diagnostics.brick-log-level WARNING</pre>
                    </div>
                </div>
            </li>
        </ul>
        <p>
            <br />
        </p>
        <p>
            <br />
        </p>
        <h1 id="GeneralTroubleshooting-Long-runningOperations">Long-running Operations</h1>
        <p>Operations register with Datical Service. The table of currently running commands is available to you through <strong>Admin &gt; Active Operations</strong>.</p>
        <p>If a command never completes, use <strong>Clear</strong> to remove its registration.&#160;</p>
        <p>Commands normally clean up their registration entry. However, the following conditions might prevent the operations from finishing cleanly:</p>
        <ul>
            <li>Administrator cancels the operation in the Datical Service Jenkins container (not recommended).&#160;</li>
            <li>Jenkins service terminates abnormally</li>
            <li>Catastrophic failure (power and network outages)</li>
        </ul>
        <h1 id="GeneralTroubleshooting-HammerCommands">Hammer Commands</h1>
        <p>Hammer commands are run on an installation of Datical DB, either manually through the CLI or through an automation.&#160;</p>
        <h3 id="GeneralTroubleshooting-PermGenSpaceoutofmemory"><span style="color: rgb(23,43,77);">PermGen Space out of memory</span>
        </h3>
        <p><span style="color: rgb(23,43,77);">Encountered when running a hammer command (notably <code>hammer groovy deployPackager.groovy</code>)</span>
        </p>
        <p><span style="color: rgb(23,43,77);"><strong>Solution</strong>: edit <code>hammer.bat. Change the </code>SET VMARGS<code> line</code>&#160;and add options to increase the memory allocation as shown.&#160;</span>
        </p>
        <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
            <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">SET VMARGS -XX:MaxPermSize=256M -Xmx1024m11</pre>
            </div>
        </div>
        <p>
            <br />
        </p>
        <p>
            <br />
        </p>
        <p>
            <br />
        </p>
    </body>
</html>