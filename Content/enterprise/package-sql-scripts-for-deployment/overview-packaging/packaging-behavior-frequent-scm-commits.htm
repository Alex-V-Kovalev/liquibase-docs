<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title>Liquibase Enterprise Documentation</title><meta name="description" content="Liquibase Enterprise Documentation /></head>
    <body>
        <h1>Packaging Behavior with Frequent SCM Commits</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><h1 id="PackagingBehaviorwithFrequentSCMCommits-SinglePackagingJob">Single Packaging Job</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><p>When a single packaging job is triggered by a single commit, packaging tasks are performed in linear order.&#160;</p><ol><li>Check out from SCM<ul><li>Project file</li><li>SQL scripts included in a commit</li></ul></li><li>Package each script</li><li>Deploy changes to the REF database</li><li>Commit changes to SCM<ul><li>Project file</li><li>SQL scripts included in a commit</li></ul></li><li>Update sqlSCMLastChangeID</li></ol><h1 id="PackagingBehaviorwithFrequentSCMCommits-PackagingJobsatSpeed">Packaging Jobs at Speed</h1> <MadCap:snippetText src="../../../Resources/Snippets/images/.ver_icon_size_enterprise.flsnp" /><p>Packaging scales correctly under load. As you scale up the number of developers who commit code on a project and the number of commits over time, packaging jobs do the right thing when multiple commits are performed. In a CI/CD setup, the SCM is set up so that a commit triggers a packaging job. in the following example, consider what happens when commits 2 and 3 are performed before packaging job 1 gets to the point of reading the SCM for commit 1.&#160;</p><ol><li>Commit triggers packaging job 1&#160;<ul><li>SQLfile_A.sql</li><li>SQLfile_B.sql</li></ul></li><li>Commit triggers packaging job 2<ul><li>SQLfile_A.sql</li><li>SQLfile_C.sql</li></ul></li><li>Commit triggers packaging job 3<ul><li>SQLfile_A.sql</li></ul></li></ol><p>Q: <em>What happens when the commits for packaging jobs 2 and 3 come in so fast that packaging job 1 finds both later commits for SQLfile_A.sql?&#160;</em></p><p>A: Packaging job 1 picks up commits made since the last&#160;<strong>sqlScmLastImportID</strong>. If other commits were made between the start of the packaging job and the time it reads the SCM, those commits are picked up too.&#160;</p><p>Q: <em>In the example what do packaging jobs 2 and 3 do in response to SQLfile_A.sql?</em></p><p>A: If a packaging job is run after a commit's changes have been packaged, it updates the pipeline label and then ends. In the example, if packaging job 1 picks up all the commits, then subsequent packaging jobs perform the following actions:</p><ul><li>Packaging job 2 packages SQLfile_C.sql but only updates the pipeline label for SQLfile_A.sql</li><li>Packaging job 3 only updates&#160; the pipeline label for SQLfile_A.sql</li></ul><p><br /></p><p>NOTE: You should only run one deploy packager job at a time for each <MadCap:variable name="General.DaticalDB" /> project.&#160; Do not run multiple simultaneous packager jobs for the same <MadCap:variable name="General.DaticalDB" /> project.</p><p><br /></p><p><br /></p><p><br /></p><p><br /></p><p><br /></p></body>
</html>