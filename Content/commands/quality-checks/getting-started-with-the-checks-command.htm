<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title>Getting Started with the checks Command | Liquibase Docs</title>
        <meta rel="canonical" href="https://docs.liquibase.com/concepts/advanced/getting-started-with-the-checks-command.html" />
        <meta name="description" content="Get started with the quality checks commands. Use the Liquibase checks command to build quality, security, and compliance into your database development workflow." />
    </head>
    <body>
        <h1>Getting Started with the <code>checks</code> Command</h1>
        <p>To build quality, security, and compliance into your database development workflow, start using the <MadCap:variable name="General.Liquibase" /> <code>checks</code> command. You can execute <MadCap:variable name="General.Liquibase" /> checks against a <MadCap:variable name="General.changelog" style="font-style: italic;" /> and customize the <code>checks</code> configuration to catch specific scenarios.</p>
        <h2>Prerequisites</h2>
        <p class="tip" MadCap:autonum="&lt;b&gt;Tip: &lt;/b&gt;">If you are new to <MadCap:variable name="General.Liquibase" />, you can follow the <a href="https://www.liquibase.org/get-started/quickstart">Quickstart Guide</a> first.</p>
        <p>Ensure you use <MadCap:variable name="General.Liquibase" /> 4.5.0 or later.</p>
        <h2>Step 1: Running checks against your <MadCap:variable name="General.changelog" style="font-style: italic;" /> with the default configuration</h2>
        <p>The quality checks capability supports all <MadCap:variable name="General.changelog" style="font-style: italic;" /> formats.  This instruction includes a formatted SQL <MadCap:variable name="General.changelog" style="font-style: italic;" />.  If you want to use your own <MadCap:variable name="General.changelog" style="font-style: italic;" />, example output may differ.</p>
        <ol>
            <li>Create a new <code>changelog.sql</code> file and add the following:</li><pre><code class="language-text">--liquibase formatted sql
				
--changeset your.name:1 labels:v0 context:all
create table person (
	id int primary key,
	name varchar(50) not null,
	address1 varchar(50),
	address2 varchar(50),
	city varchar(30)
)
				
--changeset your.name:2 labels:v0 context:all
create table company (
	id int primary key,
	name varchar(50) not null,
	address1 varchar(50),
	address2 varchar(50),
	city varchar(30)
)
				
--changeset other.dev:3 labels:v0 context:all
alter table person add column country varchar(2)

--changeset other.dev:4 labels:v0 context:all
drop table person;</code></pre>
            <li>Open your CLI and navigate to the directory with the <MadCap:variable name="General.changelog" style="font-style: italic;" /> file you will use. Start by executing checks against the sample <MadCap:variable name="General.changelog" style="font-style: italic;" /> file using the default configuration provided by <MadCap:variable name="General.Liquibase" />:</li><pre><code class="language-text">liquibase checks run</code></pre>
            <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">You will be prompted to create a new configuration file for checks if one does not already exist.</p>
        </ol>
        <p>If you use the sample <MadCap:variable name="General.changelog" style="font-style: italic;" /> provided in the instruction, you may notice that the last <MadCap:variable name="General.changeset" style="font-style: italic;" /> in <code>changelog.sql</code> contains a drop table statement, which is flagged by one of the checks in the default configuration.</p><pre><code class="language-text">Executing Quality Checks against changelog.sql
No valid Liquibase Pro license key detected!
Unlock unlimited checks with a free Pro license Key from https://liquibase.com/protrial
Execution limited to 5 checks.
Checks completed validation of the changelog and found the following issues:
Changeset ID:       4
Changeset Filepath: changelog.sql
Check Name:         Warn when 'DROP TABLE' detected (ChangeDropTableWarn)
Message:            Liquibase recommends that changesets which result in tables
					being dropped are reviewed carefully to prevent the
					unintentional loss of data.  Review this changeset to
					confirm that the referenced table is being dropped safely.

Changesets Validated:
  ID: 1; Author: your.name; File path: changelog.sql
  ID: 2; Author: your.name; File path: changelog.sql
  ID: 3; Author: other.dev; File path: changelog.sql
  ID: 4; Author: other.dev; File path: changelog.sql

Checks run against each changeset:
  Warn on Detection of 'GRANT' Statements
  Warn on Detection of 'REVOKE' Statements
  Warn when 'DROP TABLE' detected
  Warn when 'DROP COLUMN' detected
  Warn when 'MODIFY &lt;column&gt;' detected

Checks Skipped Due to Community Limit of 5 Checks:
  Check Table Column Count
  Changesets Must Have a Label Assigned
  Changesets Must Have a Context Assigned
  Changesets Must Have a Comment Assigned
				
Liquibase command 'checks run' was executed successfully.</code></pre>
        <h2>Step 2: Disabling checks in the default configuration</h2>
        <p>You can disable any checks  by using the <MadCap:xref href="checks-disable.htm">checks disable</MadCap:xref> command.</p>
        <p> To disable a check, you need to know the short name, which you can get by running the <MadCap:xref href="checks-show.htm">checks show</MadCap:xref> command. The <code>show</code> subcommand lists information and customization settings for available checks including the check’s full name, short name, description, enabled status, and customization options. The short name for the <code>DROP TABLE</code> check is <code>ChangeDropTableWarn</code>.  </p>
        <p>Then, run the name in the <code>--check-name</code> parameter with the <code>disable</code> subcommand:</p><pre><code class="language-text">liquibase checks disable --check-name=ChangeDropTableWarn</code></pre>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;"><MadCap:variable name="General.Liquibase" /> will save the configuration change to your checks configuration file (the default file is <code>liquibase.checks-settings.conf</code>) and print the configuration  again to show the change.</p>
        <p>If you execute the <code>checks run</code> command one more time, no issues will be detected.</p><pre><code class="language-text">Executing Quality Checks against changelog.sql
No valid Liquibase Pro license key detected!
Unlock unlimited checks with a free Pro license Key from https://liquibase.com/protrial
Execution limited to 5 checks.

Changesets Validated:
  ID: 1; Author: your.name; File path: changelog.sql
  ID: 2; Author: your.name; File path: changelog.sql
  ID: 3; Author: other.dev; File path: changelog.sql
  ID: 4; Author: other.dev; File path: changelog.sql

Checks run against each changeset:
  Warn on Detection of 'GRANT' Statements
  Warn on Detection of 'REVOKE' Statements
  Warn when 'DROP COLUMN' detected
  Warn when 'MODIFY &lt;column&gt;' detected
  Check Table Column Count
  Checks Skipped Due to Community Limit of 5 Checks:
  Changesets Must Have a Label Assigned
  Changesets Must Have a Context Assigned
  Changesets Must Have a Comment Assigned
				
Liquibase command 'checks run' was executed successfully.</code></pre>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">To enable a check, use the <MadCap:xref href="checks-enable.htm">checks enable</MadCap:xref> command.</p>
        <h2>Step 3: Creating and using a custom check</h2>
        <p>Some checks have customization options that allow you to adjust the parameters  used to determine whether a <MadCap:variable name="General.changeset" style="font-style: italic;" /> meets the criteria of the check.  You can adjust these parameters using the <MadCap:xref href="checks-copy.htm">checks copy</MadCap:xref> or <MadCap:xref href="checks-customize.htm">checks customize</MadCap:xref> command.</p>
        <ol>
            <li>Create a check that finds table truncation statements in a sample <MadCap:variable name="General.changelog" style="font-style: italic;" /> by generating a copy of the <code>SqlUserDefinedPatternCheck</code> check:</li><pre><code class="language-text">liquibase checks copy --check-name=SqlUserDefinedPatternCheck</code></pre>
        </ol>
        <ol start="2">
            <li>Provide a short name, search string, and message for your check:</li><pre><code class="language-text">Give your check a short name for easier identification (alpha-numeric characters only) (default "SqlUserDefinedPatternCheck1"):
SqlTruncateCheck
New check 'SqlTruncateCheck' created from 'SqlUserDefinedPatternCheck'

Set 'SEARCH_STRING' (current: 'null'):
(?i)^(\s*)(TRUNCATE)
Set 'MESSAGE' (current: 'A match for regular expression &lt;SEARCH_STRING&gt; was detected in Changeset &lt;CHANGESET&gt;.') (default "A match for regular expression &lt;SEARCH_STRING&gt; was detected in Changeset &lt;CHANGESET&gt;."):
Table truncation detected.  Review this changeset to ensure data is not unintentionally deleted.
Customization complete. Review the table below to confirm your changes.</code></pre>
            <p>Once you have completed the form, the checks configuration is printed for your review.</p>
        </ol>
        <ol start="3">
            <li>Add the following to the <code>changelog.sql</code> file and save your changes:</li><pre><code class="language-text">--changeset other.dev:4 labels:v0 context:all
truncate person;</code></pre>
        </ol>
        <ol start="4">
            <li>Execute the <code>checks run</code> subcommand again:</li><pre><code class="language-text">liquibase checks run</code></pre>
            <p>The new check indicates that there is an issue with your new <MadCap:variable name="General.changeset" style="font-style: italic;" />:</p><pre><code class="language-text">Checks completed validation of the changelog and found the following issues:
Changeset ID:       5
Changeset Filepath: changelog.sql
Check Name:         Check for specific patterns in sql (SqlUserDefinedPatternCheck)
Message:            Table truncation detected.  Review this changeset to ensure
                    data is not unintentionally deleted.</code></pre>
        </ol>
        <p>The following pages will help you proceed with all quality checks capabilities:</p>
        <ul>
            <li>
                <MadCap:xref href="home.htm">Quality Checks Commands</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="configuring-quality-checks.htm">Configuring  Quality Checks</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="using-the-checks-settings-configuration-file.htm">Using the Checks Settings Configuration File</MadCap:xref>
            </li>
            <li>
                <MadCap:xref href="using-quality-checks-in-automation-severity-and-exit-code.htm">Using Quality Checks in Automation: Severity and Exit Code</MadCap:xref>
            </li>
        </ul>
    </body>
</html>