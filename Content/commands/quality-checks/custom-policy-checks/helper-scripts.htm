<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.EXCLUDE">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <link rel="canonical" href="https://docs.liquibase.com/commands/quality-checks/custom-policy-checks/helper-scripts.html" />
        <meta name="description" content="Helper Scripts are Python scripts that can import additional functionality into Custom Policy Checks." />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <body>
        <MadCap:snippetBlock src="../../../Z_Resources/Snippets/images/icon-pro-top.flsnp" />
        <h1>Custom Policy Check Helper Scripts</h1>
        <p>Helper Scripts are Python scripts that can import additional functionality into <MadCap:xref href="home.htm">Custom Policy Checks</MadCap:xref>. When helper scripts are enabled within a custom policy check,  the check goes through all the <MadCap:variable name="General.changeset" />s that have not deployed and looks for the specific content set in the custom policy check. <MadCap:variable name="General.Liquibase" /> will then decide if the check fires or not depending on what is specified with the helper script. Without these helper scripts you would have to write your own code to retrieve the specific content they pull from your <MadCap:variable name="General.changeset" />s and databases. They significantly reduce the time it will take to find the information you are looking for.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">These helper scripts are included in the liquibase-checks extension.</p>
        <table style="width: 100%; margin-left: auto; margin-right: auto;">
            <caption style="font-weight: bold;">Compatible Versions</caption>
            <col />
            <col />
            <tbody>
                <tr>
                    <td>Python</td>
                    <td>3.10.14</td>
                </tr>
                <tr>
                    <td>GraalPy</td>
                    <td>24.0.0</td>
                </tr>
            </tbody>
        </table>
        <h2>Run a helper script</h2>
        <h3>Prerequisites</h3>
        <ul>
            <li>Optional:&#160;If you want in-IDE documentation and auto complete with your helper script, install the Python Package.</li>
        </ul>
        <h3>Step-by-step</h3>
        <ol>
            <li>Run <code>import liquibase_utilities</code> in the CLI.<br />Now the Python package that includes the helper scripts is activated.<br /></li>
            <li>Next you will call on a specific helper script.<br />In this example we will run <code>logger = liquibase_utilities.get_logger</code></li>
            <li>When the check runs it will retrieve any content it finds based on the criteria you asked for and display it in the CLI.</li>
        </ol>
        <h2>Methods to return <MadCap:variable name="General.Liquibase" /> <MadCap:variable name="General.changeset" /> attributes</h2>
        <table style="width: 100%;margin-left: auto;margin-right: auto;caption-side: top;">
            <col />
            <col />
            <col />
            <thead>
                <tr>
                    <th class="center">Function</th>
                    <th class="center">Definition</th>
                    <th class="center">Input Parameter</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="center"><code>get_author</code>
                    </td>
                    <td class="center">Returns the <MadCap:variable name="General.changeset" /> author</td>
                    <td class="center"><MadCap:variable name="General.changeset" />
                    </td>
                </tr>
                <tr>
                    <td class="center"><code>get_contexts</code>
                    </td>
                    <td class="center">Returns the <MadCap:variable name="General.changeset" /> contexts</td>
                    <td class="center"><MadCap:variable name="General.changeset" />
                    </td>
                </tr>
                <tr>
                    <td class="center"><code>get_file_path</code>
                    </td>
                    <td class="center">Returns the <MadCap:variable name="General.changeset" /> file path</td>
                    <td class="center"><MadCap:variable name="General.changeset" />
                    </td>
                </tr>
                <tr>
                    <td class="center"><code>get_id</code>
                    </td>
                    <td class="center">Returns the <MadCap:variable name="General.changeset" /> ID</td>
                    <td class="center"><MadCap:variable name="General.changeset" />
                    </td>
                </tr>
                <tr>
                    <td class="center"><code>get_labels</code>
                    </td>
                    <td class="center">Returns the <MadCap:variable name="General.changeset" /> labels</td>
                    <td class="center"><MadCap:variable name="General.changeset" />
                    </td>
                </tr>
                <tr>
                    <td class="center"><code>is_always_run</code>
                    </td>
                    <td class="center">Returns the <MadCap:variable name="General.changeset" /> alwaysRun value</td>
                    <td class="center"><MadCap:variable name="General.changeset" />
                    </td>
                </tr>
                <tr>
                    <td class="center"><code>is_run_on_change</code>
                    </td>
                    <td class="center">Returns the <MadCap:variable name="General.changeset" /> runOnChange value</td>
                    <td class="center"><MadCap:variable name="General.changeset" />
                    </td>
                </tr>
            </tbody>
        </table>
        <h2>Methods to return <MadCap:variable name="General.Liquibase" /> <MadCap:variable name="General.changeset" /> attributes</h2>
        <table style="width: 100%;margin-left: auto;margin-right: auto;caption-side: top;">
            <col />
            <col />
            <col />
            <thead>
                <tr>
                    <th class="center">Function</th>
                    <th class="center">Definition</th>
                    <th class="center">Input Parameter</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="center"><code>get_database_product_name</code>
                    </td>
                    <td class="center">Returns the database product name</td>
                    <td class="center">database</td>
                </tr>
                <tr>
                    <td class="center"><code>get_database_product_version</code>
                    </td>
                    <td class="center">Returns the database product version</td>
                    <td class="center">database</td>
                </tr>
                <tr>
                    <td class="center"><code>get_default_schema_name</code>
                    </td>
                    <td class="center">Returns the default schema for this database</td>
                    <td class="center">database</td>
                </tr>
                <tr>
                    <td class="center"><code>get_short_name</code>
                    </td>
                    <td class="center">Returns the database short name</td>
                    <td class="center">database</td>
                </tr>
            </tbody>
        </table>
        <h2>Methods to parse a JSON&#160;snapshot and return Dict objects</h2>
        <table style="width: 100%;margin-left: auto;margin-right: auto;caption-side: top;">
            <col />
            <col />
            <col />
            <thead>
                <tr>
                    <th class="center">Function</th>
                    <th class="center">Definition</th>
                    <th class="center">Input Parameter</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="center"><code>get_column</code>
                    </td>
                    <td class="center">Return the specified Column Dict object for a table</td>
                    <td class="center">
                        <p><code>snapshot</code>:     the snapshot to parse</p>
                        <p><code>  table_name</code>:   the name of the table to search for   </p>
                        <p><code>column_name</code>:  the name of the column to search for</p>
                    </td>
                </tr>
                <tr>
                    <td class="center"><code>get_column_size</code>
                    </td>
                    <td class="center">Return the specified Column's size</td>
                    <td class="center"><code>column</code>:   the Column Dict object</td>
                </tr>
                <tr>
                    <td class="center"><code>get_column_type_name</code>
                    </td>
                    <td class="center">Return the specified Column's type name</td>
                    <td class="center"><code>column</code>:   the Column Dict object</td>
                </tr>
                <tr>
                    <td class="center"><code>get_columns</code>
                    </td>
                    <td class="center">Return a list of Column Dict objects for a table</td>
                    <td class="center">
                        <p><code>snapshot</code>:   the snapshot to parse</p>
                        <p><code>table_name</code>: the name of the table to search for</p>
                    </td>
                </tr>
                <tr>
                    <td class="center"><code>get_indexes</code>
                    </td>
                    <td class="center">Return a List of Index Dict objects for a table</td>
                    <td class="center">
                        <p><code>snapshot</code>:   the snapshot to parse</p>
                        <p><code>table_name</code>: the name of the table to search for</p>
                    </td>
                </tr>
                <tr>
                    <td class="center"><code>get_primary_key</code>
                    </td>
                    <td class="center">Return a Primary Key Dict object for a table</td>
                    <td class="center">
                        <p><code>snapshot</code>:   the snapshot to parse</p>
                        <p><code>table_name</code>: the name of the table to search for</p>
                    </td>
                </tr>
                <tr>
                    <td class="center"><code>get_table</code>
                    </td>
                    <td class="center">Return a list of Table Dict objects</td>
                    <td class="center">
                        <p><code>snapshot</code>:   the snapshot to parse</p>
                        <p><code>table_name</code>: the name of the table to search for</p>
                    </td>
                </tr>
                <tr>
                    <td class="center"><code>get_tables</code>
                    </td>
                    <td class="center">Return a list of Table Dict objects</td>
                    <td class="center">
                        <p><code>snapshot</code>:   the snapshot to parse</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2>&#160;</h2>
    </body>
</html>