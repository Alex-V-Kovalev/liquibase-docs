<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
    </head>
    <body>
        <h1 id="liquibase-commands-diffchangelog"> <code>diffChangeLog</code> command</h1>
        <p>The <code class="highlighter-rouge">diffChangeLog</code> command provides you with:</p>
        <ul>
            <li>Information containing differences between two databases; specifically, the <code class="highlighter-rouge">diffChangeLog</code> command points out the differences in general and generates changes to resolve most of them.</li>
            <li>A <em><MadCap:variable name="General.changelog" /></em> file containing deployable <em><MadCap:variable name="General.changeset" />s</em>.</li>
        </ul>
        <h2 id="uses">Uses</h2>
        <p>The <code class="highlighter-rouge">diffChangeLog</code> command is typically used when you want to create a deployable <em><MadCap:variable name="General.changelog" /></em> to synchronize multiple databases. The <code class="highlighter-rouge">diffChangeLog</code> command also provides more information about:</p>
        <ul>
            <li>Missing objects in your database</li>
            <li>Changes made to your database</li>
            <li>Unexpected items in your database</li>
        </ul>
        <h2 id="running-the-diffchangelog-command">Running the <code>diffChangeLog</code> command</h2>
        <p>To create a diff <em><MadCap:variable name="General.changelog" /></em>:</p>
        <ul>
            <li>The first option is to run the <code class="highlighter-rouge">diffChangeLog</code> command and pass the parameters needed for your source database and target database.</li>
        </ul>
        <p>As an example you can run the following:</p>
        <figure class="highlight"><pre xml:space="preserve"><code class="language-bash" data-lang="bash">liquibase
<span class="nt">--changeLogFile</span><span class="o">=</span>dbchangelog.xml
<span class="nt">--outputFile</span><span class="o">=</span>mydiff.txt
<span class="nt">--driver</span><span class="o">=</span>oracle.jdbc.OracleDriver
<span class="nt">--classpath</span><span class="o">=</span>ojdbc14.jar
<span class="nt">--url</span><span class="o">=</span><span class="s2">"jdbc:oracle:thin:@&lt;IP OR HOSTNAME&gt;:&lt;PORT&gt;:&lt;SERVICE NAME OR SID&gt;"</span>  
<span class="nt">--username</span><span class="o">=</span>&lt;USERNAME&gt;
<span class="nt">--password</span><span class="o">=</span>&lt;PASSWORD&gt;diffChangeLog
<span class="nt">--referenceUrl</span><span class="o">=</span><span class="s2">"jdbc:oracle:thin:@&lt;IP OR HOSTNAME&gt;:&lt;PORT&gt;:&lt;SERVICE NAME OR SID&gt;"</span>  
<span class="nt">--referenceUsername</span><span class="o">=</span>&lt;USERNAME&gt;
<span class="nt">--referencePassword</span><span class="o">=</span>&lt;PASSWORD&gt;</code></pre>
        </figure>
        <p>See the <MadCap:xref href="snapshot.html">snapshot command</MadCap:xref> topic for an example of using a snapshot file as one of the databases being used in the command.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">When running <code class="highlighter-rouge">diffChangeLog</code> against two different databases, the class path property should reference both .jar files. Use the path separator that is correct for your operating system (a semicolon on Windows, a colon on Mac or Linux). Example: <code class="highlighter-rouge">classpath: ojdbc7.jar:postgresql-42.2.8.jar</code></p>
        <ul>
            <li>Alternatively, configure the <em><MadCap:variable name="General.liquiPropFile" /></em> file to include your driver class path, URL, and user authentication information for both databases. Run the following command:</li>
        </ul>
        <figure class="highlight"><pre xml:space="preserve"><code class="language-bash" data-lang="bash">liquibase <span class="nt">--changeLogFile</span><span class="o">=</span>file_name.xml diffChangeLog</code></pre>
        </figure>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">Replace <em>file_name.xml</em>, with your filename and extension format. If you specify a file name that already exists, <MadCap:variable name="General.Liquibase" /> will append your changes to the existing file.</p>
        <p>For information on how to configure your <em><MadCap:variable name="General.liquiPropFile" /></em> file, view the <MadCap:xref href="../../workflows/liquibase-community/creating-config-properties.html">Creating and configuring a [%=General.liquiPropFile%] file</MadCap:xref> topic.</p>
        <h2 id="output">Output</h2>
        <p>The <code class="highlighter-rouge">diffChangeLog</code> command produces a list of all <em>Objects</em> and creates a <em><MadCap:variable name="General.changelog" /></em> with a list of <em><MadCap:variable name="General.changeset" />s</em>.</p>
        <p><MadCap:variable name="General.LBCommunity" /> <code class="highlighter-rouge">diffChangeLog</code> categories:</p>
        <ul>
            <li>Catalog</li>
            <li>Column</li>
            <li>Foreign Key</li>
            <li>Index</li>
            <li>Primary Key</li>
            <li>Schema</li>
            <li>Sequence</li>
            <li>Procedure</li>
            <li>Unique Constraints</li>
            <li>View</li>
        </ul>
        <h3 id="example">Example</h3>
        <details>
            <summary style="font-size: 125%;color: blue;">Console Output Example</summary>
            <br />
            <figure class="highlight"><pre xml:space="preserve"><code class="language-text" data-lang="text">Liquibase Pro 3.8.1 by Datical licensed to Liquibase Pro Customer
Liquibase command 'diffChangeLog' was executed successfully.</code></pre>
            </figure>
        </details>
        <p>
            <br />
        </p>
        <h2 id="additional-functionality-with-liquibase-pro">Additional Functionality with <MadCap:variable name="General.LBPro" /></h2>
        <p>While <MadCap:variable name="General.LBCommunity" /> stores all <em><MadCap:variable name="General.changeset" />s</em> in a <em><MadCap:variable name="General.changelog" /></em>, <MadCap:variable name="General.LBPro" /> creates a directory called <em>Objects</em> and places the directory at the same level as your <em><MadCap:variable name="General.changelog" /></em>. The <em>Objects</em> directory contains a subdirectory for each of the following stored logic types:</p>
        <ul>
            <li>checkconstraint</li>
            <li>package</li>
            <li>packagebody</li>
            <li>function</li>
            <li>trigger</li>
            <li>synonyms</li>
        </ul>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">Not all database platforms support all of these types.</p>
        <h3 id="example-1">Example</h3>
        <details>
            <summary style="font-size: 125%;color: blue;">Pro diffChangeLog sample file</summary>
            <br />
            <figure class="highlight"><pre xml:space="preserve"><code class="language-xml" data-lang="xml"><span class="cp">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>  
<span class="nt">&lt;databaseChangeLog</span>  
  <span class="na">xmlns=</span><span class="s">"http://www.liquibase.org/xml/ns/dbchangelog"</span>  
  <span class="na">xmlns:xsi=</span><span class="s">"http://www.w3.org/2001/XMLSchema-instance"</span>  
  <span class="na">xmlns:pro=</span><span class="s">"http://www.liquibase.org/xml/ns/pro"</span>  
  <span class="na">xsi:schemaLocation=</span><span class="s">"http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd"</span><span class="nt">&gt;</span>  
    <span class="nt">&lt;changeSet</span>  <span class="na">author=</span><span class="s">"Administrator (generated)"</span>  <span class="na">id=</span><span class="s">"1571345362466-8"</span><span class="nt">&gt;</span>  
           <span class="nt">&lt;pro:createTrigger</span>  <span class="na">disabled=</span><span class="s">"false"</span>  <span class="na">path=</span><span class="s">"objects/trigger/TS_T_EXEMPLAR_SEQEXEMPLAR.sql"</span>  <span class="na">relativeToChangelogFile=</span><span class="s">"true"</span>  <span class="na">tableName=</span><span class="s">"T_EXEMPLAR"</span>  <span class="na">triggerName=</span><span class="s">"TS_T_EXEMPLAR_SEQEXEMPLAR"</span><span class="nt">/&gt;</span>  
       <span class="nt">&lt;/changeSet&gt;</span>  
       <span class="nt">&lt;changeSet</span>  <span class="na">author=</span><span class="s">"Administrator (generated)"</span>  <span class="na">id=</span><span class="s">"1571345362466-9"</span><span class="nt">&gt;</span>  
           <span class="nt">&lt;pro:createTrigger</span>  <span class="na">disabled=</span><span class="s">"false"</span>  <span class="na">path=</span><span class="s">"objects/trigger/ORDERS_BEFORE_INSERT4.sql"</span>  <span class="na">relativeToChangelogFile=</span><span class="s">"true"</span>  <span class="na">tableName=</span><span class="s">"orders"</span>  <span class="na">triggerName=</span><span class="s">"ORDERS_BEFORE_INSERT4"</span><span class="nt">/&gt;</span>  
       <span class="nt">&lt;/changeSet&gt;</span>  
       <span class="nt">&lt;changeSet</span>  <span class="na">author=</span><span class="s">"Administrator (generated)"</span>  <span class="na">id=</span><span class="s">"1571345362466-10"</span><span class="nt">&gt;</span>  
           <span class="nt">&lt;pro:createTrigger</span>  <span class="na">disabled=</span><span class="s">"false"</span>  <span class="na">path=</span><span class="s">"objects/trigger/ORDERS_BEFORE_INSERT2.sql"</span>  <span class="na">relativeToChangelogFile=</span><span class="s">"true"</span>  <span class="na">tableName=</span><span class="s">"orders"</span>  <span class="na">triggerName=</span><span class="s">"ORDERS_BEFORE_INSERT2"</span><span class="nt">/&gt;</span>  
       <span class="nt">&lt;/changeSet&gt;</span>  
       <span class="nt">&lt;changeSet</span>  <span class="na">author=</span><span class="s">"Administrator (generated)"</span>  <span class="na">id=</span><span class="s">"1571345362466-11"</span><span class="nt">&gt;</span>  
           <span class="nt">&lt;pro:createTrigger</span>  <span class="na">disabled=</span><span class="s">"false"</span>  <span class="na">path=</span><span class="s">"objects/trigger/ORDERS_BEFORE_INSERT.sql"</span>  <span class="na">relativeToChangelogFile=</span><span class="s">"true"</span>  <span class="na">tableName=</span><span class="s">"orders"</span>  <span class="na">triggerName=</span><span class="s">"ORDERS_BEFORE_INSERT"</span><span class="nt">/&gt;</span>  
       <span class="nt">&lt;/changeSet&gt;</span>  
       <span class="nt">&lt;changeSet</span>  <span class="na">author=</span><span class="s">"Administrator (generated)"</span>  <span class="na">id=</span><span class="s">"1571345362466-12"</span><span class="nt">&gt;</span>  
           <span class="nt">&lt;createView</span>  <span class="na">fullDefinition=</span><span class="s">"true"</span>  <span class="na">path=</span><span class="s">"objects/view/OREDERS_VIEW.sql"</span>  <span class="na">relativeToChangelogFile=</span><span class="s">"true"</span>  <span class="na">viewName=</span><span class="s">"OREDERS_VIEW"</span><span class="nt">/&gt;</span>  
       <span class="nt">&lt;/changeSet&gt;</span>  
       <span class="nt">&lt;changeSet</span>  <span class="na">author=</span><span class="s">"Administrator (generated)"</span>  <span class="na">id=</span><span class="s">"1571345362466-13"</span><span class="nt">&gt;</span>  
           <span class="nt">&lt;pro:createTrigger</span>  <span class="na">disabled=</span><span class="s">"false"</span>  <span class="na">path=</span><span class="s">"objects/trigger/ORDERS_BEFORE_INSERT3.sql"</span>  <span class="na">relativeToChangelogFile=</span><span class="s">"true"</span>  <span class="na">tableName=</span><span class="s">"orders"</span>  <span class="na">triggerName=</span><span class="s">"ORDERS_BEFORE_INSERT3"</span><span class="nt">/&gt;</span>  
       <span class="nt">&lt;/changeSet&gt;</span>  
       <span class="nt">&lt;changeSet</span>  <span class="na">author=</span><span class="s">"Administrator (generated)"</span>  <span class="na">id=</span><span class="s">"1571345362466-14"</span><span class="nt">&gt;</span>  
           <span class="nt">&lt;createProcedure</span>  <span class="na">path=</span><span class="s">"objects/storedprocedure/P_CUSTOMER_HAS_NUM_FILM.sql"</span>  <span class="na">procedureName=</span><span class="s">"P_CUSTOMER_HAS_NUM_FILM"</span>  <span class="na">relativeToChangelogFile=</span><span class="s">"true"</span><span class="nt">/&gt;</span>  
       <span class="nt">&lt;/changeSet&gt;</span>  
       <span class="nt">&lt;changeSet</span>  <span class="na">author=</span><span class="s">"Administrator (generated)"</span>  <span class="na">id=</span><span class="s">"1571345362466-15"</span><span class="nt">&gt;</span>  
           <span class="nt">&lt;createView</span>  <span class="na">fullDefinition=</span><span class="s">"true"</span>  <span class="na">path=</span><span class="s">"objects/view/V_CUSTOMER_HAS_FILM.sql"</span>  <span class="na">relativeToChangelogFile=</span><span class="s">"true"</span>  <span class="na">viewName=</span><span class="s">"V_CUSTOMER_HAS_FILM"</span><span class="nt">/&gt;</span>  
       <span class="nt">&lt;/changeSet&gt;</span>  
       <span class="nt">&lt;changeSet</span>  <span class="na">author=</span><span class="s">"Administrator (generated)"</span>  <span class="na">id=</span><span class="s">"1571345362466-16"</span><span class="nt">&gt;</span>  
           <span class="nt">&lt;createProcedure</span>  <span class="na">path=</span><span class="s">"objects/storedprocedure/SP_CUSTOMER_SOCIAL_ACCTS.sql"</span>  <span class="na">procedureName=</span><span class="s">"SP_CUSTOMER_SOCIAL_ACCTS"</span>  <span class="na">relativeToChangelogFile=</span><span class="s">"true"</span><span class="nt">/&gt;</span>  
       <span class="nt">&lt;/changeSet&gt;</span>  
       <span class="nt">&lt;changeSet</span>  <span class="na">author=</span><span class="s">"Administrator (generated)"</span>  <span class="na">id=</span><span class="s">"1571345362466-17"</span><span class="nt">&gt;</span>  
           <span class="nt">&lt;pro:createTrigger</span>  <span class="na">disabled=</span><span class="s">"false"</span>  <span class="na">path=</span><span class="s">"objects/trigger/TRI_BORROWING.sql"</span>  <span class="na">relativeToChangelogFile=</span><span class="s">"true"</span>  <span class="na">tableName=</span><span class="s">"T_BORROWING"</span>  <span class="na">triggerName=</span><span class="s">"TRI_BORROWING"</span><span class="nt">/&gt;</span>  
       <span class="nt">&lt;/changeSet&gt;</span>  
       <span class="nt">&lt;changeSet</span>  <span class="na">author=</span><span class="s">"Administrator (generated)"</span>  <span class="na">id=</span><span class="s">"1571345362466-18"</span><span class="nt">&gt;</span>  
           <span class="nt">&lt;pro:createTrigger</span>  <span class="na">disabled=</span><span class="s">"false"</span>  <span class="na">path=</span><span class="s">"objects/trigger/TRU_BORROWING.sql"</span>  <span class="na">relativeToChangelogFile=</span><span class="s">"true"</span>  <span class="na">tableName=</span><span class="s">"T_BORROWING"</span>  <span class="na">triggerName=</span><span class="s">"TRU_BORROWING"</span><span class="nt">/&gt;</span>  
       <span class="nt">&lt;/changeSet&gt;</span>  
       <span class="nt">&lt;changeSet</span>  <span class="na">author=</span><span class="s">"Administrator (generated)"</span>  <span class="na">id=</span><span class="s">"1571345362466-19"</span><span class="nt">&gt;</span>  
           <span class="nt">&lt;pro:createTrigger</span>  <span class="na">disabled=</span><span class="s">"false"</span>  <span class="na">path=</span><span class="s">"objects/trigger/TSU_T_EXEMPLAR_SEQEXEMPLAR.sql"</span>  <span class="na">relativeToChangelogFile=</span><span class="s">"true"</span>  <span class="na">tableName=</span><span class="s">"T_EXEMPLAR"</span>  <span class="na">triggerName=</span><span class="s">"TSU_T_EXEMPLAR_SEQEXEMPLAR"</span><span class="nt">/&gt;</span>  
       <span class="nt">&lt;/changeSet&gt;</span>  
       <span class="nt">&lt;changeSet</span>  <span class="na">author=</span><span class="s">"Administrator (generated)"</span>  <span class="na">id=</span><span class="s">"1571345362466-20"</span><span class="nt">&gt;</span>  
           <span class="nt">&lt;pro:createFunction</span>  <span class="na">functionName=</span><span class="s">"F_CUSTOMER_HAS_NUM_FILM"</span>  <span class="na">path=</span><span class="s">"objects/function/F_CUSTOMER_HAS_NUM_FILM.sql"</span>  <span class="na">relativeToChangelogFile=</span><span class="s">"true"</span><span class="nt">/&gt;</span>  
       <span class="nt">&lt;/changeSet&gt;</span>  
<span class="nt">&lt;/databaseChangeLog&gt;</span></code></pre>
            </figure>
        </details>
        <blockquote>
            <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;"><MadCap:variable name="General.Liquibase" /> does not currently check data type length.</p>
        </blockquote>
    </body>
</html>