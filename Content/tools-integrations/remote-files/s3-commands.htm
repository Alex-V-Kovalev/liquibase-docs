<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title>Use Reference S3 Files with CLI Commands | Liquibase Docs</title>
        <meta rel="canonical" href="https://docs.liquibase.com/tools-integrations/remote-files/s3-commands.html" />
        <meta name="description" content="Reference S3 with CLI Commands. The following tables provides high-level guidance to read or write remote Liquibase files." />
    </head>
    <body>
        <h1>Detailed Guidelines for Referencing S3 Files with Liquibase CLI Commands <MadCap:snippetText src="../../Resources/Snippets/images/.ver_icon_size_pro.flsnp" /></h1>
        <p>Correct configuration of paths to locate files is vital to using <MadCap:variable name="General.Liquibase" /> files stored in S3. The following tables provide high-level guidance to read or write remote <MadCap:variable name="General.Liquibase" /> files.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">An output of log files to S3 is not yet available.</p>
        <h2>Legend</h2>
        <ul>
            <li><a href="../../concepts/changelogs/how-liquibase-finds-files.htm">searchpath</a> means the user-supplied searchpath property via any standard configuration, i.e., CLI, environment variables, <code><MadCap:variable name="General.liquiPropFile" /></code> file, or the <MadCap:xref href="../../concepts/connections/java-opts-environment-variable.htm">JAVA_OPTS Environment Variable</MadCap:xref>. The searchpath locates files to read. Searchpath is not used to write files.</li>
        </ul>
        <h2>Use Absolute Paths with Remote Files in AWS S3</h2>
        <table>
            <col style="width: auto;" />
            <col style="width: auto;" />
            <col style="width: auto;" />
            <col style="width: auto;" />
            <thead>
                <tr>
                    <th>File(s)</th>
                    <th>Commands</th>
                    <th>Absolute Path</th>
                    <th>Search-Path and Relative Path</th>
                    <th>Search-Path Only</th>
                    <th>Example </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>Generating a <MadCap:variable name="General.changelog" /></b> (see below for calling a <MadCap:variable name="General.changelog" /> in a command)
                            </td>
                    <td>
                        <ul>
                            <li>
                                <MadCap:xref href="../../commands/snapshot/generate-changelog.html">generate-changelog</MadCap:xref>
                            </li>
                            <li>
                                <MadCap:xref href="../../commands/diff/diff-changelog.html">diff-changelog</MadCap:xref>
                            </li>
                            <li>
                                <MadCap:xref href="../../commands/diff/diff.htm">diff</MadCap:xref>
                            </li>
                        </ul>
                    </td>
                    <td class="center">
                        <img src="../../Z_Resources/Images/Icons/Check-48.png" class="center" />
                    </td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                    <td>Relative <MadCap:variable name="General.changelog" /> path required to preserve DBCL integrity.</td>
                </tr>
                <tr>
                    <td><b>flowfile</b> (such as <code>liquibase flowfile.yaml</code>)</td>
                    <td><a href="../../commands/flow/flow.htm">flow</a>
                    </td>
                    <td class="center">
                        <img src="../../Z_Resources/Images/Icons/Check-48.png" class="center" />
                    </td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                    <td><pre><code class="language-text">liquibase flow --flow-file s3://mybucket/liquibase.flowfile.yaml</code></pre>
                        <ul>
                            <li>If the flow file references <MadCap:variable name="General.changelog" />s, the search-path must be configured. Within the flow file, the path to the <MadCap:variable name="General.changelog" /> should be relative to the search-path.</li>
                            <li>If the flow file references a checks settings file, provide an absolute path in the flow file.</li>
                            <li>If a flow file calls the flow command internally, provide an absolute path to the referenced flow file.</li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <td><b>Checks settings file</b> (such as <code>liquibase.checks-settings.conf</code>)</td>
                    <td><a href="../../commands/quality-checks/quality-checks-list.htm">checks</a> (all subcommands)</td>
                    <td class="center">
                        <img src="../../Z_Resources/Images/Icons/Check-48.png" style="width: 47px; height: 47px;" class="center" />
                    </td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                    <td><pre><code class="language-text">liquibase checks run --checks-settings-file s3://mybucket/liquibase.checks-settings.conf</code></pre>
                    </td>
                </tr>
                <tr>
                    <td>Defaults file 
(such as <code><MadCap:variable name="General.liquiPropFile" /></code>)
</td>
                    <td>All</td>
                    <td class="center">
                        <img src="../../Z_Resources/Images/Icons/Check-48.png" style="width: 47px; height: 47px;" class="center" />
                    </td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                    <td><pre><code class="language-text">liquibase --defaults-file s3://mybucket/defaults/liquibase.properties history</code></pre>
                    </td>
                </tr>
                <tr>
                    <td><b><code>init project</code> files</b>
                        <ul>
                            <li><MadCap:variable name="General.changelog" />
                            </li>
                            <li>flow file</li>
                            <li>liquibase.properties</li>
                        </ul>
                    </td>
                    <td>
                        <MadCap:xref href="../../commands/init/project.htm">init project</MadCap:xref>
                    </td>
                    <td class="center">
                        <img src="../../Z_Resources/Images/Icons/Check-48.png" style="width: 47px; height: 47px;" class="center" />
                    </td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                    <td><pre><code class="language-text">liquibase init project --project-dir s3://mybucket//init --project-guide off --changelog-file example-changelog.postgres.sql</code></pre>
                        <p>The <code>changelog-file</code> attribute cannot be relative when passed to <code>init project</code> in the <code>--changelog-file</code> parameter. This is the only use case where <code>changelog-file</code> is not relative.</p>
                    </td>
                </tr>
                <tr>
                    <td><code>output-files</code>
                    </td>
                    <td>All commands which support the <code>--output-file</code> property.</td>
                    <td class="center">
                        <img src="../../Z_Resources/Images/Icons/Check-48.png" style="width: 47px; height: 47px;" class="center" />
                    </td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                    <td><pre><code class="language-text">liquibase --output-file s3://mybucket/snapshots/mysnap.json snapshot</code></pre>
                    </td>
                </tr>
                <tr>
                    <td><code>driver.properties</code>
                    </td>
                    <td>All that support the <code>driver-properties</code> property.</td>
                    <td class="center">
                        <img src="../../Z_Resources/Images/Icons/Check-48.png" style="width: 47px; height: 47px;" class="center" />
                    </td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                    <td><pre><code class="language-text">liquibase --search-path s3://myS3Bucket/properties/drivers update --driver-properties mydriver.properties</code></pre>
                    </td>
                </tr>
                <tr>
                    <td><code>snapshot.json</code>
                    </td>
                    <td>
                        <ul>
                            <li>
                                <MadCap:xref href="../../commands/snapshot/snapshot.html">snapshot</MadCap:xref>
                            </li>
                            <li>
                                <MadCap:xref href="../../commands/snapshot/snapshot-reference.html">snapshot-reference</MadCap:xref>
                            </li>
                        </ul>
                    </td>
                    <td class="center">
                        <img src="../../Z_Resources/Images/Icons/Check-48.png" style="width: 47px; height: 47px;" class="center" />
                    </td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                    <td><pre><code class="language-text">liquibase --output-file s3://mybucket/snapshots/mysnap.json snapshot</code></pre>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2>Use Relative + Searchpath for <MadCap:variable name="General.changelog" />s in AWS S3</h2>
        <table>
            <col style="width: auto;" />
            <col style="width: auto;" />
            <col style="width: auto;" />
            <col style="width: auto;" />
            <thead>
                <tr>
                    <th>File(s)</th>
                    <th>Commands</th>
                    <th>Absolute Path</th>
                    <th>Search-Path and Relative Path</th>
                    <th>Search-Path Only</th>
                    <th>Example </th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>Using a <MadCap:variable name="General.changelog" /></b> (<MadCap:variable name="General.changelog" /> file/resources)
								<ul><li>SQL files</li><li><MadCap:xref href="../../concepts/changelogs/attributes/include.html">include</MadCap:xref> or <MadCap:xref href="../../concepts/changelogs/attributes/includeall.html">includeAll</MadCap:xref> files</li></ul></td>
                    <td>
                        <ul>
                            <li>
                                <MadCap:xref href="../../commands/update/update.html">update</MadCap:xref> (all variants)</li>
                            <li>
                                <MadCap:xref href="../../commands/rollback/rollback-by-tag.htm">rollback</MadCap:xref> (all variants)</li>
                            <li>
                                <MadCap:xref href="../../commands/maintenance/changelog-sync.htm">changelog-sync</MadCap:xref>
                            </li>
                            <li>
                                <MadCap:xref href="../../commands/status/status.htm">status</MadCap:xref>
                            </li>
                            <li>
                                <MadCap:xref href="../../commands/maintenance/validate.htm">validate</MadCap:xref>
                            </li>
                        </ul>
                    </td>
                    <td class="center">&#160;</td>
                    <td class="center">
                        <img src="../../Z_Resources/Images/Icons/Check-48.png" class="center" />
                    </td>
                    <td>&#160;</td>
                    <td><pre><code class="language-text">liquibase --search-path s3://mybucket update --changelog-file changelogs/changelog.xml</code></pre>
                        <p>A relative <MadCap:variable name="General.changelog" /> path is required to preserve the <MadCap:variable name="General.Liquibase" /> tracking table integrity.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <h2>Use searchpath with remote files in AWS S3</h2>
        <table>
            <col style="width: auto;" />
            <col style="width: auto;" />
            <col style="width: auto;" />
            <col style="width: auto;" />
            <thead>
                <tr>
                    <th>File(s)</th>
                    <th>Commands</th>
                    <th>Absolute Path</th>
                    <th>Search-Path and Relative Path</th>
                    <th>Search-Path Only</th>
                    <th>Example</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><b>Snapshots</b> (such as <code>mysnapshot.json</code>)</td>
                    <td>
                        <ul>
                            <li>
                                <MadCap:xref href="../../commands/diff/diff.htm">diff</MadCap:xref>
                            </li>
                            <li>
                                <MadCap:xref href="../../commands/diff/diff-changelog.html">diff-changelog</MadCap:xref>
                            </li>
                        </ul>
                    </td>
                    <td class="center">&#160;</td>
                    <td class="center">&#160;</td>
                    <td class="center">
                        <img src="../../Z_Resources/Images/Icons/Check-48.png" class="center" style="width: 47px; height: 47px;" />
                    </td>
                    <td><pre><code class="language-text">liquibase --search-path s3://mybucket/mysnapshots diff --reference-url offline:postgres?snapshot=mysnapshot.json</code></pre>
                    </td>
                </tr>
                <tr>
                    <td><b>Native executor config files</b> (such as <code>liquibase.sqlplus.conf</code>, <code>liquibase.sqlcmd.conf</code>, <code>liquibase.psql.conf</code>)</td>
                    <td>
                        <ul>
                            <li>
                                <MadCap:xref href="../../commands/update/update.html">update</MadCap:xref> (all variants)</li>
                            <li>
                                <MadCap:xref href="../../commands/rollback/rollback-by-tag.htm">rollback</MadCap:xref> (all variants)</li>
                        </ul>
                    </td>
                    <td class="center">&#160;</td>
                    <td class="center">&#160;</td>
                    <td class="center">
                        <img src="../../Z_Resources/Images/Icons/Check-48.png" class="center" style="width: 45px;height: 45px;" />
                    </td>
                    <td><pre><code class="language-text">liquibase --search-path s3://mybucket/configs update</code></pre>
                        <p>There is no property to directly specify a native executor configuration file path. It is located using the <code>searchpath</code> property.</p>
                    </td>
                </tr>
            </tbody>
        </table>
    </body>
</html>