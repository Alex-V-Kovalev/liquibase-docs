<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="Default.EXCLUDE">
    <head>
    </head>
    <body>
        <h1>searchpath <MadCap:snippetText src="../../Resources/Snippets/images/.ver_icon_size_pro.flsnp" /> <MadCap:snippetText src="../../Resources/Snippets/images/Labs Icon.flsnp" /></h1>
        <p>Searchpath is a property that <b>finds</b> the path to S3 that contains <MadCap:variable name="General.changelog" /> files, snapshot files, or native executor configuration files. This property allows you to find files that cannot be found by an absolute path. It is a convenient way to quickly call on those files without specifying the path each time. Searchpath can be  set in the CLI, within the <MadCap:variable name="General.liquiPropFile" /> file, as an environment variable, or in the Defaults File. </p>
        <h2>Enable searchpath</h2>
        <p>Both an S3 directory in the searchpath and a relative path are required to find <MadCap:variable name="General.changelog" /> files, snapshot files, or native executor configuration files. Follow the steps below to learn how to set both of these and enable them.</p>
        <p>1. First, you will set the relative path of the changelog-file property in the <MadCap:variable name="General.liquiPropFile" /> file like so:</p>
        <p><code>globalVariables:<br />CHANGELOGFILE:&#160;"example-changelog.sql"</code>
        </p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">The example above is formatted for the <MadCap:variable name="General.liquiPropFile" />file but can be set in the CLI, within the <MadCap:variable name="General.liquiPropFile" /> file, as an environment variable, or in the Defaults File.</p>
        <p>2. Then you will also establish the S3 path in the CLI&#160;to ensure it is found successfully. </p>
        <p>To do this, you must know both the S3 bucket and the globalVariable set in the step above. <br />Specify the S3 searchpath and the changelog file together like so:</p>
        <p> <code>liquibase --searchpath=s3://myS3bucket/demo --changelogfile=example-changelog.sql'</code></p>
        <p>You have successfully called on the example changelog file located in your S3 bucket.</p>
        <h2>Searchpath Rules:</h2>
        <p>Below are all of the rules that apply to searchpath. Review the example use cases and instructions to ensure it is the right avenue for your project.</p>
        <h3>Multiple Searchpath</h3>
        <p>Multiple Searchpath (Unsure if this is how we want to teach this. I&#160;think we want to teach users to specify each set of files individually.)<br />If searchpath is set, it is used and Liquibase will not look in other locations for searchpath. This indicates if some files are located on S3 and some are local, both locations are required in the search path. Each location is separated by a period.</p>
        <p>Multiple Searchpath example:</p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;"><code>s3://mybucket/path,</code> is the first location and<code> .localfiles</code> is the second location that searchpath will find the files.</p>
        <p><code>--searchpath=s3://mybucket/path,.localfiles</code>
        </p>
        <h3>Default Searchpath</h3>
        <p>If searchpath is not defined, Liquibase assumes the searchpath is in the current working directory.</p>
        <h3>Liquibase init project</h3>
        <p>When using init project, you cannot give attributes to <MadCap:variable name="General.changelog" />s. This prevents you from using a relative path with the changelog. To solve this, use the --<MadCap:variable name="General.changelog" />-file property in the <MadCap:variable name="General.liquiPropFile" /> file to name the changelog file from the CLI when using init project in a non-interactive way.</p>
        <h3>Duplicate File Mode</h3>
        <p>If duplicate files are found with <code>searchpath</code>, the DuplicateFileMode property tells the user it found two files of the same title and it will have one of two responses. It can be set in the CLI, <MadCap:variable name="General.liquiPropFile" /> file, as an Environment Variable, or the Defaults file.</p>
        <p>The <b>ERROR&#160;Response</b> states two files are found and Liquibase will not use either file. It will then suggest you rename the file or correct your searchpath, and then re-run the command. </p>
        <p>The <b>WARN&#160;Response</b> states two files are found and it will automatically use the first file found. That means that if searchpath is set like this:</p>
        <p><code>searchpath=".lb-files/release1, s3://sharedservices/resources/liquibase/"</code>
        </p>
        <p>Liquibase will use <code>.lb-files/release1</code> as the searchpath and <code>ignore  s3://sharedservices/resources/liquibase/</code></p>
        <h3>Configure check-settings</h3>
        <p>The <a href="../../commands/quality-checks/using-the-checks-settings-configuration-file.htm">check-settings</a> file is created locally <b>unless</b> the absolute path is available by typing <code>init project --project-dir=s3://somebucket</code> into the CLI.</p>
    </body>
</html>