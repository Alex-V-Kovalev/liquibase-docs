<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:searchable="False">
    <head><title><MadCap:variable name="Heading.Level1" /></title>
        <link rel="canonical" href="https://docs.liquibase.com/tools-integrations/observability/operation-reports-drift-report.html" />
        <meta name="description" content="Reference information for Liquibase Drift Reports. The drift report is a Liquibase operation report that informs you of database drift." />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
    </head>
    <body>
        <h1>Drift Report</h1>
        <MadCap:snippetBlock src="../../Z_Resources/Snippets/images/icon-pro-top.flsnp" />
        <p>
            <img src="../../Z_Resources/Images/drift-report.png" title="Drift report graphical output" alt="Liquibase displays a drift report of a user's source and target database." style="width: 35%; float:right" />
        </p>
        <p>The drift report is a <MadCap:variable name="General.Liquibase" /> <a href="operation-reports.htm">operation report</a> that informs you of database drift.</p>
        <p>Database drift occurs when changes to one database are not made to others – often when manual changes are made outside of automation. These inconsistencies are challenging to detect. Once detected, tracking down the problem is manual, frustrating, and takes time.</p>
        <p>If you're working in an environment that experiences database drift, <MadCap:variable name="General.Liquibase" /> drift reports can alert you of the drift and show you the changes that need to be addressed. This simplifies the process and minimizes the amount of time databases are out of sync.</p>
        <p>In <MadCap:variable name="General.Liquibase" /> 4.25.0 and later, you can automatically generate a database drift report using the <MadCap:variable name="General.Liquibase" />&#160;<code><MadCap:xref href="../../commands/inspection/diff.htm">diff</MadCap:xref></code> command. The drift report shows the differences between two live databases or between a database and a snapshot from a previous point in time. Adding this check to your CI/CD pipeline gives you ongoing visibility into database drift while maintaining the speed and reliability of CI/CD automation.</p>
        <p>It is a best practice to explicitly set a drift severity level to match your team's expectation of allowable drift.</p>
        <h2>Uses</h2>
        <p>Using <MadCap:variable name="General.Liquibase" /> drift detection can help you improve the following metrics for your database:</p>
        <ul>
            <li><b>Predictability:</b>&#160;Validate that your CI/CD pipelines apply database changes correctly without any unintended side effects.</li>
            <li><b>Consistency:</b> Compare schema changes across development, staging, and production environments.</li>
            <li><b>Security:</b> Identify unauthorized changes before they go to production, minimizing security vulnerabilities.</li>
            <li><b>Compliance:</b> Adhere to industry standards and government regulations on data management and privacy.</li>
            <li><b>Redundancy:</b> Ensure that backup databases match source databases and that your failover procedures are effective.</li>
        </ul>
        <h2>Drift reports in automation</h2>
        <p>To automatically use <MadCap:variable name="General.Liquibase" /> drift reports in your CI/CD pipeline, follow these steps in your CI/CD&#160;tool:</p>
        <ol>
            <li>Create a <b>LiquibaseDatabaseSnapshot</b> job that runs the <MadCap:variable name="General.Liquibase" />&#160;<code><MadCap:xref href="../../commands/inspection/snapshot.html">snapshot</MadCap:xref></code> command. This stores the current state of your database. It is a best practice to store your database snapshot in an artifact repository like Amazon S3, Azure Blob Storage, or a database-specific artifact repository.</li>
            <li>Configure your snapshot job to run at your desired frequency, such as once per release.</li>
            <li>Repeat Steps 1–2 for every database whose state you want to track with <MadCap:variable name="General.Liquibase" /> drift reports.</li>
            <li>Create a <b>LiquibaseDriftReport</b> job that compares the snapshot to the current database state or another snapshot. This job must:<ol><li>Enable the drift report with <code>--reports-enabled</code> (global scope)&#160;or <code>--report-enbled</code> (command scope).</li><li>Run the <MadCap:variable name="General.Liquibase" /> <code><MadCap:xref href="../../commands/inspection/diff.htm">diff</MadCap:xref></code> command against your desired databases.</li><li>(Optional) Specify the <code>--drift-severity-*</code> arguments whether <MadCap:variable name="General.Liquibase" /> should respond differently to changed, missing, or unexpected content.</li></ol></li>
            <p class="tip" MadCap:autonum="&lt;b&gt;Tip: &lt;/b&gt;">For more information, see the <MadCap:xref href="#Examples">Examples</MadCap:xref> section of this page.</p>
            <li>Configure your drift report job to run at your desired frequency, such as once per day.</li>
        </ol>
        <h2>Enable operation reports</h2>
        <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/operation-reports-enable-all.flsnp" />
        <h2><a name="Examples"></a>Examples</h2>
        <h3>Setting arguments</h3>
        <p>You can modify the drift report output with global arguments listed in the table on this page.</p><pre xml:space="preserve"><code class="language-text">liquibase
    --reports-enabled=true
    --drift-severity=2
  diff</code></pre>
        <p>If you want to keep reports disabled by default and <b>enable only the drift report when running <code>diff</code></b>, you can use the command argument <code>--report-enabled</code> (singular). For example:</p><pre xml:space="preserve"><code class="language-text">liquibase diff
    --report-enabled=true
    --report-name=my_drift_report.html</code></pre>
        <h3>Halt deployment if any drift is detected</h3><pre xml:space="preserve"><code class="language-text">liquibase
    --reports-enabled=true
  diff
    --drift-severity=4</code></pre>
        <h3>Log missing or unexpected objects, but ignore changed objects</h3><pre xml:space="preserve"><code class="language-text">liquibase
    --reports-enabled=true
  diff
    --drift-severity-changed=0
    --drift-severity-missing=2
    --drift-severity-unexpected=2</code></pre>
        <p>Another way to specify this is to explicitly set <code>--drift-severity-missing</code> and <code>--drift-severity-unexpected</code> to <code>2</code> and not specify a value for <code>--drift-severity-changed</code>, so it remains at its default value of <code>0</code>.</p><pre xml:space="preserve"><code class="language-text">liquibase
    --reports-enabled=true
  diff
    --drift-severity-missing=2
    --drift-severity-unexpected=2</code></pre>
        <p>A third way to specify this is by setting <code>--drift-severity</code> to <code>2</code> as a default for all drift and then overriding it only for changed objects:</p><pre xml:space="preserve"><code class="language-text">liquibase
    --reports-enabled=true
  diff
    --drift-severity=2
    --drift-severity-changed=0</code></pre>
        <MadCap:snippetBlock src="../../Z_Resources/Snippets/text/operation-reports-global-arguments.flsnp" />
        <h2>Command <MadCap:variable name="General.Param/Attribute" />s</h2>
        <p>Use these command arguments if you want to specify operation report behavior for a specific command.</p>
        <p>When <MadCap:variable name="General.Liquibase" /> detects database drift, it records that in your drift report. Use the <code>--drift-severity</code> argument to specify a severity return code (severity level) for all kinds of drift: changed, missing, or unexpected content. The severity return code you set tells <MadCap:variable name="General.Liquibase" /> how to react when it detects drift. You can use the severity return code as an alert for the rest of your CI/CD&#160;pipeline.</p>
        <ul>
            <li><code>BLOCKER</code> (<code>4</code>):&#160;drift is a blocker (most severe)</li>
            <li><code>CRITICAL</code> (<code>3</code>):&#160;drift is a critical error</li>
            <li><code>MAJOR</code> (<code>2</code>):&#160;drift is a major failure</li>
            <li><code>MINOR</code> (<code>1</code>):&#160;drift is a minor failure</li>
            <li><code>INFO</code> (<code>0</code>): drift is treated as an informational message (least severe)</li>
        </ul>
        <p>If you want <MadCap:variable name="General.Liquibase" /> to react to changed, missing, or unexpected content in different ways, you can set the individual <code>--drift-severity-*</code> arguments to specify a severity return code for each particular kind of drift. These arguments take priority over <code>--drift-severity</code>.</p>
        <table style="width: 100%;">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Type</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><pre xml:space="preserve"><code class="language-text">--drift-severity
liquibase.command.&lt;cmdName&gt;.driftSeverity
LIQUIBASE_COMMAND_&lt;CMDNAME&gt;_DRIFT_SEVERITY</code></pre>
                    </td>
                    <td>String</td>
                    <td>Specifies the severity level of all error types in the drift report (changed, missing, or unexpected content). Valid values are <code>BLOCKER</code>, <code>CRITICAL</code>, <code>MAJOR</code>, <code>MINOR</code>, and <code>INFO</code>; or 0–4. If both <code>--drift-severity</code> and one of the individual error type arguments are set, the individual error type arguments take priority. <b>Default: <code>INFO</code></b>.</td>
                </tr>
                <tr>
                    <td><pre xml:space="preserve"><code class="language-text">--drift-severity-changed
liquibase.command.&lt;cmdName&gt;.driftSeverityChanged
LIQUIBASE_COMMAND_&lt;CMDNAME&gt;_DRIFT_SEVERITY_CHANGED</code></pre>
                    </td>
                    <td>String</td>
                    <td>Specifies the severity level of changed content  in the drift report. Valid values are <code>BLOCKER</code>, <code>CRITICAL</code>, <code>MAJOR</code>, <code>MINOR</code>, and <code>INFO</code>; or 0–4. Overrides the value of <code>--drift-severity</code> for changed content only. <b>Default: <code>INFO</code></b>.</td>
                </tr>
                <tr>
                    <td><pre xml:space="preserve"><code class="language-text">--drift-severity-missing
liquibase.command.&lt;cmdName&gt;.driftSeverityMissing
LIQUIBASE_COMMAND_&lt;CMDNAME&gt;_DRIFT_SEVERITY_MISSING</code></pre>
                    </td>
                    <td>String</td>
                    <td>Specifies the severity level of missing content  in the drift report. Valid values are <code>BLOCKER</code>, <code>CRITICAL</code>, <code>MAJOR</code>, <code>MINOR</code>, and <code>INFO</code>; or 0–4. Overrides the value of <code>--drift-severity</code> for missing content only. <b>Default: <code>INFO</code></b>.</td>
                </tr>
                <tr>
                    <td><pre xml:space="preserve"><code class="language-text">--drift-severity-unexpected
liquibase.command.&lt;cmdName&gt;.driftSeverityUnexpected
LIQUIBASE_COMMAND_&lt;CMDNAME&gt;_DRIFT_SEVERITY_UNEXPECTED</code></pre>
                    </td>
                    <td>String</td>
                    <td>Specifies the severity level of unexpected content in the drift report. Valid values are <code>BLOCKER</code>, <code>CRITICAL</code>, <code>MAJOR</code>, <code>MINOR</code>, and <code>INFO</code>; or 0–4. Overrides the value of <code>--drift-severity</code> for unexpected content only. <b>Default: <code>INFO</code></b>.</td>
                </tr>
                <tr>
                    <td><pre xml:space="preserve"><code class="language-text">--report-enabled
liquibase.command.&lt;cmdName&gt;.reportEnabled
LIQUIBASE_COMMAND_&lt;CMDNAME&gt;_REPORT_ENABLED</code></pre>
                    </td>
                    <td>Boolean</td>
                    <td>Enables a  report at the command level. Overrides the global argument <code>--reports-enabled</code>. <b>Default:&#160;<code>false</code></b>.</td>
                </tr>
                <tr>
                    <td><pre xml:space="preserve"><code class="language-text">--report-format
liquibase.command.&lt;cmdName&gt;.reportFormat
LIQUIBASE_COMMAND_&lt;CMDNAME&gt;_REPORT_FORMAT</code></pre>
                    </td>
                    <td>String</td>
                    <td>Specifies the format of the report output file at the command level. Overrides the global argument <code>--reports-format</code>. Valid values are: <code>HTML</code>. <b>Default:&#160;<code>HTML</code></b>.</td>
                </tr>
                <tr MadCap:conditions="Default.EXCLUDE">
                    <td><pre xml:space="preserve"><code class="language-text">--report-mode
liquibase.command.&lt;cmdName&gt;.reportMode
LIQUIBASE_COMMAND_&lt;CMDNAME&gt;_REPORT_MODE</code></pre>
                    </td>
                    <td>String</td>
                    <td>Specifies the differences to include in the drift report. Valid values are: <code>ALL</code>, <code>CHANGED</code>, <code>MISSING</code>,
and <code>UNEXPECTED</code>. <b>Default:&#160;<code>ALL</code></b>.</td>
                </tr>
                <tr>
                    <td><pre xml:space="preserve"><code class="language-text">--report-name
liquibase.command.&lt;cmdName&gt;.reportName
LIQUIBASE_COMMAND_&lt;CMDNAME&gt;_REPORT_NAME</code></pre>
                    </td>
                    <td>String</td>
                    <td>Specifies the name of the  report file at the command level. Overrides the global argument <code>--reports-name</code>. By default, <MadCap:variable name="General.Liquibase" /> generates a new report file labeled with a timestamp (user's local time). If you set a custom name, <MadCap:variable name="General.Liquibase" /> overwrites the existing file every time you generate a new report. <b>Default: <code>report-&lt;day-month-year-timecode&gt;.html</code></b>.</td>
                </tr>
                <tr>
                    <td><pre xml:space="preserve"><code class="language-text">--report-path
liquibase.command.&lt;cmdName&gt;.reportPath
LIQUIBASE_COMMAND_&lt;CMDNAME&gt;_REPORT_PATH</code></pre>
                    </td>
                    <td>String</td>
                    <td>Specifies the file path to the  report file at the command level. Overrides the global argument <code>--reports-path</code>. <b>Default: <code>./</code></b>.</td>
                </tr>
            </tbody>
        </table>
        <h2>Troubleshooting</h2>
        <p>If you experience performance issues while generating drift reports, such as an <code>OutOfMemoryError</code> exception, see the solutions described on <MadCap:xref href="../../workflows/limitations/memory-limits-inspecting-large-schemas.htm">Memory Limits of Inspecting Large Schemas</MadCap:xref>.</p>
    </body>
</html>