<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title>context tag | Liquibase Docs</title>
        <meta rel="canonical" href="https://docs.liquibase.com/concepts/changelogs/attributes/contexts.html" />
        <meta name="description" content="Reference information for Contexts. Contexts are expressions you can add to changesets to control which will be executed in any particular migration run." />
    </head>
    <body>
        <h1 id="contexts">Contexts</h1>
        <p>Contexts in <MadCap:variable name="General.Liquibase" /> are expressions you can add to <MadCap:variable name="General.changeset" style="font-style: italic;" /><i>s</i> to control which <MadCap:variable name="General.changeset" style="font-style: italic;" /><i>s</i> will be executed in any particular migration run. Context names are case-insensitive strings.</p>
        <p>When you run the migrator though any of the available methods, you can specify a set of contexts to run in the CLI. This way, <MadCap:variable name="General.Liquibase" /> only runs <MadCap:variable name="General.changeset" style="font-style: italic;" /><i>s</i> marked with these contexts.</p>
        <p>If you don't assign a context to a <MadCap:variable name="General.changeset" style="font-style: italic;" />, the <MadCap:variable name="General.changeset" style="font-style: italic;" /> always runs, regardless of what contexts you pass in to the migrator. If you don't specify any context in the CLI, <MadCap:variable name="General.Liquibase" /> runs every <MadCap:variable name="General.changeset" style="font-style: italic;" /> in your <MadCap:variable name="General.changelog" style="font-style: italic;" />.</p>
        <p>Here are examples of SQL, XML, JSON, and YAML <MadCap:variable name="General.changeset" style="font-style: italic;" /><i>s</i> using the context <MadCap:variable name="General.Param/Attribute" />:</p>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot>SQL</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre xml:space="preserve"><code class="language-sql" data-lang="sql">--changeset bob:1 context:test
insert into news (id, title) values (1, 'Liquibase 0.8 Released')</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot>XML</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre xml:space="preserve"><code class="language-xml" data-lang="xml">&lt;changeSet id="2" author="bob" context="test"&gt;
        &lt;insert tableName="news"&gt;
            &lt;column name="id" value="1"/&gt;
            &lt;column name="title" value="Liquibase 0.8 Released"/&gt;
        &lt;/insert&gt;
&lt;/changeSet&gt;</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot>JSON</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre xml:space="preserve"><code class="language-json" data-lang="json">{
    "changeSet": {
        "id": "2",
        "author": "bob",
        "context": "test",
        "changes": [
            {
                "insert": {
                    "tableName": "news",
                    "columns": [
                        {
                            "column": {
                                "name": "id",
                                "value": "1"
                            }
                        },
                        {
                            "column": {
                                "name": "title",
                                "value": "Liquibase 0.8 Released"
                            }
                        }
                    ]
                }
            }
        ]
    }
}</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot>YAML</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody><pre xml:space="preserve"><code class="language-yaml" data-lang="yaml">- changeSet:
    id: 2
    author: bob
    context: test
    changes:
      - insert:
          tableName: news
          columns:
            - column:
                name: id
                value: 1
            - column:
                name: title
                value: "Liquibase 0.8 Released"</code></pre>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <h2 id="context-syntax">Context syntax</h2>
        <p>You can specify a context using <code>AND</code>, <code>OR</code>, <code>!</code>, and parentheses in the <MadCap:variable name="General.changeset" style="font-style: italic;" /><i>s</i>. Without parentheses, the order of operations is <code>!</code>, <code>AND</code>, and then <code>OR</code>.</p>
        <p><strong>Examples:</strong>
        </p>
        <ul>
            <li><code>context="!test"</code>
            </li>
            <li><code>context="v1.0 or map"</code>
            </li>
            <li><code>context="!qa and !master"</code>
            </li>
        </ul>
        <p>Using a <code>","</code> to separate contexts works like an <code>OR</code> operation but with the highest precedence.</p>
        <p><strong>Examples:</strong>
        </p>
        <ul>
            <li>"test, qa" is the same as "test OR qa"</li>
            <li>"test, qa and master" is the same as "(test) OR (qa and master)"</li>
        </ul>
        <p><strong>Availability:</strong>
        </p>
        <ul>
            <li><code>","</code> separator is available in all versions of <MadCap:variable name="General.Liquibase" /></li>
            <li>"AND, OR, !, parentheses" are added in 3.2.0</li>
        </ul>
        <h2>Running contexts</h2>
        <p>You can only specify context logic in a <MadCap:variable name="General.changeset" style="font-style: italic;" /> definition, but you can still specify multiple contexts when running <MadCap:variable name="General.Liquibase" />. However, you can only list out all the contexts that apply to the current <MadCap:variable name="General.Liquibase" /> run.</p><pre xml:space="preserve"><code class="language-text">liquibase --changeLogFile=changelog.xml --contexts="test" update</code></pre>
        <p>If your <MadCap:variable name="General.changelog" style="font-style: italic;" /> includes several <MadCap:variable name="General.changeset" style="font-style: italic;" /><i>s</i> with complex and simple contexts such as <code>context="qa and master and !dev"</code> for <MadCap:variable name="General.changeset" style="font-style: italic;" /> 1 and <code>context="test"</code> for <MadCap:variable name="General.changeset" style="font-style: italic;" /> 2, you need to pass the following on the command line to deploy them:</p><pre xml:space="preserve"><code class="language-text">liquibase --changeLogFile=changelog.xml --contexts="test,qa,master" update</code></pre>
        <h2 id="using-contexts-for-test-data">Using contexts for test data</h2>
        <p>If you  manage your test data with <MadCap:variable name="General.Liquibase" />, the best way is to have this data  in line with all your other <MadCap:variable name="General.changeset" style="font-style: italic;" /><i>s</i>, but marked with a <code>"test"</code> context. 
That way, when you want your test data inserted, you can run the migrator with the <code>"test"</code> context. When you need to migrate your production database, 
don't include the <code>"test"</code> context, and your test data will not be included.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">If you do not specify any context at all, every <MadCap:variable name="General.changeset" style="font-style: italic;" /> will 
be applied, including those marked with a <code>"test"</code> context). </p>
        <p>If you have multiple test environments or test data sets, simply tag them with different contexts 
such as <code>"min-test"</code>, <code>"integration-test"</code>, and others.</p>
        <p>Using contexts to control test data is better than having a separate <MadCap:variable name="General.changelog" style="font-style: italic;" /><i>s</i> tree because later <MadCap:variable name="General.changetypes" />s and changes will be applied to existing test 
data the same as they are applied to production data. If you had a set of test data that was created and simply added after the database is set up, you 
would be constantly manually updating your test data scripts to keep them in line with the current database schema.</p>
        <h2 id="using-contexts-for-multi-dbms-change-logs">Using contexts for multi-DBMS <MadCap:variable name="General.changelog" style="font-style: italic;" /><i>s</i></h2>
        <p>You can use contexts to control which <MadCap:variable name="General.changeset" style="font-style: italic;" /><i>s</i> are run on which databases, but there is an option to use the built in <code>"dbms"</code> tag on the <MadCap:variable name="General.changeset" style="font-style: italic;" /> tag.</p>
        <h2 id="default-context">Default context</h2>
        <p>Starting with <MadCap:variable name="General.Liquibase" /> 3.5, you can specify a context <MadCap:variable name="General.Param/Attribute" /> in the root <MadCap:variable name="General.databasechangelog" /> node to assign that context to all <MadCap:variable name="General.changeset" style="font-style: italic;" /><i>s</i> in the <MadCap:variable name="General.changelog" style="font-style: italic;" /> by default.</p>
        <p>The specified context will have <code>AND</code> with any contexts specified in <MadCap:variable name="General.changeset" style="font-style: italic;" /><i>s</i> within the <MadCap:variable name="General.changelog" style="font-style: italic;" /> file.</p>
        <h2 id="includeincludeall-context"><code>include</code> and <code>includeAll</code> contexts</h2>
        <p>Starting with <MadCap:variable name="General.Liquibase" /> 3.5, you can specify a context <MadCap:variable name="General.Param/Attribute" /> in <code class="highlighter-rouge">&lt;include&gt;</code> or <code class="highlighter-rouge">&lt;includeAll&gt;</code> tags. If specified, the given context is added to all <MadCap:variable name="General.changeset" style="font-style: italic;" /><i>s</i> in the included file(s).</p>
    </body>
</html>