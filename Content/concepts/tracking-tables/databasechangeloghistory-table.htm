<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
    </head>
    <body>
        <h1><MadCap:variable name="General.databasechangeloghistory" /> table</h1>
        <MadCap:snippetBlock src="../../Z_Resources/Snippets/images/icon-pro-top.flsnp" />
        <p><MadCap:variable name="General.Liquibase" /> uses the <MadCap:variable name="General.databasechangeloghistory" /> (DBCLH) table to record a history of all changes it makes to the <MadCap:xref href="databasechangelog-table.html">[%=General.databasechangelog%] table</MadCap:xref>.</p>
        <p>The <MadCap:variable name="General.databasechangelog" /> (DBCL) table tracks all deployments you make to your database. However, the DBCL&#160;table only records the current state of the database. If you roll back a change, that row is removed from the table. In contrast, the DBCLH table tracks <b>every change</b> you make to your DBCL, including <a href="../../commands/update/update.html">deployments</a>, <a href="../../commands/rollback/rollback-by-tag.htm">rollbacks</a>, <a href="../../commands/maintenance/drop-all.htm">drop-alls</a>, <a href="../../commands/change-tracking/changelog-sync.htm"><MadCap:variable name="General.changelog" /> syncs</a>, and <MadCap:xref href="../changelogs/attributes/runonchange.htm">runOnChange</MadCap:xref> activity.</p>
        <p>The <MadCap:variable name="General.databasechangeloghistory" /> table is available in <MadCap:variable name="General.Liquibase" /> 4.26.0 and later. It is only available to <MadCap:variable name="General.LBPro" /> users, so you need a valid <a href="../../workflows/liquibase-pro/how-to-apply-your-liquibase-pro-license-key.htm"><MadCap:variable name="General.LBPro" /> license key</a> to use it.</p>
        <h2>Uses</h2>
        <p>The DBCLH table can help developers and DevOps easily see:</p>
        <ul>
            <li>Which changes were made to the database and then rolled back</li>
            <li>How many times a change has been made, rolled back, and re-deployed</li>
            <li>When rollbacks happened and what the context behind those actions is</li>
            <li>Any other changes that modified your database at any time</li>
        </ul>
        <p>You can use the DBCLH table to <b>understand how the database reached its current state</b>. This reveals your team's deployment and rollback patterns, such as frequent rollbacks after deploying a certain kind of change or number of changes. With this information, you can easily identify whether the source of deployment issues are problems with the changes themselves or with deployment processes.</p>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">The DBCLH table is designed to provide <MadCap:variable name="General.Liquibase" /> users with an accessible way to track changes made to the DBCL table. It is not designed to satisfy security compliance or tracking audits.</p>
        <h2>Use the <MadCap:variable name="General.databasechangeloghistory" /> table</h2>
        <p>The <MadCap:variable name="General.databasechangeloghistory" /> table is <b>enabled by default</b>. To display the DBCLH table in <code>STDOUT</code>, run the <code>dbcl-history</code> command in your <a href="../../parameters/working-with-command-parameters.htm">command line</a> or in a <MadCap:xref href="../../commands/flow/flow.htm">flow</MadCap:xref> file. For example, to generate a human-readable table in the CLI:</p><pre xml:space="preserve"><code class="language-text">liquibase dbcl-history --verbose --format=TEXT</code></pre>
        <h3>Capture SQL</h3>
        <p>By default, whenever the DBCLH table is enabled, <MadCap:variable name="General.Liquibase" /> automatically captures any SQL it generates in commands like update and rollback. It stores that SQL&#160;in the DBCLH table under the column <code>EXECUTEDSQL</code>.</p>
        <p>If you want to disable SQL&#160;capturing, set the <code>--dbcl-history-capture-sql</code> parameter to <code>false</code> in your <a href="../../parameters/working-with-command-parameters.htm">command line</a>, <code><a href="../connections/creating-config-properties.html"><MadCap:variable name="General.liquiPropFile" /> file</a></code> (defaults file), in a <MadCap:xref href="../../commands/flow/flow.htm">flow</MadCap:xref> file, or as an <a href="../connections/liquibase-environment-variables.htm">environment variable</a>.</p>
        <h3>Disable the DBCLH table</h3>
        <p>If you want to stop <MadCap:variable name="General.Liquibase" /> from recording your database changes in the DBCLH table,  set the <code>--dbclhistory-enabled</code> parameter to <code>false</code> in your <a href="../../parameters/working-with-command-parameters.htm">command line</a>, <code><a href="../connections/creating-config-properties.html"><MadCap:variable name="General.liquiPropFile" /> file</a></code> (defaults file), in a <MadCap:xref href="../../commands/flow/flow.htm">flow</MadCap:xref> file, or as an <a href="../connections/liquibase-environment-variables.htm">environment variable</a>.</p>
        <h2>Columns</h2>
        <table style="margin-left: auto;margin-right: auto;width: 100%;">
            <thead>
                <tr>
                    <th>Column</th>
                    <th>Standard data type</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>ID</code>
                    </td>
                    <td><code>VARCHAR(255)</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/tracking-tables/id.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code>AUTHOR</code>
                    </td>
                    <td><code>VARCHAR(255)</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/tracking-tables/author.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code>FILENAME</code>
                    </td>
                    <td><code>VARCHAR(255)</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/tracking-tables/filename.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code>COMMAND</code>
                    </td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                </tr>
                <tr>
                    <td><code>INTERNAL_COMMAND</code>
                    </td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                </tr>
                <tr>
                    <td><code>ARGUMENTS</code>
                    </td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                </tr>
                <tr>
                    <td><code>OUTCOME</code>
                    </td>
                    <td>&#160;</td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/tracking-tables/exectype-outcome.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code>START</code>
                    </td>
                    <td><code>DATETIME</code>
                    </td>
                    <td>&#160;</td>
                </tr>
                <tr>
                    <td><code>END</code>
                    </td>
                    <td><code>DATETIME</code>
                    </td>
                    <td>&#160;</td>
                </tr>
                <tr>
                    <td><code>TAG</code>
                    </td>
                    <td><code>VARCHAR(255)</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/tracking-tables/tag.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code>CONTEXTS</code>
                    </td>
                    <td><code>VARCHAR(255)</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/tracking-tables/contexts.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code>LABELS</code>
                    </td>
                    <td><code>VARCHAR(255)</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/tracking-tables/labels.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code>MD5SUM</code>
                    </td>
                    <td><code>VARCHAR(35)</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/tracking-tables/md5sum.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code>DESCRIPTION</code>
                    </td>
                    <td><code>VARCHAR(255)</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/tracking-tables/description.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code>COMMENTS</code>
                    </td>
                    <td><code>VARCHAR(255)</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/tracking-tables/comments.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code>DEPLOYMENT_ID</code>
                    </td>
                    <td><code>VARCHAR(10)</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/tracking-tables/deployment-id.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code>EXECUTEDSQL</code>
                    </td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                </tr>
                <tr>
                    <td><code>LIQUIBASEVERSION</code>
                    </td>
                    <td><code>VARCHAR(20)</code>
                    </td>
                    <td>
                        <MadCap:snippetBlock src="../../Z_Resources/Snippets/def/tracking-tables/liquibase-liquibaseversion.flsnp" />
                    </td>
                </tr>
                <tr>
                    <td><code>HOSTNAME</code>
                    </td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                </tr>
                <tr>
                    <td><code>SYSTEMUSER</code>
                    </td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                </tr>
                <tr>
                    <td><code>INTERFACE</code>
                    </td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                </tr>
                <tr>
                    <td><code>EXTENSIONS</code>
                    </td>
                    <td>&#160;</td>
                    <td>&#160;</td>
                </tr>
            </tbody>
        </table>
        <h2>Troubleshooting</h2>
        <p>If you try to display the DBCLH&#160;table but it does not exist, <MadCap:variable name="General.Liquibase" /> returns exit code 0 and displays the following message:</p><pre xml:space="preserve"><code class="language-text">WARNING: The DATABASECHANGELOGHISTORY does not currently exist. Please set your Pro License key, and set '--dbclhistory-enabled=true' on CLI or via Environment variable, etc and then run an update or rollback command. Then try 'liquibase dbcl-history' command again.</code></pre>
        <p>If you try to display the DBCLH table but it is disabled, <MadCap:variable name="General.Liquibase" /> returns exit code 0 and displays the following message:</p><pre xml:space="preserve"><code class="language-text">WARNING: The DATABASECHANGELOGHISTORY is not currently enabled. Please set your Pro License key, and set '--dbclhistory-enabled=true' on CLI or via Environment variable, etc. Then try 'liquibase dbcl-history' command again.</code></pre>
    </body>
</html>