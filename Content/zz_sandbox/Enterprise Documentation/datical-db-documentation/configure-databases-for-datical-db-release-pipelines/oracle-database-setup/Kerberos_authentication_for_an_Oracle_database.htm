<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title></title>
    </head>
    <body>
        <h1>Kerberos authentication for an Oracle database</h1>
        <div class="panel conf-macro output-block" style="background-color: #EAE6FF;border-color: #998DD9;border-width: 1px;">
            <div class="panelContent" style="background-color: #EAE6FF;">
                <p>Kerberos authentication for Oracle is available in Datical DB versions 7.6 and later.</p>
            </div>
        </div>
        <p />
        <div class="toc-macro client-side-toc-macro  conf-macro output-block">
        </div>
        <p>Kerberos is an authentication protocol that works based on tickets to provide strong authentication for client/server applications by using secret-key cryptography. The Kerberos authentication protocol doesn’t store passwords locally or send them over the Internet.</p>
        <p>As a Datical DB user, you can use the Kerberos authentication with Oracle 12, Oracle 18, and Oracle 19 without having to present passwords or certificates to it.</p>
        <p>All Datical DB operations that are available for Oracle databases support the Kerberos authentication in the GUI and CLI.</p>
        <h2 id="KerberosauthenticationforanOracledatabase-Prerequisites">Prerequisites</h2>
        <p>Before configuring Datical dbDefs to use Kerberos authentication for an Oracle connection, ensure that you performed the following:</p>
        <ul>
            <li>
                <p>Configured the <code>krb5.conf</code> or <code>krb5.ini</code> files.</p>
            </li>
            <li>
                <p>Created a new Kerberos ticket. Alternatively, you can use an existing one but pay attention to the expiration date of the ticket and whether it is valid.</p>
            </li>
            <li>
                <p>Configured <code>sqlnet.ora</code>.</p>
            </li>
            <li>
                <p>Set the following environment variables: <code>ORACLE_HOME</code>, <code>TNS_ADMIN</code>, <code>DDB_KRB5_CONFIG</code>, and <code>DDB_KRB5_CC_NAME</code>. <code>DDB_KRB5_CONFIG</code> and <code>DDB_KRB5_CC_NAME</code> are optional if the <code>KRB5_CONFIG</code> environment variable is set and the path to the Kerberos ticket exists in <code>krb5.conf</code>.</p>
            </li>
        </ul>
        <h2 id="KerberosauthenticationforanOracledatabase-Uses">Uses</h2>
        <p>Kerberos authentication for an Oracle connection is typically used when Kerberos is the standard authentication mechanism that your company supports for accessing resources in your organization.</p>
        <h2 id="KerberosauthenticationforanOracledatabase-ConfiguringDaticaldbDefstousetheKerberosauthenticationforOracledatabases">Configuring Datical dbDefs to use the Kerberos authentication for Oracle databases</h2>
        <p>There are several ways to configure Datical dbDefs to use the Kerberos authentication for Oracle databases:</p>
        <ul>
            <li>
                <p><a href="#" rel="nofollow">Creating a new project with the project_creator.groovy script</a>
                </p>
            </li>
            <li>
                <p><a href="#" rel="nofollow">Using the newDbDef hammer command</a>
                </p>
            </li>
            <li>
                <p><a href="#" rel="nofollow">Running the set dbprop or show dbprop commands</a>
                </p>
            </li>
            <li>
                <p><a href="#" rel="nofollow">Using the Datical DB GUI</a>
                </p>
            </li>
        </ul>
        <h3 id="KerberosauthenticationforanOracledatabase-Creatinganewprojectwiththeproject_creator.groovyscript">Creating a new project with the <code>project_creator.groovy</code> script</h3>
        <p>The <code>project_creator.groovy</code> script reads information from a set of input files and generates a project directory in your workspace containing the required configuration files. The <code>project_creator.groovy</code> script is executed using the <code>hammer</code> command.</p>
        <p>To use the <code>project_creator</code>, perform the following steps:</p>
        <ol>
            <li>
                <p>Ensure that the Datical DB CLI directory is in your path. Otherwise, specify the full path to the CLI tool – <code>hammer</code>.</p>
            </li>
            <li>
                <p>Select a sample input file for Oracle named <strong>ProjectNameOracle.dbdefs.tsv.txt</strong> that is delivered with the Datical DB installation. It is located in the following directory:</p>
            </li>
        </ol>
        <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
            <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">&lt;DaticalDB-Installation-Directory&gt;/repl/scripts/examples</pre>
            </div>
        </div>
        <p><strong>ProjectNameOracle.dbdefs.tsv.txt field names and their description</strong>
        </p>
        <div class="table-wrap">
            <table class="confluenceTable">
                <colgroup>
                    <col style="width: 264.0px;" />
                    <col style="width: 496.0px;" />
                </colgroup>
                <tbody>
                    <tr>
                        <th class="confluenceTh">
                            <p><strong>Field Headers (case-sensitive)</strong>
                            </p>
                        </th>
                        <th class="confluenceTh">
                            <p><strong>Description</strong>
                            </p>
                        </th>
                    </tr>
                    <tr>
                        <td class="confluenceTd">
                            <p>name</p>
                        </td>
                        <td class="confluenceTd">
                            <p>The name for the dbDef. It is used as an alias for the connection.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">
                            <p>DbDefClass</p>
                        </td>
                        <td class="confluenceTd">
                            <p>Inline Credentials:  <strong>OracleDbDef</strong><br />Run-Time Supplied Credentials:  <strong>DelayedCredentialOracleDbDef</strong></p>
                        </td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">
                            <p>hostname</p>
                        </td>
                        <td class="confluenceTd">
                            <p>The hostname/IP of the target database server.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">
                            <p>port</p>
                        </td>
                        <td class="confluenceTd">
                            <p>The port number for JDBC connections to the target database server.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">
                            <p>username</p>
                        </td>
                        <td class="confluenceTd">
                            <p>The database user name to use for the connection.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">
                            <p>sid</p>
                        </td>
                        <td class="confluenceTd">
                            <p>The name of the Oracle SID to which you want to connect.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">
                            <p>serviceName</p>
                        </td>
                        <td class="confluenceTd">
                            <p>The name of the Oracle Service to which you want to connect.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">
                            <p>useWallet</p>
                        </td>
                        <td class="confluenceTd">
                            <p>The name of the Oracle Wallet to connect to the Oracle database through an SSL connection. See <a href="SSL_Connection_to_an_Oracle_Database_Through_Oracle_Wallet.htm" rel="nofollow">Using Oracle Wallet for SSL Connections to Oracle Databases</a>.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">
                            <p>tnsName</p>
                        </td>
                        <td class="confluenceTd">
                            <p>The directory that contains configuration files for Oracle Wallet.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">
                            <p>defaultSchemaName</p>
                        </td>
                        <td class="confluenceTd">
                            <p>The name of the schema/catalog you want to manage.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">
                            <p>contexts</p>
                        </td>
                        <td class="confluenceTd">
                            <p>A comma-separated list of contexts to associate with the new dbDef.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">
                            <p>labels</p>
                        </td>
                        <td class="confluenceTd">
                            <p>A comma-separated list of labels to associate with the new dbDef.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">
                            <p>storageOptions</p>
                        </td>
                        <td class="confluenceTd">
                            <p>A TRUE or FALSE value that determines if Datical collects Storage Options.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">
                            <p>dbDefType</p>
                        </td>
                        <td class="confluenceTd">
                            <p>The value that is set to <code>standard</code> for a managed database and to <code>dmcdb</code> for a Deployment Monitoring Console database.</p>
                            <div class="confluence-information-macro confluence-information-macro-information conf-macro output-block">
                                <div class="confluence-information-macro-body">
                                    <p>If you specify a <code>dmcdb</code> in your project, <code>project_creator.groovy</code> will attempt to register the project with the <code>dmcdb</code>.</p>
                                </div>
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">
                            <p>scriptExecutionTimeout</p>
                        </td>
                        <td class="confluenceTd">
                            <p>The value that limits the time to wait for a script to execute in seconds. The default value is 0, which means there is no limit.</p>
                        </td>
                    </tr>
                    <tr>
                        <td class="confluenceTd">
                            <p>kerberos</p>
                        </td>
                        <td class="confluenceTd">
                            <p>A TRUE or FALSE value that determines if Datical uses the Kerberos authentication. Set to true if you want to use the Kerberos authentication to connect.</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <p>  3. Next, run the script on your Windows system:</p>
        <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
            <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">% hammer groovy project_creator.groovy&#160;"F:\drivers\jdbc_drivers"&#160;"F:\provisioning_files"&#160;"C:\Users\TestUser1\datical"&#160;"new_project"&#160;testConnections</pre>
            </div>
        </div>
        <p>Use the following example to run the script on the Linux system:</p>
        <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
            <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">% hammer groovy project_creator.groovy ignore /opt/datical/provisioning_files /opt/datical/workspace "new_project" testConnections</pre>
            </div>
        </div>
        <h3 id="KerberosauthenticationforanOracledatabase-UsingthenewDbDefhammercommand">Using the <code>newDbDef</code> hammer command</h3>
        <p>The <code>newDbDef</code> hammer command is another way to create a new project by specifying all the values directly in the CLI. Running the <code>newDbDef</code> hammer command, ensure that the <code>kerberos</code> value is set to <code>true</code>.</p>
        <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
            <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">hammer newDbDef DbDefClass OracleDbDef name Source username datical databaseName datical defaultSchemaName datical contexts some_context labels some_label dbDefType standard hostname localhost port 1521 kerberos true</pre>
            </div>
        </div>
        <h3 id="KerberosauthenticationforanOracledatabase-Runningthesetdbproporshowdbpropcommands">Running the <code>set dbprop</code> or <code>show dbprop</code> commands</h3>
        <p>The <code>set dbprop</code> or <code>show dbprop</code> commands are typically used when you have an existing project and want to use the Kerberos protocol as an authentication method by just adding the <code>kerberos</code> attribute. The format of these commands is the following:</p>
        <p><code>set dbprop &lt;DbDefName&gt; kerberos true/false</code>
        </p>
        <p><code>show dbprop &lt;DbDefName&gt; kerberos true/false</code>
        </p>
        <p><strong>An example of using the </strong><code>set dbprop</code><strong> and </strong><code>show dbprop</code><strong> commands:</strong>
        </p>
        <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
            <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">hammer set dbprop Source kerberos true</pre>
            </div>
        </div>
        <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
            <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">hammer show dbprop Source kerberos true</pre>
            </div>
        </div>
        <h3 id="KerberosauthenticationforanOracledatabase-UsingtheDaticalDBGUI">Using the Datical DB GUI</h3>
        <p>The Datical DB GUI can also be used to create a new dbdef for an Oracle database with an option to connect through the Kerberos authentication protocol.</p>
        <p>Whether you are creating a new dbdef or editing an existing one, you can configure it to use Kerberos for authentication in the <strong>Connection Settings</strong>.</p>
        <p>The following image shows the Datical DB GUI with the configuration properties for the Kerberos authentication:</p>
        <ul>
            <li>
                <p>To use the BASIC connection with the Kerberos authentication, specify your hostname, port, identifier, and the additional information if required, and then select <strong>Kerberos</strong>.</p>
            </li>
            <li>
                <p>To use the TNS/LDAP and Kerberos authentication, specify your name, TNS alias, and the additional information if required, and then select <strong>Kerberos</strong>.</p>
            </li>
        </ul><span class="confluence-embedded-file-wrapper image-left-wrapper confluence-embedded-manual-size"><img class="confluence-embedded-image image-left" width="544" loading="lazy" src="https://datical-cs.atlassian.net/wiki/download/thumbnails/1533444166/kerberos.png?version=1&amp;modificationDate=1596627984930&amp;cacheVersion=1&amp;api=v2&amp;width=544&amp;height=513" srcset="https://datical-cs.atlassian.net/wiki/download/thumbnails/1533444166/kerberos.png?version=1&amp;modificationDate=1596627984930&amp;cacheVersion=1&amp;api=v2&amp;width=844&amp;height=797 2x, https://datical-cs.atlassian.net/wiki/download/thumbnails/1533444166/kerberos.png?version=1&amp;modificationDate=1596627984930&amp;cacheVersion=1&amp;api=v2&amp;width=544&amp;height=513 1x" /></span>
        <p />
    </body>
</html>