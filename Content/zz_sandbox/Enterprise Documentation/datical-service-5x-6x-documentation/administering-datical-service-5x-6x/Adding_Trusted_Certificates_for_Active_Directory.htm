<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title></title>
    </head>
    <body>
        <h1>Adding Trusted Certificates for Active Directory</h1>
        <p>If you are using an SSL-enabled LDAP connection in Keycloak and the certificate is not signed by a standard trusted authority, you must add that certificate to the java truststore.</p>
        <p>Normally you will encounter the problem when you are setting the connection to Active Directory in Keycloak for the first time.&#160;</p>
        <h1 id="AddingTrustedCertificatesforActiveDirectory-TestingtheConnection">Testing the Connection</h1>
        <p>When you set an LDAPS connection in Keycloak and the click <strong>Check Connection</strong>, you get an error. It may be something like <code>Invalid PIX path</code>.</p>
        <p>The error is caused by the connection certificate being self-signed. You need to import it.&#160;</p>
        <h1 id="AddingTrustedCertificatesforActiveDirectory-ImportingtheCertificate">Importing the Certificate</h1>
        <ol>
            <li>
                <p class="auto-cursor-target">Run the following command:&#160;</p>
                <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
                    <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">&#160;datical-control network truststore-add --host &lt;AD server IP or Host Name&gt; --port 636</pre>
                    </div>
                </div>
            </li>
            <li><span>In Keycloak, try to set the connection again and click <strong>Check Connection</strong>.&#160; It should pass.&#160;</span>
            </li>
            <li>
                <p class="auto-cursor-target">Run the following command to see the newly added certificate:</p>
                <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
                    <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">datical-control network truststore-show</pre>
                    </div>
                </div>
            </li>
        </ol>
    </body>
</html>