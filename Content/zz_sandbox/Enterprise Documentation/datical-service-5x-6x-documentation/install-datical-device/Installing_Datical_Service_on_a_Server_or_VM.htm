<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head><title></title>
    </head>
    <body>
        <h1>Installing Datical Service on a Server or VM</h1>
        <p />
        <div class="toc-macro client-side-toc-macro  conf-macro output-block">
        </div>
        <h1 id="InstallingDaticalServiceonaServerorVM-OverviewofInstallation">Overview of Installation</h1>
        <p>During installation you will download these files:</p>
        <ul>
            <li><code>datical-server-&lt;version&gt;.tar.part* </code>- The main Datical Service files.&#160;</li>
            <li><code>datical-jenkins-*.part* - </code>(<em>optional</em>) Datical client used internally by Datical Service to run Datical operations. If you run operations from DMC (Forecast, Deploy), these files are required.&#160;</li>
            <li><code>datical-service-preinstallcheck_&lt;version&gt;.sh</code> - This script runs a pre-installation check of your host environment and host resources to determine if the necessary resources are available for Datical Service. The script tells you if you need to make changes in its report.</li>
        </ul>
        <p>
            <br />
        </p>
        <div class="confluence-information-macro confluence-information-macro-information conf-macro output-block">
            <div class="confluence-information-macro-body">
                <p>These instructions assume that the intended Datical Service host does not have access to the internet. Therefore you have to download the files to an internet-connected host, then move the downloaded files to the intended Datical Service host.&#160;</p>
                <p>If the Datical Service host has access to the internet, you can create <code>/opt/datical/install-files</code> on it and download the files directly to it.&#160;</p>
            </div>
        </div>
        <p>
            <br />
        </p>
        <h1 id="InstallingDaticalServiceonaServerorVM-ReviewDependencies">Review Dependencies</h1>
        <p>Review the requirements for your host system in "Package Dependencies and Pre-Install Check" in&#160; <a href="../planning-and-prerequisites-for-datical-service-5x-6x-installation/prerequisites-for-datical-service-5x-6x-installation/Host_System_Requirements_for_Datical_Service_5_x_6_x.htm">Host System Requirements for Datical Service 5.x/6.x</a>.&#160;</p>
        <h1 id="InstallingDaticalServiceonaServerorVM-DownloadtheRequiredFiles">Download the Required Files</h1>
        <p>On an internet-connected host machine or from a VM command shell, download <code>.part</code> files from software.datical.com using your login credentials. There are two ways to accomplish this task. One uses a web browser to download all the files. The other has you download a single file using your browser, and then uses that file to download the remaining files.</p>
        <p>In either case, start by making a directory to store the files</p>
        <p>The examples show that you download to /tmp.&#160;</p>
        <ol>
            <li>
                <p class="auto-cursor-target">Create a temporary subdirectory to contain <em>only</em> the files you download for Datical Service.&#160;</p>
                <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
                    <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">mkdir /tmp/datical59files</pre>
                    </div>
                </div>
            </li>
        </ol>
        <h2 id="InstallingDaticalServiceonaServerorVM-DownloadingUsingthecommandline">Downloading Using the command line</h2>
        <p>See&#160;<a href="Downloading_Installation_Files_Using_the_Command_Line.htm">Downloading Installation Files Using the Command Line</a> for details</p>
        <h2 id="InstallingDaticalServiceonaServerorVM-Downloadingusingabrowser">Downloading using a browser&#160;</h2>
        <ol>
            <li>Log in to <code>software.datical.com</code>.&#160; Contact our Technical Support team if you need assistance with credentials.<br /><br /></li>
            <li>Go to the directory containing the Datical Service files.&#160;<br /><br /><strong>COMMON &gt; Datical_Service_Software<br /><br /></strong></li>
            <li>
                <p class="auto-cursor-target">Download all files for Datical Service&#160;to the temporary subdirectory.&#160;</p>
                <ul>
                    <li>
                        <p class="auto-cursor-target"><code>.part</code> files for Datical Service</p>
                    </li>
                    <li>Pre-install check script&#160;<span style="color: rgb(23,43,77);"><code>datical-service-preinstallcheck_5_9.sh</code>.</span></li>
                    <li>
                        <p class="auto-cursor-target"><code>.part</code> files for the Jenkins-based internal client (in the <strong>jenkins</strong> subdirectory&#160;</p>
                    </li>
                </ul>
            </li>
        </ol>
        <h1 id="InstallingDaticalServiceonaServerorVM-MovetheFilestotheIntendedHost">Move the Files to the Intended Host</h1>
        <ol>
            <li>
                <p class="auto-cursor-target">On the host where you are going to install Datical Service, create directories to contain the installation files you downloaded.&#160;</p>
                <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
                    <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">sudo mkdir -p /opt/datical/install-files</pre>
                    </div>
                </div>
            </li>
            <li>Move all files from the download host to the Datical Service host.&#160;<ul><li>From:&#160;&#160;<code>/tmp/datical59files</code> on the download host</li><li>To: <code>/opt/datical/install-files</code> on the intended Datical Service host</li></ul></li>
        </ol>
        <h2 id="InstallingDaticalServiceonaServerorVM-NotesonMovingFiles">Notes on Moving Files</h2>
        <ul>
            <li>Use a file utility to move the files if the intended host can be reached through your network.</li>
            <li>Use physical media to move the files if the intended host cannot be reached through the network. Examples: USB stick, external drive.&#160;</li>
            <li>Do not extract the <code>.part</code> files yet.&#160;</li>
        </ul>
        <h1 id="InstallingDaticalServiceonaServerorVM-RunthePre-InstallationCheckScript">Run the Pre-Installation Check Script</h1>
        <p>The check script helps you be sure that the host where you intend to install Datical Service meets requirements. The output guides to to issues that need to be addressed.</p>
        <p>Add execution privilege to the script before running it.&#160;&#160;</p>
        <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
            <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">cd /opt/datical/install-files
chmod +x datical-service-preinstall-check_5_9.sh
./datical-service-preinstallcheck-5.9.sh</pre>
            </div>
        </div>
        <p>The check script checks the following areas:</p>
        <ul>
            <li>Hardware resources (CPUs, RAM)</li>
            <li>yum configuration (existence of "extras" repository)</li>
            <li>Dependencies (packages that must already be on the host)</li>
            <li>Network and ports</li>
            <li>Administrative user exists</li>
            <li>All required .part files are available</li>
        </ul>
        <h2 id="InstallingDaticalServiceonaServerorVM-CheckResultsExamples">Check Results Examples</h2>
        <h3 id="InstallingDaticalServiceonaServerorVM-PASSEDExample">PASSED Example</h3>
        <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
            <div class="codeHeader panelHeader pdl hide-border-bottom"><span class="collapse-source expand-control" style="display: none;"><span class="expand-control-text">Expand source</span></span>
            </div>
            <div class="codeContent panelContent pdl hide-toolbar"><pre class="syntaxhighlighter-pre" xml:space="preserve">Running Datical Service Pre-install Check....
---------------------------------------------
What os user will you use as the Datical admin user?
ec2-user
What hostname will you use to access Datical Service?
ec2-18-207-238-246.compute-1.amazonaws.com


Checking Hardware...
---------------------------------------------
Passed: Server has at least 16GB RAM
Passed: Server has at least 4 CPUs
Passed: Server has at least 250 GB disk space

Checking yum configuration...
---------------------------------------------
Passed: OS 'extras' repository is enabled

Checking dependencies...
---------------------------------------------
Passed: Supported RedHat version 7.4
Passed: OS dependencies are available
Passed: docker-ee is not installed
Passed: docker is not installed

Checking network...
---------------------------------------------
Passed: Default network route defined
Passed: IP route 10.32.0.0/12 is open
Passed: IP route 10.0.0.0/8 is open
Passed: Hostname ec2-18-207-238-246.compute-1.amazonaws.com is defined
Passed: Port 80 available to listen
Passed: Port 443 available to listen
Passed: Port 5432 available to listen
Passed: Port 6443 available to listen
Passed: Port 3258 available to listen
Passed: Port 24007 available to listen

Checking OS configuration...
---------------------------------------------
Passed: Admin user ec2-user exists

Checking Datical installer...
---------------------------------------------
Passed: MD5 checksum for file: /opt/datical/install-files/datical-service-5.8.tar.part0
Passed: MD5 checksum for file: /opt/datical/install-files/datical-service-5.8.tar.part1
Passed: MD5 checksum for file: /opt/datical/install-files/datical-service-5.8.tar.part2
Passed: MD5 checksum for file: /opt/datical/install-files/datical-service-5.8.tar.part3
Passed: MD5 checksum for file: /opt/datical/install-files/datical-jenkins-1.0.72-master.images.part0
Passed: MD5 checksum for file: /opt/datical/install-files/datical-jenkins-1.0.72-master.images.part1
Passed: MD5 checksum for file: /opt/datical/install-files/datical-jenkins-1.0.72-master.images.part2


=============================================
Datical pre-install check complete

</pre>
            </div>
        </div>
        <p>
            <br />
        </p>
        <h3 id="InstallingDaticalServiceonaServerorVM-FAILEDExample">FAILED Example</h3>
        <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
            <div class="codeHeader panelHeader pdl hide-border-bottom"><span class="collapse-source expand-control" style="display: none;"><span class="expand-control-text">Expand source</span></span>
            </div>
            <div class="codeContent panelContent pdl hide-toolbar"><pre class="syntaxhighlighter-pre" xml:space="preserve">Running Datical Service Pre-install Check....
---------------------------------------------
What os user will you use as the Datical admin user?
ec2-user
What hostname will you use to access Datical Service?
ec2-35-168-36-56.compute-1.amazonaws.com


Checking Hardware...
---------------------------------------------
!FAILED! Server does not have at least 16GB RAM
Passed: Server has at least 4 CPUs
!FAILED! Server does not have at least 100 GB disk space

Checking yum configuration...
---------------------------------------------
!WARN! OS 'extras' repository not enabled
  --&gt; To enable 'extras' repository, run 'sudo yum-config-manager --enable rhui-*-rhel-server-extras'

Checking dependencies...
---------------------------------------------
Passed: Supported RedHat version 7.0
!FAILED! No package container-selinux &gt;= 2.9 available.
Passed: docker-ee is not installed
Passed: docker is not installed

Checking network...
---------------------------------------------
Passed: Default network route defined
Passed: IP route 10.32.0.0/12 is open
Passed: IP route 10.0.0.0/8 is open
Passed: Hostname ec2-35-168-36-56.compute-1.amazonaws.com is defined
Passed: Port 80 available to listen
Passed: Port 443 available to listen
Passed: Port 5432 available to listen
Passed: Port 6443 available to listen
Passed: Port 3258 available to listen
Passed: Port 24007 available to listen

Checking OS configuration...
---------------------------------------------
Passed: Admin user ec2-user exists

Checking Datical installer...
---------------------------------------------
!FAILED! Part file not found: /opt/datical/install-files/datical-service-5.6.1.tar.part0
!FAILED! Part file not found: /opt/datical/install-files/datical-service-5.6.1.tar.part1
!FAILED! Part file not found: /opt/datical/install-files/datical-service-5.6.1.tar.part2
!FAILED! Part file not found: /opt/datical/install-files/datical-service-5.6.1.tar.part3
!WARN! Part file not found: /opt/datical/install-files/datical-jenkins-1.0.72-master.images.part0
!WARN! Part file not found: /opt/datical/install-files/datical-jenkins-1.0.72-master.images.part1
!WARN! Part file not found: /opt/datical/install-files/datical-jenkins-1.0.72-master.images.part2

=============================================
DATICAL PRE-INSTALL CHECK FAILED</pre>
            </div>
        </div>
        <h1 id="InstallingDaticalServiceonaServerorVM-UnpackFilesinto/opt/datical">Unpack Files into /opt/datical</h1>
        <ol>
            <li>
                <p class="auto-cursor-target">Unpack the main Datical Service files into the Datical Service directory.&#160;</p>
                <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
                    <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">cat /opt/datical/install-files/datical-service*.part* | sudo tar xfv - -C /opt/datical</pre>
                    </div>
                </div>
            </li>
            <li>
                <p class="auto-cursor-target">Move the Jenkins internal client files into the newly created Datical Service file hierarchy.&#160;</p>
                <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
                    <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">sudo mv /tmp/datical-jenkins* /opt/datical/install-files</pre>
                    </div>
                </div>
            </li>
        </ol>
        <h1 class="auto-cursor-target" id="InstallingDaticalServiceonaServerorVM-RuntheInstallationScript">Run the Installation Script</h1>
        <ol>
            <li>
                <p class="auto-cursor-target">Run the installation script.&#160;</p>
                <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
                    <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">sudo /opt/datical/datical-service-install.sh</pre>
                    </div>
                </div>
            </li>
            <li>
                <p class="auto-cursor-target">Answer "y" whenever prompted during the dependencies check.&#160;Any needed packages are installed from the local repo installed from the .part files.&#160;<br /><br />You may be prompted more than once.&#160;<br /><br />The dependencies check output is in the following form. Numbers for the actual dependencies appear in places of NNN.&#160;</p>
                <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
                    <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">Dependencies Resolved

# (list of packages and their repos appears here)

Transaction Summary
============================================================================
Install  N Package  (+NNN Dependent packages)
Upgrade             (  NN Dependent packages)

Total download size: NNN M
Is this ok [y/d/N]:</pre>
                    </div>
                </div>
            </li>
            <li>
                <p class="auto-cursor-target">After the last dependencies check is compete, installation continues. <br /><br />Answer the prompts with answers for your environment. <br /><br />You are prompted to confirm each answer.&#160; The confirmation prompts are not shown in the example below.&#160;</p>
                <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
                    <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">------------------------------------------------------
------ Datical OS Check --------------
------------------------------------------------------

What IP should Datical Server listen on? [10.0.211.52 (eth0)] 
What is the standard user on this machine? [centos]
What is the hostname used to access Datical Service? [myhost]

</pre>
                    </div>
                </div>
            </li>
        </ol>
        <h1 id="InstallingDaticalServiceonaServerorVM-VerifytheInstallation">Verify the Installation</h1>
        <p>The installation script starts the services.&#160;</p>
        <ol>
            <li>
                <p class="auto-cursor-target">Verify that all services are running.&#160;</p>
                <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
                    <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">datical-control services show</pre>
                    </div>
                </div>
                <div class="confluence-information-macro confluence-information-macro-information conf-macro output-block">
                    <p class="title">Note</p>
                    <div class="confluence-information-macro-body">
                        <p>It may take a minute or so for all services to show as RUNNING. Run the command again until they all show as RUNNING.&#160;</p>
                    </div>
                </div>
            </li>
            <li>
                <p class="auto-cursor-target">Verify the version. The following command should show the version for all components.</p>
                <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
                    <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">datical-control versions show</pre>
                    </div>
                </div>
            </li>
        </ol>
        <h1 id="InstallingDaticalServiceonaServerorVM-BackUptheInstalledDaticalService">Back Up the Installed Datical Service</h1>
        <p>On the Datical Service host, run a backup.&#160;&#160;</p>
        <div class="code panel pdl conf-macro output-block" style="border-width: 1px;">
            <div class="codeContent panelContent pdl"><pre class="syntaxhighlighter-pre" xml:space="preserve">datical-control backup all</pre>
            </div>
        </div>
        <h1 id="InstallingDaticalServiceonaServerorVM-LogOn">Log On</h1>
        <p>Access and log in to Datical Service in a browser, using the virtual image URL.&#160;</p>
        <p>URL - <code>https://&lt;hostname&gt;/</code></p>
        <ul>
            <li>Use the value you entered in the installation prompt:&#160;<code>What is the hostname used to access Datical Service? [myhost]</code></li>
        </ul>
        <p>User - <code>support@datical.com</code></p>
        <ul>
            <li>This is the pre-set user with administrative privleges in Datical Service.&#160;</li>
        </ul>
        <p>Password - <code>datical</code></p>
        <ul>
            <li>This is the pre-set password for the initial administrative user.&#160;</li>
        </ul>
        <p>See&#160;<a href="../Logging_in_to_DMC_on_Datical_Service_5_x_6_x.htm">Logging in to DMC on Datical Service 5.x/6.x</a>.&#160;</p>
        <p>
            <br />
        </p>
        <p>
            <br />
        </p>
    </body>
</html>