<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <link href="../Z_Resources/Stylesheets/TableStyles.css" rel="stylesheet" MadCap:stylesheetType="table" /><title>diff-changelog | Liquibase Docs</title>
        <meta rel="canonical" href="https://docs.liquibase.com/commands/diff/diff-changelog.html" />
        <meta name="description" content="Reference information and use cases for the check-scope command. The check-scope command allows you to ." />
    </head>
    <body>
        <h1 id="liquibase-commands-diff-changelog"><code>check-scope</code>
        </h1>
        <img src="../../Z_Resources/Images/Logos/pro-pages.jpg" style="vertical-align: middle;width: 3%" />
        <h1>&#160;</h1>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">This command is only available with <b>Liquibase Labs.</b></p>
        <h2 id="uses">Uses</h2>
        <p>The <code class="highlighter-rouge">check-scope</code> is a parameter that can be applied to the<code>checks run</code> command which allows the user to check either the changelog or database against any enabled checks. When <code>--checks-scope changelog</code> is ran, Liquibase checks each changeset in a changelog to see if any of those changesets trigger any enabled checks. When <code>--checks-scope database</code> is ran, Liquibase checks each database object in the database to see if any of those objects trigger any enabled checks.  Both the changelog and database can be checked by themselves or at the same time. Users may choose between <code>changelog</code>, <code>database</code>, or <code>changelog+database</code> to run the enabled checks against. If --checks-scope is not specified, Liquibase defaults to running <MadCap:variable name="General.changelog" /> checks.</p>
        <p> Users can establish which database the checks will be run by specifying the desired database in the --url parameter within the liquibase.properties file or the environment variable equivalent. The database can be a valid (and typically will be) a JDBC connection string. It can also be a <MadCap:xref href="../commands/snapshot/snapshot.html?">Snapshot</MadCap:xref>, which is a reference to a liquibase-created file describing the database.</p>
        <h3>An example of running the <code>check-scope</code> parameter</h3><pre xml:space="preserve"><code class="language-text">liquibase checks run --checks-scope changelog --changelog-file &lt;example-changelog.xml&gt;</code></pre>
        <h2>Running the check-scope command</h2>
        <p>A check can be one scope or dual-scoped. When executed, the command can be used in any of the following ways:</p>
        <p>&#160;</p><code><p>liquibase --checks-scope=<MadCap:variable name="General.changelog" /></p><p>liquibase --checks-scope=database </p><p>liquibase --checks-scope=changelog, database</p><p>liquibase --checks-scope=database, changelog</p> </code>
        <h2>check-scope attributes</h2>
        <p>The following table identifies parameters that are accepted or required by some sub-commands .</p>
        <table style="mc-table-style: url('../Z_Resources/Stylesheets/TableStyles.css');" cellspacing="0" class="TableStyle-TableStyles">
            <col class="TableStyle-TableStyles-Column-Column1" style="width: auto;" />
            <col class="TableStyle-TableStyles-Column-Column1" style="width: auto;" />
            <col class="TableStyle-TableStyles-Column-Column1" style="width: 202px;" />
            <thead>
                <tr class="TableStyle-TableStyles-Head-Header1">
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">Name</th>
                    <th class="TableStyle-TableStyles-HeadE-Column1-Header1">Syntax</th>
                    <th class="TableStyle-TableStyles-HeadD-Column1-Header1">Description</th>
                </tr>
            </thead>
            <tbody>
                <tr class="TableStyle-TableStyles-Body-Body1">
                    <td class="TableStyle-TableStyles-BodyE-Column1-Body1" style="text-align: center;"><code><MadCap:variable name="General.changelog" /></code>
                    </td>
                    <td class="TableStyle-TableStyles-BodyE-Column1-Body1" style="text-align: center;">
                        <p>CLI:</p>
                        <p><code>--checks-scope=changelog</code>
                        </p>
                        <p>Property:</p>
                        <p><code>liquibase.command.checksscope=changelog</code>
                        </p>
                        <p>Environment Variable:</p>
                        <p><code>LIQUIBASE_COMMAND_CHECKS_SCOPE="changelog"</code>
                        </p>
                    </td>
                    <td class="TableStyle-TableStyles-BodyD-Column1-Body1" style="text-align: center;">
                        <p>The parameter which specifies the changelog subset of checks  to run.</p>
                        <p>For more information, see <MadCap:xref href="../commands/quality-checks/using-the-checks-settings-configuration-file.htm">Using the Checks Settings Configuration File</MadCap:xref>.</p>
                    </td>
                </tr>
                <tr class="TableStyle-TableStyles-Body-Body2">
                    <td class="TableStyle-TableStyles-BodyB-Column1-Body2" style="text-align: center;"><code>database</code>
                    </td>
                    <td class="TableStyle-TableStyles-BodyB-Column1-Body2" style="text-align: center;">
                        <p>CLI:</p>
                        <p><code>--checks-scope=database</code>
                        </p>
                        <p>Property:</p>
                        <p><code>liquibase.command.checksscope=database</code>
                        </p>
                        <p>Environment Variable:</p>
                        <p><code>LIQUIBASE_COMMAND_CHECKS_SCOPE="database"</code>
                        </p>
                    </td>
                    <td class="TableStyle-TableStyles-BodyA-Column1-Body2" style="text-align: center;">
                        <p>The parameter which specifies the database subset of checks  to run.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p class="note" MadCap:autonum="&lt;b&gt;Note: &lt;/b&gt;">One attribute is required to run <code>check-scope</code> successfully.</p>
        <h2>Check-Scope Example Procedure:<br /></h2>
        <p>In this example, we will begin with a changelog that contains a createTable changeset. When <code>checks run --checks-scope</code> is run, we will see the resulting checks.</p>
        <p>1. With a changelog that has a createTable changeset with two columns, enable the TableColumnLimit check like so:<br /><code>liquibase checks enable --check-name=TableColumnLimit</code><br /></p>
        <p> 2. Run the <code>liquibase checks run --checks-scope changelog</code> command.</p>
        <p>3. Run <code>liquibase checks bulk-set--disable.</code></p>
        <p>4. Run liquibase checks customize --check-name TableColumnLimit.</p>
        <p>5. Set the severity as desired.</p>
        <p>6. Set the Max Columns to 2.</p>
        <p>7. Enable the check.</p>
        <p>8. Run <code>liquibase checks run --checks-scope changelog --changelog-file yourName-createTable-changelog.xml</code>.</p>
        <p>Liquibase has successfully run checks against it's new changelog.</p>
        <p>&#160;</p>
        <MadCap:dropDown>
            <MadCap:dropDownHead>
                <MadCap:dropDownHotspot>Output</MadCap:dropDownHotspot>
            </MadCap:dropDownHead>
            <MadCap:dropDownBody>
                <p><code class="language-text">Starting Liquibase at 16:35:11 (version [Core: //DAT-9298/2516/e42617/2022-05-11 19:02+0000, Pro: DAT-9298/1208/56ac6a/2022-05-11T18:56:15Z] #2516 built at 2022-05-11 19:02+0000)
</code>
                </p>
                <p><code class="language-text">				Liquibase Version: [Core: //DAT-9298/2516/e42617/2022-05-11 19:02+0000, Pro: DAT-9298/1208/56ac6a/2022-05-11T18:56:15Z]
				</code>
                </p>
                <p><code class="language-text">Liquibase Empire [Core: //DAT-9298/2516/e42617/2022-05-11 19:02+0000, Pro: DAT-9298/1208/56ac6a/2022-05-11T18:56:15Z] by Liquibase licensed to Dev until Sat Dec 30 21:59:59 MST 2023
</code>
                </p>
                <p><code class="language-text">				Executing Quality Checks against amber-createTable-changelog.xml
</code>
                </p>
                <p><code class="language-text">
				Executing all changelog checks because a valid license key was found!
</code>
                </p>
                <p><code class="language-text">
				CHANGELOG CHECKS
</code>
                </p>
                <p><code class="language-text">				----------------
				</code>
                </p>
                <p><code class="language-text">Checks completed validation of the changelog and found the following issues:

				</code>
                </p>
                <p><code class="language-text">Changeset ID:       1::createTableforSynonym-PROSCHEMA
</code>
                </p>
                <p><code class="language-text">				Changeset Filepath: amber-createTable-changelog.xml
				</code>
                </p>
                <p><code class="language-text">Check Name:         Check Table Column Count (TableColumnLimit)
</code>
                </p>
                <p><code class="language-text">				Check Severity:     MINOR (Return code: 1)
</code>
                </p>
                <p><code class="language-text">				Message:            Table must not have more than 2 columns.
</code>
                </p>
                <p>&#160;</p>
                <p><code class="language-text">

				Changesets Validated:
</code>
                </p>
                <p><code class="language-text">				ID: 1::createTableforSynonym-PROSCHEMA; Author: Liquibase Pro User; File path: amber-createTable-changelog.xml

				Checks run against each changeset:
</code>
                </p>
                <p><code class="language-text">				Check Table Column Count

				</code>
                </p>
                <p><code class="language-text">liquibase.command.CommandFailedException: Checks run command exited with an error code of 1
</code>
                </p>
            </MadCap:dropDownBody>
        </MadCap:dropDown>
        <p>&#160;</p>
        <p>Related&#160;Topics:</p>
        <ul>
            <li>
                <MadCap:xref href="../commands/">Find Related Topics and place here.</MadCap:xref>
            </li>
        </ul>
    </body>
</html>